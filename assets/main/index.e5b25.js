window.__require=function e(t,n,i){function a(o,s){if(!n[o]){if(!t[o]){var c=o.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+o+"'")}o=c}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){return a(t[o][1][e]||e)},l,l.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof __require&&__require,o=0;o<i.length;o++)a(i[o]);return a}({AD:[function(e,t,n){"use strict";cc._RF.push(t,"a1152WYoG5HhLsebgHomo2U","AD"),Object.defineProperty(n,"__esModule",{value:!0}),n.AD=void 0;var i=e("utils"),a=e("DrawManager"),r=e("EventManager"),o=e("SDKTools"),s=e("shareTools"),c=cc._decorator,u=c.ccclass,l=c.property,d=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).icon=null,e.closeSF=null,e.isVideo=!1,e}return _createClass2(n,[{key:"onEnable",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.icon.spriteFrame=null,t=cc.view.getFrameSize().height/cc.view.getFrameSize().width>1.8,this.node.y=t?620:600,this.node.x=t?320:136,this.node.scale=t?1:.8,this.init();case 3:case"end":return e.stop()}},e,this)}))}},{key:"init",value:function(){this.isVideo||1!=o.SDKTools.getParamsInt("grid_video",0)||!o.SDKTools.isnew||o.SDKTools.scene+""!="1095"?1===o.SDKTools.getParamsInt(o.OnlineKeys.switch_grid,0)?(this.initGrid(),this.schedule(this.initGrid,30)):this.icon.spriteFrame=null:this.icon.spriteFrame=this.closeSF}},{key:"initGrid",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.I.getGrid();case 2:t=e.sent,this._data=a.default.I.gridList[t],o.SDKTools.addExposure(a.DrawType.grid,[this._data]),this.show();case 4:case"end":return e.stop()}},e,this)}))}},{key:"show",value:function(){var e=this;null!=this._data&&(""!=this._data.icon?(this.icon.node.active=!0,cc.loader.load({url:this._data.icon,type:"png"},function(t,n){cc.isValid(e.icon)&&!t&&(e.icon.spriteFrame=new cc.SpriteFrame(n))})):this.icon.node.active=!1)}},{key:"onItem",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isVideo&&1==o.SDKTools.getParamsInt("grid_video",0)&&o.SDKTools.isnew&&o.SDKTools.scene+""=="1095"){e.next=4;break}this._data&&(a.default.I.navigateToMiniProgram(this._data,a.DrawType.grid),this.initGrid(),this.unschedule(this.initGrid),this.schedule(this.initGrid,30)),e.next=11;break;case 4:if(e.t0=o.SDKTools.isnew&&1==o.SDKTools.getParamsInt("banner_video_show_in",0),!e.t0){e.next=9;break}return o.SDKTools.createInterstitialAd(),e.next=9,i.utils.wait(100);case 9:t=this,s.ShareTools.share(s.ShareKey.gridVideo,{success:function(){r.default.I.emit(r.EventName.UPDATE_PROP,!0),t.isVideo=!0,t.init()},fail:function(){t.isVideo=!0,t.init()}});case 11:case"end":return e.stop()}},e,this)}))}}]),n}(cc.Component);__decorate([l({type:cc.Sprite,displayName:"\u5934\u50cf"})],d.prototype,"icon",void 0),__decorate([l({type:cc.SpriteFrame})],d.prototype,"closeSF",void 0),d=__decorate([u],d),n.AD=d,cc._RF.pop()},{DrawManager:"DrawManager",EventManager:"EventManager",SDKTools:"SDKTools",shareTools:"shareTools",utils:"utils"}],Action:[function(e,t,n){"use strict";cc._RF.push(t,"7859bE0d9hGxbF+Kdj05xy9","Action"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("Panel"),a=e("utils"),r=cc._decorator,o=r.ccclass,s=r.property,c=r.menu,u=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).targetPanel=null,e.targetPanelPath="",e.targetScene="",e.toggleNode="",e.closeModal=!1,e.closeModalTime=0,e.toModal=!1,e.onceEnabled=!1,e.recoveryEnabledTime=0,e}return _createClass2(n,[{key:"start",value:function(){var e=this,t=this.node.getComponent(cc.Button);this.node.on(cc.Node.EventType.TOUCH_END,function(){return __awaiter(e,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.interactable,this.scheduleOnce(function(){t.interactable},.1);case 1:case"end":return e.stop()}},e,this)}))}),this.onceEnabled&&(t.interactable,this.recoveryEnabledTime&&setTimeout(function(){e.onceEnabled=!0,t.interactable},this.recoveryEnabledTime)),this.closeModal&&this.node.on(cc.Node.EventType.TOUCH_END,function(){return __awaiter(e,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.closeModalTime){e.next=7;break}return this.node.off(cc.Node.EventType.TOUCH_END),e.next=4,a.utils.wait(this.closeModalTime);case 4:this.close(),e.next=8;break;case 7:this.close();case 8:case"end":return e.stop()}},e,this)}))}),(this.targetPanel||""!=this.targetPanelPath)&&this.node.on(cc.Node.EventType.TOUCH_END,function(){return __awaiter(e,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.onceEnabled){e.next=2;break}return e.abrupt("return");case 2:if(t=null,!this.targetPanel){e.next=7;break}e.t0=cc.instantiate(this.targetPanel),e.next=10;break;case 7:return e.next=9,a.utils.loadPrefab(this.targetPanelPath);case 9:e.t0=e.sent;case 10:(t=e.t0).isModal=!0,t.getComponent(i.default).init(),cc.director.getScene().addChild(t),this.toModal&&this.close();case 14:case"end":return e.stop()}},e,this)}))}),""!=this.targetScene&&this.node.on(cc.Node.EventType.TOUCH_END,function(){e.onceEnabled||cc.director.loadScene(e.targetScene)}),""!=this.toggleNode&&this.node.on(cc.Node.EventType.TOUCH_END,function(){if(!e.onceEnabled){var t=cc.find(e.toggleNode);e.closeModal?t.active=e.closeModal:e.scheduleOnce(function(){t.active=e.closeModal},.1)}})}},{key:"getModalNode",value:function(){for(var e,t=this.node.parent;t;){if(t.isModal){e=t;break}t=t.parent}return e}},{key:"close",value:function(){if(!this.onceEnabled){var e=this.getModalNode();e&&e.removeFromParent()}}}]),n}(cc.Component);__decorate([s({tooltip:"\u70b9\u51fb\u5c06\u9884\u7f6e\u8282\u70b9\u6dfb\u52a0\u5230\u5f53\u524d\u573a\u666f\u3002",type:cc.Prefab})],u.prototype,"targetPanel",void 0),__decorate([s({tooltip:"\u70b9\u51fb\u5c06\u9884\u7f6e\u8282\u70b9\u8def\u5f84"})],u.prototype,"targetPanelPath",void 0),__decorate([s({tooltip:"\u6253\u5f00\u76ee\u6807\u573a\u666f"})],u.prototype,"targetScene",void 0),__decorate([s({tooltip:"\u663e\u9690\u76ee\u6807\u8282\u70b9"})],u.prototype,"toggleNode",void 0),__decorate([s({tooltip:"\u5173\u95ed\u5f53\u524d\u6240\u5c5e\u6a21\u6001\u6846"})],u.prototype,"closeModal",void 0),__decorate([s({tooltip:"\u5173\u95ed\u5f53\u524d\u6240\u5c5e\u6a21\u6001\u6846\u5ef6\u8fdf\u65f6\u95f4 /\u6beb\u79d2"})],u.prototype,"closeModalTime",void 0),__decorate([s({tooltip:"\u662f\u5426\u66ff\u6362\u5f53\u524d\u6a21\u6001"})],u.prototype,"toModal",void 0),__decorate([s({tooltip:"\u662f\u5426\u9ed8\u8ba4\u7981\u7528\uff0c\u5ef6\u8fdf\u542f\u7528"})],u.prototype,"onceEnabled",void 0),__decorate([s({tooltip:"\u7981\u7528\u4e4b\u540e\uff0c\u591a\u957f\u65f6\u95f4\u81ea\u52a8\u6062\u590d"})],u.prototype,"recoveryEnabledTime",void 0),u=__decorate([o,c("\u81ea\u5b9a\u4e49/Action")],u),n.default=u,cc._RF.pop()},{Panel:"Panel",utils:"utils"}],AdService:[function(e,t,n){"use strict";cc._RF.push(t,"7c8b4Ss0xtJsqzCxsbm5/Uf","AdService"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("WxApi"),a=e("WxBanner"),r=e("WxCustom"),o=e("WxInterstitial"),s=e("SDKConst"),c=e("LogService"),u=e("DouyinInterstitial"),l=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"createBanner",value:function(e,t){return a.default.I.create(e,t)}},{key:"showBanner",value:function(){a.default.I.show()}},{key:"hideBanner",value:function(){a.default.I.hide()}},{key:"destoryBanner",value:function(){a.default.I.destory()}},{key:"createInterstitialAd",value:function(e){return cc.sys.platform===cc.sys.BYTEDANCE_GAME?u.default.showInterstitialAd(e):o.default.showInterstitialAd(e)}},{key:"createCustom",value:function(e,t){return r.default.I.create(e,t)}},{key:"showCustom",value:function(){r.default.I.show()}},{key:"hideCustom",value:function(){r.default.I.hide()}},{key:"destoryCustom",value:function(){r.default.I.destory()}},{key:"navigateToMiniProgram",value:function(e,t,n){var a=e.id,r=e.appid,o=e.path;return e.game,c.default.I.jumps(a,t),o||(o="?channel_id=".concat(s.GAMEDATA.channel_id)),i.default.I.navigateToMiniProgram(r,o,n)}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=l,cc._RF.pop()},{DouyinInterstitial:"DouyinInterstitial",LogService:"LogService",SDKConst:"SDKConst",WxApi:"WxApi",WxBanner:"WxBanner",WxCustom:"WxCustom",WxInterstitial:"WxInterstitial"}],Analytics:[function(e,t,n){"use strict";cc._RF.push(t,"f4d20ysz2dPMLEs065qd8IW","Analytics"),Object.defineProperty(n,"__esModule",{value:!0}),n.Analytics=void 0;var i=e("LogService"),a=e("WXSDK"),r=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"isSupported",get:function(){return"object"==_typeof2(a.default)}},{key:"dot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"!=typeof wx)return a.default.stat.dot(e,t)}},{key:"loadingFinish",value:function(){return a.default.stat.loadingFinish()}},{key:"behaviors",value:function(){return a.default.stat.behaviors()}},{key:"jumps",value:function(e,t){return a.default.stat.jumps(e,t)}},{key:"levelStart",value:function(e,t,n){return"undefined"==typeof wx&&console.log(e,t,n),a.default.stat.levelStart(e,t,n)}},{key:"levelRunning",value:function(e,t,n,i,r,o,s,c){return a.default.stat.levelRunning(e,t,n,i,r,o,s,c)}},{key:"levelEnd",value:function(e,t,n,i,r,o){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function s(){return _regenerator.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",("undefined"==typeof wx&&console.log(e,t,n,i,r,o),a.default.stat.levelEnd(e,t,n,i,r,o)));case 1:case"end":return s.stop()}},s)}))}},{key:"clientLog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.LogLevel.debug;return a.default.stat.clientLog(e,t)}},{key:"consume",value:function(e,t,n,i){return a.default.stat.consume(e,t,n,i)}},{key:"loading",value:function(e,t,n,i,r,o){return a.default.stat.loading(e,t,n,i,r,o)}}],[{key:"I",get:function(){return this._instance||(this._instance=new e)}}]),e}();n.Analytics=r,r.IGNORE_LOGGER=!1,cc._RF.pop()},{LogService:"LogService",WXSDK:"WXSDK"}],AudioManager:[function(e,t,n){"use strict";var i;cc._RF.push(t,"16b8d+Zc4NBi4/ANFgQawRu","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.AudioType=void 0;var a,r,o=e("GameData"),s=e("utils");(r=a=n.AudioType||(n.AudioType={}))[r.bgm=0]="bgm",r[r.btn=1]="btn",r[r.btn2=2]="btn2",r[r.pot=3]="pot",r[r.pot1=4]="pot1",r[r.pot2=5]="pot2",r[r.shibai=6]="shibai",r[r.wancheng=7]="wancheng",r[r.unlock=8]="unlock",r[r.fuhuo=9]="fuhuo";var c=cc._decorator,u=c.ccclass,l=(c.property,i=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"play",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return __awaiter(this,void 0,void 0,_regenerator.default.mark(function a(){return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(o.GameData.data.mute){a.next=9;break}if(a.t0=!this.sounds.hasOwnProperty(e),!a.t0){a.next=6;break}return a.next=5,this.loadAudioClip(e);case 5:a.t0=!a.sent;case 6:if(!a.t0){a.next=8;break}return a.abrupt("return");case 8:this.audioID[e]=cc.audioEngine.play(i.sounds[e],t,n);case 9:case"end":return a.stop()}},a,this)}))}},{key:"stop",value:function(e){cc.audioEngine.stop(this.audioID[e])}},{key:"toggleAtuio",value:function(){o.GameData.data.mute?(o.GameData.data.mute=!1,i.play(a.bgm,!0)):(o.GameData.data.mute=!0,cc.audioEngine.stopAll(),i.stop(a.bgm))}},{key:"loadAudioClip",value:function(e){var t=this;return new Promise(function(n){return __awaiter(t,void 0,void 0,_regenerator.default.mark(function t(){var i,r;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a[e],t.next=3,s.utils.loadSound("sound",i);case 3:r=t.sent,this.sounds[e]=r,n(!0);case 5:case"end":return t.stop()}},t,this)}))})}}]),e}());l.sounds={},l.audioID={},l=i=__decorate([u],l),n.default=l,cc._RF.pop()},{GameData:"GameData",utils:"utils"}],Audio:[function(e,t,n){"use strict";cc._RF.push(t,"d5296nfcbtA5Z71ew5+vAmA","Audio"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("AudioManager"),a=cc._decorator,r=a.ccclass,o=a.property,s=a.menu,c=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).type=i.AudioType.btn,e}return _createClass2(n,[{key:"onLoad",value:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.play,this)}},{key:"play",value:function(){i.default.play(i.AudioType.btn)}},{key:"toggleMuteAll",value:function(){i.default.toggleAtuio()}}]),n}(cc.Component);__decorate([o({type:cc.Enum({Btn:0})})],c.prototype,"type",void 0),c=__decorate([r,s("\u81ea\u5b9a\u4e49/Audio")],c),n.default=c,cc._RF.pop()},{AudioManager:"AudioManager"}],Base64Utils:[function(e,t){"use strict";cc._RF.push(t,"10b886+eVVFB5eiAQ4lMttR","Base64Utils"),cc._RF.pop()},{}],BaseIStorage:[function(e,t,n){"use strict";cc._RF.push(t,"9a41c2HjspHU6pMHFF436OL","BaseIStorage"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],Collection:[function(e,t,n){"use strict";cc._RF.push(t,"218da+DF89L0IS5Bpj0xHeG","Collection"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("utils"),a=e("UIManager"),r=e("Analytics"),o=cc._decorator,s=o.ccclass,c=o.property,u=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).boxTile=null,e.tiles=[],e.delArr=[],e}return _createClass2(n,[{key:"onLoad",value:function(){}},{key:"init",value:function(e){this.grid=e}},{key:"reset",value:function(){var e=this;this.tiles.forEach(function(t){e.grid.tilePool.put(t.node)}),this.tiles=[],this.isGG=!1}},{key:"addTile",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.addTile2(e),e.collect(),this.updateMove();case 1:case"end":return t.stop()}},t,this)}))}},{key:"addTile2",value:function(e){this.tiles.push(e)}},{key:"updateMove",value:function(){var e=this;this.tiles.forEach(function(t,n){t.checkMove(n)||t.moveIn(n,e.checkDel.bind(e))})}},{key:"checkDel",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n,o,s,c=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isGG||!this.grid.checkGG()||6!=this.tiles.length){e.next=28;break}return e.next=3,i.utils.wait(300);case 3:if(this.grid.checkGG()){e.next=5;break}return e.abrupt("return",(this.isGG=!1,void i.utils.wait(300).then(function(){c.checkDel()})));case 5:if(!this.isGG){e.next=7;break}return e.abrupt("return");case 7:if(this.isGG=!0,1!=(t=4==this.grid.flowerpots.unlockCount?0:1)){e.next=20;break}n=this.grid.flowerpots.groupIds[this.grid.flowerpots.groupIds.length-1],o=!1,s=0;case 12:if(!(s<this.tiles.length)){e.next=19;break}if(this.tiles[s].value!=n){e.next=16;break}return o=!0,e.abrupt("break",19);case 16:s++,e.next=12;break;case 19:o||(t=0);case 20:return r.Analytics.I.dot("game_gg"),e.next=23,a.default.waitOpenPanel(a.PanelType.GGPanel,t);case 23:if(!e.sent){e.next=27;break}this.isGG=!1,1==t?this.grid.flowerpots.addGroup():this.grid.clear(),e.next=28;break;case 27:this.grid.fail();case 28:case"end":return e.stop()}},e,this)}))}},{key:"clearTile",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.utils.removeFromList(this.tiles,e),this.updateMove();case 1:case"end":return t.stop()}},t,this)}))}}]),n}(cc.Component);__decorate([c(cc.Node)],u.prototype,"boxTile",void 0),u=__decorate([s],u),n.default=u,cc._RF.pop()},{Analytics:"Analytics",UIManager:"UIManager",utils:"utils"}],ComShareVideoIcon:[function(e,t,n){"use strict";cc._RF.push(t,"1d56d0H789GLLle1T9T87vF","ComShareVideoIcon"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("utils"),a=e("shareTools"),r=cc._decorator,o=r.ccclass,s=r.property,c=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).icon=null,e.videoIcon=null,e.shareIcon=null,e.shareKey="",e.wait=0,e}return _createClass2(n,[{key:"onEnable",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.wait&&"number"==typeof+this.wait,!e.t0){e.next=4;break}return e.next=4,i.utils.wait(+this.wait);case 4:this.shareKey?"undefined"!=typeof wx&&this.updateKey(this.shareKey):this.icon.spriteFrame=this.videoIcon;case 5:case"end":return e.stop()}},e,this)}))}},{key:"updateKey",value:function(e){var t=a.ShareTools.getShareType(e);this.icon.spriteFrame=1===t?this.shareIcon:this.videoIcon}}]),n}(cc.Component);__decorate([s({type:cc.Sprite,tooltip:"icon"})],c.prototype,"icon",void 0),__decorate([s({type:cc.SpriteFrame,tooltip:"\u89c6\u9891icon"})],c.prototype,"videoIcon",void 0),__decorate([s({type:cc.SpriteFrame,tooltip:"\u5206\u4eabicon"})],c.prototype,"shareIcon",void 0),__decorate([s({tooltip:"\u5206\u4eabkey"})],c.prototype,"shareKey",void 0),__decorate([s({tooltip:"\u7b49\u5f85\u65f6\u95f4"})],c.prototype,"wait",void 0),c=__decorate([o],c),n.default=c,cc._RF.pop()},{shareTools:"shareTools",utils:"utils"}],ComToggle:[function(e,t,n){"use strict";cc._RF.push(t,"a5ca1n/XLhJKae+aC042VH8","ComToggle"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,r=i.property,o=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).isImg=!1,e.icon=null,e.selSf=null,e.noSelSf=null,e.txtText=null,e.selTxt="",e.noSelTxt="",e}return _createClass2(n,[{key:"toggleClick",value:function(){this.isImg?this.icon.spriteFrame=this.getComponent(cc.Toggle).isChecked?this.selSf:this.noSelSf:this.txtText.string=this.getComponent(cc.Toggle).isChecked?this.selTxt:this.noSelTxt}}]),n}(cc.Component);__decorate([r({tooltip:"\u662f\u5426\u56fe\u7247\u5207\u6362"})],o.prototype,"isImg",void 0),__decorate([r({type:cc.Sprite,tooltip:"\u56fe\u7247\u8282\u70b9"})],o.prototype,"icon",void 0),__decorate([r({type:cc.SpriteFrame,tooltip:"\u9009\u4e2d\u56fe\u7247"})],o.prototype,"selSf",void 0),__decorate([r({type:cc.SpriteFrame,tooltip:"\u672a\u9009\u4e2d\u56fe\u7247"})],o.prototype,"noSelSf",void 0),__decorate([r({type:cc.Label,tooltip:"\u6587\u672c\u8282\u70b9"})],o.prototype,"txtText",void 0),__decorate([r({tooltip:"\u9009\u4e2d\u6587\u672c"})],o.prototype,"selTxt",void 0),__decorate([r({tooltip:"\u672a\u9009\u4e2d\u6587\u672c"})],o.prototype,"noSelTxt",void 0),o=__decorate([a],o),n.default=o,cc._RF.pop()},{}],ConfigHelper:[function(e,t,n){"use strict";cc._RF.push(t,"cc8d5/tbnlAL568l51yavBB","ConfigHelper"),Object.defineProperty(n,"__esModule",{value:!0}),n.FlowerCfg=n.DiffCfg=n.LvCfgData=void 0;var i=e("utils"),a=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"load",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.utils.loadJson("data/config");case 2:t=e.sent,console.log("load",t),t.code||(this.LvCfg=t.data.level,this.diffCfg=t.data.diff,this.flowerCfg=t.data.flowerCfg);case 4:case"end":return e.stop()}},e,this)}))}},{key:"getDiff",value:function(e){return e>=this.diffCfg.length?this.diffCfg[this.diffCfg.length-1]:this.diffCfg[e]}},{key:"getLevel",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e>=9,!t.t0){t.next=10;break}if(t.t1=this.isLoadAll,t.t1){t.next=10;break}if(9!=e){t.next=8;break}this.loadAll(),t.next=10;break;case 8:return t.next=10,this.loadAll();case 10:return t.abrupt("return",this.LvCfg[e]);case 11:case"end":return t.stop()}},t,this)}))}},{key:"getFlower",value:function(e){if(e>=200){var t=101+(e-200)%99;return this.flowerCfg[t]}return this.flowerCfg[e]}},{key:"loadAll",value:function(){var e=this;return new Promise(function(t,n){cc.loader.load("https://wxsdk-cdn.miso-lab.com/flower_tile/level/levels.json",function(i,a){i?n(i):(e.LvCfg=Object.assign(Object.assign({},e.LvCfg),a),e.isLoadAll=!0,t(a))})})}}]),e}();n.default=a,a.isLoadAll=!1,n.LvCfgData=function(){return _createClass2(function e(){_classCallCheck2(this,e)})}(),n.DiffCfg=function(){return _createClass2(function e(){_classCallCheck2(this,e)})}(),n.FlowerCfg=function(){return _createClass2(function e(){_classCallCheck2(this,e)})}(),cc._RF.pop()},{utils:"utils"}],Const:[function(e,t,n){"use strict";cc._RF.push(t,"8814aK+yT9Ai61J+Riq34SI","Const"),Object.defineProperty(n,"__esModule",{value:!0});var i=_createClass2(function e(){_classCallCheck2(this,e)});n.default=i,i.TILE_W=98,i.TILE_H=98,i.TILE_W_SPACE=0,i.TILE_H_SPACE=0,i.TILE_MAX=30,i.prop_pos=[[-2174.6,0],[-126,126],[0,54],[-176,-86]],i.skin_pos=[[2174.6,0],[126,126],[0,-54],[176,-86]],i.MAX_FLOWER=200,cc._RF.pop()},{}],CustomAd2:[function(e,t,n){"use strict";cc._RF.push(t,"599bdp23tNE9469YBCFfUX9","CustomAd2"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("utils"),a=e("WxCustom2"),r=cc._decorator,o=r.ccclass,s=(r.property,function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).isCreate=!1,e.isShow=!1,e.t=0,e}return _createClass2(n,[{key:"onEnable",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n,r,o,s,c,u;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof wx&&!this.isCreate){e.next=2;break}return e.abrupt("return");case 2:return this.isCreate=!1,e.next=5,i.utils.wait(1e3);case 5:t=this.node.convertToWorldSpaceAR(cc.v2(0,0)),n=wx.getSystemInfoSync(),r=cc.view.getVisibleSize().width,o=cc.view.getVisibleSize().height,s=r/n.windowWidth,c=(o-t.y-this.node.height/2)/s,u=(t.x-this.node.width/2)/s,console.log(c,u),a.default.I.create("adunit-ac08491d0d84c50c",{top:c,left:u}),console.log("createcustom"),this.isCreate=!0;case 7:case"end":return e.stop()}},e,this)}))}},{key:"show",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="undefined"!=typeof wx,!e.t0){e.next=12;break}if(e.t1=this.isShow||Date.now()-this.t<500,e.t1){e.next=12;break}if(this.t=Date.now(),e.t2=this.isCreate,e.t2){e.next=9;break}return e.next=9,i.utils.wait(1100);case 9:a.default.I.show(),this.isShow=!0,console.log("showcustom");case 12:case"end":return e.stop()}},e,this)}))}},{key:"hide",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="undefined"!=typeof wx,!e.t0){e.next=9;break}if(e.t1=this.isCreate,e.t1){e.next=6;break}return e.next=6,i.utils.wait(1100);case 6:a.default.I.hide(),this.isShow=!1,console.log("hidecustom");case 9:case"end":return e.stop()}},e,this)}))}}]),n}(cc.Component));s=__decorate([o],s),n.default=s,cc._RF.pop()},{WxCustom2:"WxCustom2",utils:"utils"}],CustomAd3:[function(e,t,n){"use strict";cc._RF.push(t,"8e348rw1wJKMIdtEy/p3e/a","CustomAd3"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKTools"),a=e("utils"),r=e("WxCustom3"),o=cc._decorator,s=o.ccclass,c=o.property,u=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).wait=500,e.isShow=!1,e}return _createClass2(n,[{key:"onEnable",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n,o,s,c,u,l;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1===i.SDKTools.getParamsInt("next_custom_show",0)){e.next=2;break}return e.abrupt("return");case 2:if(this.isShow=!1,i.SDKTools.hideBanner(),e.t0=this.wait&&"number"==typeof+this.wait,!e.t0){e.next=8;break}return e.next=8,a.utils.wait(+this.wait);case 8:t=this.node.convertToWorldSpaceAR(cc.v2(0,0)),n=wx.getSystemInfoSync(),o=cc.view.getVisibleSize().width,s=cc.view.getVisibleSize().height,c=o/n.windowWidth,u=(s-t.y-this.node.height/2)/c-44,l=(o/2-310)/2,console.log("top",u,l),r.default.I.create("adunit-61dd7568f345c1b9",{top:u,left:l}),this.isShow=!0;case 10:case"end":return e.stop()}},e,this)}))}},{key:"onDisable",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=1===i.SDKTools.getParamsInt("next_custom_show",0),!e.t0){e.next=9;break}if(!this.isShow){e.next=6;break}r.default.I.hide(),e.next=9;break;case 6:return e.next=8,a.utils.wait(+this.wait);case 8:r.default.I.hide();case 9:case"end":return e.stop()}},e,this)}))}}]),n}(cc.Component);__decorate([c({tooltip:"\u7b49\u5f85\u65f6\u95f4ms"})],u.prototype,"wait",void 0),u=__decorate([s],u),n.default=u,cc._RF.pop()},{SDKTools:"SDKTools",WxCustom3:"WxCustom3",utils:"utils"}],CustomAd:[function(e,t,n){"use strict";cc._RF.push(t,"ad55dKlDH5JXKzH187NrBw1","CustomAd"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKTools"),a=e("utils"),r=cc._decorator,o=r.ccclass,s=r.property,c=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).wait=0,e.isShow=!1,e}return _createClass2(n,[{key:"onEnable",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n,r,o,s,c,u;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isShow=!1,e.t0=this.wait&&"number"==typeof+this.wait,!e.t0){e.next=5;break}return e.next=5,a.utils.wait(+this.wait);case 5:t=this.node.convertToWorldSpaceAR(cc.v2(0,0)),n=wx.getSystemInfoSync(),r=cc.view.getVisibleSize().width,o=cc.view.getVisibleSize().height,s=r/n.windowWidth,c=(o-t.y-this.node.height/2)/s,u=(t.x-this.node.width/2)/s,i.SDKTools.createCustom("adunit-193590de82ede6a4",{top:c,left:u}),this.isShow=!0;case 7:case"end":return e.stop()}},e,this)}))}},{key:"onDisable",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.SDKTools.hideCustom(),!this.isShow){e.next=5;break}i.SDKTools.hideCustom(),e.next=8;break;case 5:return e.next=7,a.utils.wait(+this.wait);case 7:i.SDKTools.hideCustom();case 8:case"end":return e.stop()}},e,this)}))}}]),n}(cc.Component);__decorate([s({tooltip:"\u7b49\u5f85\u65f6\u95f4"})],c.prototype,"wait",void 0),c=__decorate([o],c),n.default=c,cc._RF.pop()},{SDKTools:"SDKTools",utils:"utils"}],DataService:[function(e,t,n){"use strict";cc._RF.push(t,"b8d44MrVH5K9q4dkY3UOluS","DataService"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SdkData"),a=e("SDKUtils"),r=e("StorageUtils"),o=e("SDKConst"),s=e("SDKEnum"),c=e("WxLaunch"),u=e("LogService"),l=function(){function e(){_classCallCheck2(this,e),this._data=new i.default;var t=+((this.nextDay()-Date.now())/1e3).toFixed(0);setTimeout(this.resetData.bind(this),1e3*t),"undefined"!=typeof wx&&(wx.onShow(this.onShow.bind(this)),wx.onHide(this.onHide.bind(this)))}return _createClass2(e,[{key:"onShow",value:function(){this.updateTodayOnlineTime()}},{key:"onHide",value:function(){clearInterval(this.timeInterval)}},{key:"resetData",value:function(){this.setPtm(0),this.setLogindays(this.logindays+1),this.setIsnew(0)}},{key:"setValue",value:function(e,t){a.default.isUndefined(t)||(this._data=Object.assign(Object.assign({},this._data),_defineProperty2({},e,t)))}},{key:"Data",get:function(){return this._data}},{key:"setLoginData",value:function(e){e&&0!==Object.keys(e).length&&(e.hasOwnProperty("openId")&&this.setOpenId(e.openId),e.hasOwnProperty("channel")&&this.setChannelId(e.channel),e.hasOwnProperty("userId")&&this.setUserId(e.userId),e.hasOwnProperty("regTime")&&this.setRegTime(e.regTime),e.hasOwnProperty("token")&&this.setToken(e.token),e.hasOwnProperty("refToken")&&this.setRefToken(e.refToken),e.hasOwnProperty("expire")&&this.setExpice(e.expire),e.hasOwnProperty("isnew")&&this.setIsnew(e.isnew),e.hasOwnProperty("logindays")&&this.setLogindays(e.logindays),e.hasOwnProperty("amount")&&this.setAmount(e.amount),e.hasOwnProperty("pon")&&this.setPon(e.pon),e.hasOwnProperty("ptm")&&this.setPtm(e.ptm),e.hasOwnProperty("ad_info")&&this.setAdInfo(e.ad_info))}},{key:"expice",get:function(){return this._data.expice}},{key:"setExpice",value:function(e){return this.setValue("expire",e),this}},{key:"isnew",get:function(){return this._data.isnew}},{key:"setIsnew",value:function(e){return this.setValue("isnew",e),this}},{key:"logindays",get:function(){return this._data.logindays}},{key:"setLogindays",value:function(e){return this.setValue("logindays",e),this}},{key:"setAmount",value:function(e){return this.setValue("amount",e),this}},{key:"amount",get:function(){return this._data.amount}},{key:"setPon",value:function(e){return this.setValue("pon",e),this}},{key:"pon",get:function(){return this._data.pon}},{key:"setPtm",value:function(e){return this.setValue("ptm",e),this}},{key:"ptm",get:function(){return this._data.ptm}},{key:"Scene",get:function(){return this._data.scene||0}},{key:"setScene",value:function(e){return this.setValue("scene",e),this}},{key:"ReferrerInfo",get:function(){return this._data.referrerInfo||{}}},{key:"setReferrerInfo",value:function(e){return this.setValue("referrerInfo",e),this}},{key:"Token",get:function(){return this._data.token||""}},{key:"setToken",value:function(e){return this.setValue("token",e),this}},{key:"refToken",get:function(){return this._data.refToken}},{key:"setRefToken",value:function(e){return this.setValue("refToken",e),this}},{key:"OpenId",get:function(){return this._data.openId}},{key:"setOpenId",value:function(e){return this.setValue("openId",e),this}},{key:"UserId",get:function(){return this._data.userId?this._data.userId:this.OpenId}},{key:"setUserId",value:function(e){return this.setValue("userId",e),r.default.I.set("userId",e),this}},{key:"RegTime",get:function(){return this._data.regTime}},{key:"setRegTime",value:function(e){return this.setValue("regTime",e),this}},{key:"LaunchTime",get:function(){return this._data.launchTime}},{key:"setLaunchTime",value:function(e){return this.setValue("launchTime",e),this}},{key:"ShareId",get:function(){return this._data.shareId}},{key:"setShareId",value:function(e){return this.setValue("shareId",e),this}},{key:"ShareKey",get:function(){return this._data.shareKey}},{key:"setShareKey",value:function(e){return this.setValue("shareKey",e),this}},{key:"Platform",get:function(){return this._data.platform}},{key:"setPlatform",value:function(e){return this.setValue("platform",e),this}},{key:"setNetworkType",value:function(e){return this.setValue("networkType",e),this}},{key:"Gender",get:function(){return this._data.gender||s.Gender.Unknown}},{key:"setGender",value:function(e){return this.setValue("gender",e),this}},{key:"ChannelId",get:function(){return this._data.channelId}},{key:"setChannelId",value:function(e){return this.setValue("channelId",e),this}},{key:"QueryChannelId",get:function(){return this._data.queryChannelId||0}},{key:"setQueryChannelId",value:function(e){return this.setValue("queryChannelId",e),this}},{key:"InviteType",get:function(){return this._data.inviteType||0}},{key:"setInviteType",value:function(e){return this.setValue("inviteType",e),this}},{key:"QueryUserInviteUid",get:function(){return this._data.queryUserInviteUid||0}},{key:"setQueryUserInviteUid",value:function(e){return this.setValue("queryUserInviteUid",e),this}},{key:"QueryExtData",get:function(){return this._data.queryExtData||{}}},{key:"setQueryExtData",value:function(e){return this.setValue("queryExtData",e),this}},{key:"UserInviteUid",get:function(){return this._data.inviteUid||0}},{key:"setUserInviteUid",value:function(e){return this.setValue("inviteUid",e),this}},{key:"setUserState",value:function(e){return this.setValue("userState",e),this}},{key:"Shield",get:function(){return this._data.shield||r.default.I.get(o.StorageKeys.SDKUserShieldKey)||0}},{key:"setShield",value:function(e){return this.setValue("shield",e),r.default.I.set(o.StorageKeys.SDKUserShieldKey,e),this}},{key:"ShareTicket",get:function(){return this._data.shareTicket}},{key:"setShareTicket",value:function(e){return this.setValue("shareTicket",e),this}},{key:"SystemId",get:function(){return this._data.systemId}},{key:"setSystemId",value:function(){var e="android"===this.Platform?1:0;return this.setValue("systemId",e),this}},{key:"Authorize",get:function(){return this._data.authorize}},{key:"setAuthorize",value:function(e){return this.setValue("authorize",e),this}},{key:"Version",get:function(){return this._data.version}},{key:"setVersion",value:function(e){return this.setValue("version",e),this}},{key:"CdnUrl",get:function(){return this._data.cdnUrl}},{key:"setCdnUrl",value:function(e){return this.setValue("cdnUrl",e),this}},{key:"EnvEnum",get:function(){return this._data.envEnum}},{key:"setEnvEnum",value:function(e){return this.setValue("envEnum",e),this}},{key:"LoginApi",get:function(){var e=o.LoginHost.Prod;return 1===this.EnvEnum&&(e=o.LoginHost.Pre),e}},{key:"GameApi",get:function(){var e=o.GameHost.Prod;return 1===this.EnvEnum&&(e=o.GameHost.Pre),e}},{key:"DotApi",get:function(){var e=o.DotHost.Prod;return 1===this.EnvEnum&&(e=o.DotHost.Pre),e}},{key:"OrderApi",get:function(){var e=o.OrderHost.Prod;return 1===this.EnvEnum&&(e=o.OrderHost.Pre),e}},{key:"GMApi",get:function(){var e=o.GMHost.Prod;return 1===this.EnvEnum&&(e=o.GMHost.Pre),e}},{key:"GameId",get:function(){return o.GAMEDATA.game_id}},{key:"LaunchKey",get:function(){return this._data.launchKey||r.default.I.get(o.StorageKeys.SDKLaunchKey)||""}},{key:"fixLaunchKey",value:function(e){return e&&(r.default.I.set(o.StorageKeys.SDKLaunchKey,e),this.setValue("launchKey",e)),this}},{key:"setLaunchSource",value:function(){var e=0,t=c.default.I.LaunchData.query;return t?t.scene?decodeURIComponent(t.scene).split("&")[1]&&(e=1):(t.user_invite_id||t.user_invite_uid||t.invite_unionid)&&(e=1):e=0,this.setValue("launchSource",e),this}},{key:"setClueToken",value:function(e){return this.setValue("clue_token",e),this}},{key:"setCreativeId",value:function(e){return this.setValue("creative_id",e),this}},{key:"setAdvertisterId",value:function(e){return this.setValue("advertister_id",e),this}},{key:"setRequestId",value:function(e){return this.setValue("request_id",e),this}},{key:"setAdInfo",value:function(e){if(e&&""!=e&&"{}"!=e)try{e=JSON.parse(e)}catch(t){e={},console.error("setAdInfo error",e,t)}else e={};return this.setValue("ad_info",e),this}},{key:"setLaunchAdInfo",value:function(e){return this.setValue("launch_ad_info",e),this}},{key:"IsCross",get:function(){return this._data.isCross}},{key:"setIsCross",value:function(e){return this.setValue("isCross",e),this}},{key:"IsDrawer",get:function(){return this._data.isDrawer}},{key:"setIsDrawer",value:function(e){return this.setValue("isDrawer",e),this}},{key:"IsGuessLike",get:function(){return this._data.isGuessLike}},{key:"setIsGuessLike",value:function(e){return this.setValue("isGuessLike",e),this}},{key:"updateTodayOnlineTime",value:function(){var e=this;if(1!==(r.default.I.get("pcsdk_today_online_time_300")||0))this.setPtm(0),this.timeInterval=setInterval(this.stayFun.bind(this),1e3);else{this.setPtm(1);var t=+((this.nextDay()-Date.now())/1e3).toFixed(0);setTimeout(function(){e.updateTodayOnlineTime()},1e3*t)}}},{key:"stayFun",value:function(){var e=this,t=+((this.nextDay()-Date.now())/1e3).toFixed(0),n=r.default.I.get("pcsdk_today_online_time")||0;n+=1,r.default.I.set("pcsdk_today_online_time",n,t);var i=r.default.I.get("pcsdk_today_online_time_300")||0;if(1===i)return this.setPtm(1),clearInterval(this.timeInterval),void setTimeout(function(){e.updateTodayOnlineTime()},1e3*t);n>=300&&0==i&&(r.default.I.set("pcsdk_today_online_time_300",1,t),this.setPtm(1),u.default.I.daystay(),clearInterval(this.timeInterval),setTimeout(function(){e.updateTodayOnlineTime()},1e3*t))}},{key:"nextDay",value:function(){var e=new Date,t=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate();return new Date(t).getTime()+864e5}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=l,cc._RF.pop()},{LogService:"LogService",SDKConst:"SDKConst",SDKEnum:"SDKEnum",SDKUtils:"SDKUtils",SdkData:"SdkData",StorageUtils:"StorageUtils",WxLaunch:"WxLaunch"}],DateUtils:[function(e,t,n){"use strict";cc._RF.push(t,"95e84ozzjlH+71z0f/H7gat","DateUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"now",get:function(){return Math.floor(this.nowTime/1e3)}},{key:"nowTime",get:function(){return(new Date).getTime()}},{key:"today",get:function(){var e=new Date(this.nowTime),t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return"".concat(t,"-").concat(this.add(n),"-").concat(this.add(i))}},{key:"add",value:function(e){return e<10?"0"+e:""+e}}]),e}(),cc._RF.pop()},{}],DouyinInterstitial:[function(e,t,n){"use strict";cc._RF.push(t,"eb36antwOZKeob/+aXRxitN","DouyinInterstitial"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"initInterstitialAd",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.GAMEDATA.interstitialAdId}},{key:"showInterstitialAd",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.GAMEDATA.interstitialAdId,tt.createInterstitialAd({adUnitId:this.interstitialAdId}));this.canReTry=!0,t.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544aonload\u6210\u529f"),t.show().then(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u6210\u529f")})}),t.onError(function(){e.canReTry?(e.canReTry=!1,t.load()):tt.showToast({title:"\u6682\u65e0\u5e7f\u544a",icon:"none"})})}}]),e}();n.default=a,a.interstitialAdId=i.GAMEDATA.interstitialAdId,a.interstitialSuccell=!1,a.canReTry=!1,cc._RF.pop()},{SDKConst:"SDKConst"}],DouyinPay:[function(e,t,n){"use strict";cc._RF.push(t,"84c73A74rRPZYFnFiayAgxO","DouyinPay"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SDKEnum"),r=e("SDKApi"),o=e("DataService"),s=e("WxSystem"),c=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"pay",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(s,c){var u=i.GAMEDATA.MidasPay;u.Mode,u.OfferId,u.ZoneId,u.CurrencyType,u.Platform,o.default.I.EnvEnum,a.EnvCode.Prod;var l=o.default.I.Platform;e.money;var d="";for(var h in n)d+="".concat(h,"=").concat(n[h],"&");d=d.substring(0,d.length-1),d=encodeURIComponent(d);var f=Object.assign(Object.assign({},t.buildParams()),{extend:d,orderid:e.orderid,goodid:e.goodid,money:e.money,platform:l});console.log("payParams",f),r.SDKApi.bytedanceOrderReport(f).then(function(e){if(console.log("res",e),e.code)c(e);else{var t=e.data,n=t.mode,i=t.env,a=t.currencyType,r=t.platform,o=t.buyQuantity,u=t.zoneId,l=t.customId,d=t.extraInfo;tt.requestGamePayment({mode:n,env:i,currencyType:a,platform:r,buyQuantity:o,zoneId:u,customId:l,extraInfo:d,success:function(){s({code:0,msg:"\u652f\u4ed8\u6210\u529f\uff01"})},fail:function(e){s({code:e.errCode,msg:"\u652f\u4ed8\u5931\u8d25"})},complete:function(){}})}})})}},{key:"handlePaySuccess",value:function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3;return __awaiter(this,void 0,void 0,_regenerator.default.mark(function c(){var u,l,d,h;return _regenerator.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(l in u="",t)u+="".concat(l,"=").concat(t[l],"&");u=u.substring(0,u.length-1),u=encodeURIComponent(u),d=Object.assign(Object.assign({},this.buildParams()),{extend:u,midasenv:o.default.I.EnvEnum===a.EnvCode.Prod?0:1,orderid:e.orderid,payid:e.payid,goodid:e.goodid,type:1,money:e.money,platform:e.platform}),h=this,r.SDKApi.bytedanceOrderReport(d).then(function(a){a.code?(s=Math.min(2*s,6e4),setTimeout(function(){h.handlePaySuccess(e,t,n,i,s)},s)):n(a)});case 6:case"end":return c.stop()}},c,this)}))}},{key:"handlePayError",value:function(e,t,n,i){console.log("\u652f\u4ed8\u5931\u8d25",JSON.stringify(n));var s=2;n.errCode+""=="1"&&(s=3);var c="";for(var u in t)c+="".concat(u,"=").concat(t[u],"&");c=c.substring(0,c.length-1),c=encodeURIComponent(c);var l=Object.assign(Object.assign({},this.buildParams()),{extend:c,midasenv:o.default.I.EnvEnum===a.EnvCode.Prod?0:1,orderid:e.orderid,payid:e.payid,goodid:e.goodid,type:s,money:e.money,platform:e.platform});r.SDKApi.bytedanceOrderReport(l),i(n)}},{key:"buildParams",value:function(){var e=i.GAMEDATA.game_id,t=o.default.I.ChannelId;return{gameid:e,openid:o.default.I.OpenId,channel:t,brand:s.default.I.brand,model:s.default.I.model,version:s.default.I.version,system:s.default.I.system,sdkversion:s.default.I.SDKVersion,scene:o.default.I.Scene+"",uid:o.default.I.UserId,token:o.default.I.Token,env:1===o.default.I.EnvEnum?"pre":"prod"}}}],[{key:"I",get:function(){return this._instance||(this._instance=new e)}}]),e}();n.default=c,cc._RF.pop()},{DataService:"DataService",SDKApi:"SDKApi",SDKConst:"SDKConst",SDKEnum:"SDKEnum",WxSystem:"WxSystem"}],DrawManager:[function(e,t,n){"use strict";cc._RF.push(t,"53d6dDkNjxOjZQNF5xitfCA","DrawManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.DrawType=void 0;var i,a,r=e("Analytics"),o=e("SDKTools"),s=e("SDKEnum"),c=function(){function e(){_classCallCheck2(this,e),this.gridIdx=-1}return _createClass2(e,[{key:"updateDrawList",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.drawList){e.next=5;break}return e.next=3,o.SDKTools.adList(s.AdType.draw);case 3:(t=e.sent).code||(this.drawList=t.data);case 5:return e.abrupt("return",(this.drawList.sort(function(){return.5-Math.random()}),Promise.resolve()));case 6:case"end":return e.stop()}},e,this)}))}},{key:"updateBannerList",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.bannerList){e.next=5;break}return e.next=3,o.SDKTools.adList(s.AdType.guessLike);case 3:t=e.sent,console.log("adList",t),t.code||(this.bannerList=t.data);case 5:return e.abrupt("return",(this.bannerList.sort(function(){return.5-Math.random()}),Promise.resolve()));case 6:case"end":return e.stop()}},e,this)}))}},{key:"getGrid",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.gridList){e.next=5;break}return e.next=3,o.SDKTools.adList(s.AdType.grid);case 3:(t=e.sent).code||(this.gridList=t.data);case 5:if(n=this.gridList.length,!this.gridList||0===n){e.next=8;break}return e.abrupt("return",(this.gridIdx++,this.gridIdx==n&&(this.gridIdx=0),Promise.resolve(this.gridIdx)));case 8:case"end":return e.stop()}},e,this)}))}},{key:"onDrawGame",value:function(e){var t=this.drawList[e];t&&this.navigateToMiniProgram(t,i.draw)}},{key:"onBannerGame",value:function(e){var t=this.bannerList[e];t&&this.navigateToMiniProgram(t,i.guessLike)}},{key:"onGridGame",value:function(e){var t=this.gridList[e];t&&this.navigateToMiniProgram(t,i.grid)}},{key:"navigateToMiniProgram",value:function(e,t){e.id,e.appid,e.path;var n=e.game;r.Analytics.I.dot("jump_appid",{from:"".concat(n)}),o.SDKTools.navigateToMiniProgram(e,t).then(function(e){console.log("navigateToMiniProgram\u6210\u529f",e)}).catch(function(e){console.log("navigateToMiniProgram\u5931\u8d25",e)})}}],[{key:"I",get:function(){return this._instance||(this._instance=new e)}}]),e}();n.default=c,(a=i=n.DrawType||(n.DrawType={}))[a.default=0]="default",a[a.draw=1]="draw",a[a.guessLike=2]="guessLike",a[a.grid=3]="grid",a[a.play=4]="play",cc._RF.pop()},{Analytics:"Analytics",SDKEnum:"SDKEnum",SDKTools:"SDKTools"}],Enum:[function(e,t,n){"use strict";var i;cc._RF.push(t,"17e75cvhzRKf5bAJjAufL4Q","Enum"),Object.defineProperty(n,"__esModule",{value:!0}),n.PropType=n.RewardType=n.LocalKey=n.DOT_TYPE=n.subScribeKey=n.OpenDataKey=void 0,(i=n.OpenDataKey||(n.OpenDataKey={}))[i.INIT="init"]="INIT",i[i.OVER="overRank"]="OVER",i[i.FRIEND="showFriendRank"]="FRIEND",i[i.recommendFriends="recommendFriends"]="recommendFriends",i[i.HIDE="hide"]="HIDE",i[i.OPEN_PASS="passRank"]="OPEN_PASS",i[i.UPDATE_PASS="updatePass"]="UPDATE_PASS",(n.subScribeKey||(n.subScribeKey={})).SIGN="z_oYjSHcTzNPwB-so9fk59spQt9Bi5jQEcq7jrqi1ZM",function(e){e.LoadingStart="LoadingStart",e.loadingFinish="loadingFinish"}(n.DOT_TYPE||(n.DOT_TYPE={})),function(e){e.historyData="historyData",e.level_switch_diff="level_switch_diff"}(n.LocalKey||(n.LocalKey={})),function(e){e[e.signIn=0]="signIn",e[e.online=1]="online"}(n.RewardType||(n.RewardType={})),function(e){e[e.xipai=1]="xipai",e[e.pack=2]="pack",e[e.clear=3]="clear"}(n.PropType||(n.PropType={})),cc._RF.pop()},{}],EventManager:[function(e,t,n){"use strict";var i;cc._RF.push(t,"f61dbqb3txMJ4LjNhpWZVpf","EventManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventName=void 0;var a,r=e("ObjectInstance"),o=cc._decorator,s=o.ccclass,c=(o.property,i=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){return _classCallCheck2(this,n),t.apply(this,arguments)}return _createClass2(n,null,[{key:"I",get:function(){return r.default.getInstance(i)}}]),n}(cc.EventTarget));c=i=__decorate([s],c),n.default=c,(a=n.EventName||(n.EventName={})).APP_SHOW="APP_SHOW",a.APP_HIDE="APP_HIDE",a.show_customad2="show_customad2",a.hide_customad2="hide_customad2",a.REFRESH="REFRESH",a.UPDATE_PROP="UPDATE_PROP",a.toggle_banner="toggle_banner",a.REVIVE="REVIVE",a.GAVE_OVER="GAVE_OVER",a.USE_PROP="USE_PROP",a.ONLINE_FUN="ONLINE_FUN",cc._RF.pop()},{ObjectInstance:"ObjectInstance"}],FlowerItem:[function(e,t,n){"use strict";cc._RF.push(t,"c9e290Ua2xIfJNXX7o0mcpa","FlowerItem"),Object.defineProperty(n,"__esModule",{value:!0}),n.FlowerItem=void 0;var i=e("ConfigHelper"),a=e("GameData"),r=e("utils"),o=e("Const"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).txtName=null,e.txtName2=null,e.starts=null,e.mask=null,e.icon=null,e}return _createClass2(n,[{key:"updateView",value:function(e){if(e>=o.default.MAX_FLOWER)this.node.active=!1;else{this.node.active=!0;var t=i.default.getFlower(e);this.txtName.string=this.txtName2.string=t.name,this.starts.children.forEach(function(e,n){e.active=n<t.level}),e<a.GameData.data.level?(this.txtName2.string="",this.mask.active=!1,__awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.utils.loadCndFlowerSprite(e+1);case 2:this.icon.spriteFrame=t.sent;case 3:case"end":return t.stop()}},t,this)}))):(this.txtName.string="",this.icon.spriteFrame=null,this.mask.active=!0)}}}]),n}(cc.Component);__decorate([u(cc.Label)],l.prototype,"txtName",void 0),__decorate([u(cc.Label)],l.prototype,"txtName2",void 0),__decorate([u(cc.Node)],l.prototype,"starts",void 0),__decorate([u(cc.Node)],l.prototype,"mask",void 0),__decorate([u(cc.Sprite)],l.prototype,"icon",void 0),l=__decorate([c],l),n.FlowerItem=l,cc._RF.pop()},{ConfigHelper:"ConfigHelper",Const:"Const",GameData:"GameData",utils:"utils"}],FlowerPanel:[function(e,t,n){"use strict";cc._RF.push(t,"feca6WKTBRA1KsSsNfAN6UW","FlowerPanel"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("GameData"),a=e("utils"),r=e("List"),o=e("Panel"),s=e("Const"),c=e("FlowerItem"),u=e("Analytics"),l=cc._decorator,d=l.ccclass,h=l.property,f=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).scrollView=null,e.txtProgess=null,e.imgProgess=null,e}return _createClass2(n,[{key:"onLoad",value:function(){console.log("onLoad",this.scrollView.node.height);var e=cc.view.getFrameSize().height/cc.view.getFrameSize().width>1.8,t=750/cc.view.getFrameSize().width*cc.view.getFrameSize().height;this.scrollView.node.height=e?t-1334+1100-142-0:1100}},{key:"init",value:function(){this.refreshView()}},{key:"refreshView",value:function(){var e=this;a.utils.wait(.1).then(function(){e.scrollView.numItems=s.default.MAX_FLOWER+2});var t=(i.GameData.data.level+1)/s.default.MAX_FLOWER;this.imgProgess.node.width=690*t,this.txtProgess.string="".concat(Math.floor(100*t),"%")}},{key:"onRander",value:function(e,t){e.getComponent(c.FlowerItem).updateView(t)}},{key:"onClick",value:function(e,t){switch(u.Analytics.I.dot("Button",{from:"flower_".concat(t)}),t){case"close":this.close()}}}]),n}(o.default);__decorate([h(r.default)],f.prototype,"scrollView",void 0),__decorate([h(cc.Label)],f.prototype,"txtProgess",void 0),__decorate([h(cc.Sprite)],f.prototype,"imgProgess",void 0),f=__decorate([d],f),n.default=f,cc._RF.pop()},{Analytics:"Analytics",Const:"Const",FlowerItem:"FlowerItem",GameData:"GameData",List:"List",Panel:"Panel",utils:"utils"}],Flowerpots:[function(e,t,n){"use strict";cc._RF.push(t,"f3afe/Ub5hB1YdAaCTzUZM1","Flowerpots"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("AudioManager"),a=e("utils"),r=e("Flowerpot"),o=cc._decorator,s=o.ccclass,c=o.property,u=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).flowerpotPre=null,e.flowerpots=[],e.unlockCount=2,e.groupIds=[],e.maxGroupCount=0,e.nowGroupCount=0,e.isAnim=!1,e}return _createClass2(n,[{key:"onLoad",value:function(){this.node.destroyAllChildren(),this.flowerpots=[];for(var e=0;e<4;e++){var t=cc.instantiate(this.flowerpotPre);t.parent=this.node,t.setPosition(50+170*e,0);var n=t.getComponent(r.default);n.init(this,e),this.flowerpots.push(n)}}},{key:"init",value:function(e){this.grid=e}},{key:"refresh",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){var n,i,r=this;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.maxGroupCount=e.length,this.nowGroupCount=0,this.grid.refreshProgress(),this.groupIds=e,t.next=6,a.utils.until(function(){return 4==r.flowerpots.length});case 6:for(n=0;n<this.flowerpots.length;n++)n<this.unlockCount?this.groupIds.length>0?(i=this.groupIds.pop(),this.flowerpots[n].refresh(i)):this.flowerpots[n].hide():this.flowerpots[n].locked();case 7:case"end":return t.stop()}},t,this)}))}},{key:"addGroup",value:function(){var e=this.unlockCount;if(this.unlockCount++,this.groupIds.length>0){var t=this.groupIds.pop();this.flowerpots[e].refresh(t),this.refreshCollection(e,t)}else this.flowerpots[e].hide()}},{key:"refreshGroup",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){var n,r,o,s,c,u,l=this;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.isAnim=!0,n=!1,(r=this.flowerpots[e]).hcSp.node.active=!0,r.hcSp.setAnimation(0,"enter",!1),cc.tween(r.node).to(.1,{scale:1.2}).delay(.2).to(.2,{scale:0}).call(function(){n=!0}).start(),t.next=7,a.utils.until(function(){return n});case 7:return o=r.flowerId,r.reset(),s=this.grid.animNode.convertToNodeSpaceAR(r.node.parent.convertToWorldSpaceAR(r.node.getPosition())),(c=this.grid.createParPre()).parent=this.grid.animNode,c.setPosition(s),cc.resources.load("images/"+o,cc.SpriteFrame,function(e,t){c.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=t}),cc.resources.load("images/hb_"+o,cc.SpriteFrame,function(e,t){c.getChildByName("par").getComponent(cc.ParticleSystem).spriteFrame=t}),c.getChildByName("par").getComponent(cc.ParticleSystem).resetSystem(),c.scale=.5,cc.tween(c).to(.5,{x:0,y:0,scale:.3}).call(function(){i.default.play(i.AudioType.pot1),a.utils.wait(1).then(function(){l.grid.flyPool.put(c)})}).start(),t.next=19,a.utils.wait(200);case 19:if(this.nowGroupCount++,this.grid.refreshProgress(),this.isAnim=!1,!(this.groupIds.length>0)){t.next=28;break}return u=this.groupIds.pop(),this.flowerpots[e].refresh(u),t.next=27,a.utils.wait(200);case 27:this.refreshCollection(e,u);case 28:return t.next=30,a.utils.wait(1);case 30:this.grid.collection.checkDel();case 31:case"end":return t.stop()}},t,this)}))}},{key:"checkEnd",value:function(){return this.nowGroupCount==this.maxGroupCount}},{key:"refreshCollection",value:function(e,t){for(var n=0;n<this.grid.collection.tiles.length;n++){var i=this.grid.collection.tiles[n];i.value==t&&this.flowerpots[e].count<3&&(this.flowerpots[e].addTile(i),this.grid.collection.clearTile(i),n--)}}},{key:"addTile",value:function(e){for(var t=-1,n=0,i=0;i<this.unlockCount;i++){var a=this.flowerpots[i].count;this.flowerpots[i].node.active&&a<3&&this.flowerpots[i].flowerId==e.value&&(-1==t?(t=i,n=a):a>n&&(t=i,n=a))}return t>-1&&(this.flowerpots[t].addTile(e),!0)}},{key:"reset",value:function(){var e=this;this.unlockCount=2,this.flowerpots.forEach(function(t,n){t.reset(),n>=e.unlockCount&&(t.node.active=!0,t.locked())})}},{key:"clearFlowerId",value:function(e){this.nowGroupCount++,this.grid.refreshProgress();for(var t=this.groupIds.length-1;t>=0;t--)if(this.groupIds[t]==e){this.groupIds.splice(t,1);break}}}]),n}(cc.Component);__decorate([c(cc.Prefab)],u.prototype,"flowerpotPre",void 0),u=__decorate([s],u),n.default=u,cc._RF.pop()},{AudioManager:"AudioManager",Flowerpot:"Flowerpot",utils:"utils"}],Flowerpot:[function(e,t,n){"use strict";cc._RF.push(t,"5837fZLOw1A4pIUGcJKsPlk","Flowerpot"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("AudioManager"),a=e("Analytics"),r=e("shareTools"),o=cc._decorator,s=o.ccclass,c=o.property,u=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).FlowerpotIcon=null,e.nodes=[],e.FlowerIcon=null,e.lock=null,e.par=null,e.hcSp=null,e.flowerId=0,e.count=0,e.flowerpots=null,e.isMove=!1,e}return _createClass2(n,[{key:"init",value:function(e,t){this.flowerpots=e,this.index=t}},{key:"refresh",value:function(e){this.flowerId=e,this.node.active=!0,this.node.scale=0,this.unlocked(),__awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){var n=this;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:cc.resources.load("images/"+e,cc.SpriteFrame,function(e,t){n.FlowerIcon.spriteFrame=t});case 1:case"end":return t.stop()}},t)})),this.FlowerpotIcon.active=!0,this.par.active=!0,this.hcSp.node.active=!1,cc.tween(this.node).to(.2,{scale:1}).call(function(){}).start()}},{key:"onVideo",value:function(){var e=this;a.Analytics.I.dot("prop_add_pots"),r.ShareTools.share(r.ShareKey.add_pots,{success:function(){e.flowerpots.addGroup()}})}},{key:"locked",value:function(){this.node.scale=1,this.lock.active=!0,this.FlowerIcon.spriteFrame=null,this.FlowerpotIcon.active=!1,this.par.active=!1}},{key:"unlocked",value:function(){this.lock.active=!1}},{key:"hide",value:function(){this.node.active=!1}},{key:"reset",value:function(){this.count=0,this.isMove=!1,this.clearTiles(),this.hide()}},{key:"clearTiles",value:function(){for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e].children[0];t&&this.flowerpots.grid.tilePool.put(t)}}},{key:"addTile",value:function(e){var t=this,n=this.nodes[this.count].convertToNodeSpaceAR(e.node.parent.convertToWorldSpaceAR(e.node.getPosition()));e.node.parent=this.nodes[this.count],e.node.x=n.x,e.node.y=n.y,e.flowerPot(),this.count++;var a=3==this.count;cc.Tween.stopAllByTarget(e.node),e.node.angle=0,e.par.active=!0,e.par.getComponent(cc.ParticleSystem).resetSystem(),this.isMove=!0,cc.tween(e.node).to(.3,{x:0,y:0,angle:360,scale:.9}).call(function(){t.isMove=!1,e.par.active=!1,i.default.play(i.AudioType.pot),a&&(i.default.play(i.AudioType.pot2),t.flowerpots.refreshGroup(t.index))}).start()}}]),n}(cc.Component);__decorate([c(cc.Node)],u.prototype,"FlowerpotIcon",void 0),__decorate([c(cc.Node)],u.prototype,"nodes",void 0),__decorate([c(cc.Sprite)],u.prototype,"FlowerIcon",void 0),__decorate([c(cc.Node)],u.prototype,"lock",void 0),__decorate([c(cc.Node)],u.prototype,"par",void 0),__decorate([c(sp.Skeleton)],u.prototype,"hcSp",void 0),u=__decorate([s],u),n.default=u,cc._RF.pop()},{Analytics:"Analytics",AudioManager:"AudioManager",shareTools:"shareTools"}],GGPanel:[function(e,t,n){"use strict";cc._RF.push(t,"3c00cm0PBJOZp0jHS5Tag3x","GGPanel"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("AudioManager"),a=e("Panel"),r=e("shareTools"),o=cc._decorator,s=o.ccclass,c=o.property,u=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).txtDesc=null,e}return _createClass2(n,[{key:"init",value:function(e,t){i.default.play(i.AudioType.fuhuo),this.callback=e,this.txtDesc.string=1==t?"Resurrect and unlock a planter":"Resurrecting and emptying /nflowers from the lattice area"}},{key:"onClick",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var n=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="revive"===e.t0?3:"close"===e.t0?5:6;break;case 3:return r.ShareTools.share(r.ShareKey.fuhuo,{success:function(){n.callback&&n.callback(!0),n.close()}}),e.abrupt("break",6);case 5:this.callback&&this.callback(!1),this.close();case 6:case"end":return e.stop()}},e,this)}))}}]),n}(a.default);__decorate([c(cc.Label)],u.prototype,"txtDesc",void 0),u=__decorate([s],u),n.default=u,cc._RF.pop()},{AudioManager:"AudioManager",Panel:"Panel",shareTools:"shareTools"}],GameDataBase:[function(e,t,n){"use strict";cc._RF.push(t,"dfbb6SgUqBMJI63G4yuW1Dc","GameDataBase"),Object.defineProperty(n,"__esModule",{value:!0}),n.localfield=n.serverfield=void 0;var i=e("SDKTools"),a=[],r={},o=[],s={};function c(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){o.push(n),a.push(n),e&&(s[n]=0)}}n.serverfield=function(e){return function(t,n){cc.sys.platform===cc.sys.WECHAT_GAME?r[e]=n:o.push(n),a.push(n)}},n.localfield=c;var u=function(){function e(){_classCallCheck2(this,e),this.lastTime=1358410009}return _createClass2(e,null,[{key:"localkeys",get:function(){return a}},{key:"createInstance",value:function(){return new this}},{key:"load",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n,r,o,c,u,l,d=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t in null==this._instance&&(this._instance=this.createInstance()),a.forEach(function(e){null==d._instance[e]&&d._instance.constructor&&cc.warn(d.name+"."+e+" \u6ca1\u6709\u914d\u7f6e\u521d\u59cb\u503c")}),s)s[t]=this._instance[t];if(n={},r=function(){var e=cc.sys.localStorage.getItem(d.LOCAL_DATA_KEY);e&&(n=JSON.parse(e))},cc.sys.platform!==cc.sys.WECHAT_GAME){e.next=18;break}return e.prev=4,e.next=7,i.SDKTools.getData(this.LOCAL_DATA_KEY);case 7:(o=e.sent)&&o.data||r(),""==(c=o.data.content)?r():(n=JSON.parse(c),(u=cc.sys.localStorage.getItem(this.LOCAL_DATA_KEY))?(l=JSON.parse(u)).logoutTime&&+l.logoutTime>+n.logoutTime?(n=l,console.log("\u4f7f\u7528\u4e86\u672c\u5730\u7684\u6570\u636e")):console.log("\u672a\u4f7f\u7528\u4e86\u672c\u5730\u7684\u6570\u636e"):console.log("\u672a\u4f7f\u7528\u4e86\u672c\u5730\u7684\u6570\u636e2")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log("\u51fa\u5565\u9519\u4e86",e.t0),r();case 16:e.next=19;break;case 18:r();case 19:return e.abrupt("return",(this.localkeys.forEach(function(e){n.hasOwnProperty(e)&&(d._instance[e]=n[e])}),this.updateToday(),console.log("\u6bcf\u65e5\u91cd\u7f6e",s),{code:0}));case 20:case"end":return e.stop()}},e,this,[[4,13]])}))}},{key:"updateToday",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n,i,a,r=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Date,!this._instance.lastTime){e.next=10;break}if(n=new Date(1e3*this._instance.lastTime),e.t0=t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate(),e.t0){e.next=8;break}return console.log("\u91cd\u7f6e\u65e5\u671f1:"+n,t),e.next=8,this.onResetDay();case 8:e.next=11;break;case 10:this._instance.lastTime=Math.floor(Date.now()/1e3),console.log("\u8bbe\u7f6e\u65e5\u671f:"+this._instance.lastTime);case 11:(i=new Date).setHours(23,59,60),a=i.getTime()-t.getTime()+1e3,console.log("\u542f\u52a8\u96f6\u70b9\u4f5c\u4e1a\uff1a"+i+", "+(a/1e3).toFixed()+"\u79d2\u540e\u6267\u884c\uff1aonResetDay"),setTimeout(function(){console.log("\u6267\u884c\u96f6\u70b9\u4f5c\u4e1a\uff1a\u5f53\u524d\u65f6\u95f4="+i),r._instance.lastTime=Math.floor(Date.now()/1e3),r.onResetDay()},a);case 15:case"end":return e.stop()}},e,this)}))}},{key:"onResetDay",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t in console.log("\u6bcf\u65e5\u91cd\u7f6e"),this._instance.lastTime=Math.floor(Date.now()/1e3),s)s.hasOwnProperty(t)&&(n=s[t],this._instance[t]=n);case 2:case"end":return e.stop()}},e,this)}))}},{key:"save",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._instance.guide2){e.next=2;break}return e.abrupt("return");case 2:t={},this.localkeys.forEach(function(e){n._instance.hasOwnProperty(e)&&(t[e]=n._instance[e])}),cc.sys.localStorage.setItem(this.LOCAL_DATA_KEY,JSON.stringify(t)),i.SDKTools.saveData(this.LOCAL_DATA_KEY,JSON.stringify(t));case 4:case"end":return e.stop()}},e,this)}))}}]),e}();u._instance=null,u.LOCAL_DATA_KEY="flower_tile",__decorate([c()],u.prototype,"lastTime",void 0),n.default=u,cc._RF.pop()},{SDKTools:"SDKTools"}],GameData:[function(e,t,n){"use strict";cc._RF.push(t,"33e1412g21IgJhv8vBSCuuo","GameData"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameData=void 0;var i=e("GameDataBase"),a=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).logoutTime=Date.now(),e.guide2=!1,e.mute=!1,e.shock=!1,e.level=0,e}return _createClass2(n,[{key:"clear",value:function(){this.level=0,this.guide2=!1,n.save()}}],[{key:"data",get:function(){return this._instance}},{key:"load",value:function(){var e=this,t=Object.create(null,{load:{get:function(){return _get2(_getPrototypeOf2(n),"load",e)}}});return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var i;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.load.call(this);case 2:return i=e.sent,e.abrupt("return",(cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u9000\u51fa\u6e38\u620f"),n.data.logoutTime=Date.now(),n.save()},this),i));case 4:case"end":return e.stop()}},e,this)}))}}]),n}(i.default);__decorate([i.localfield()],a.prototype,"logoutTime",void 0),__decorate([i.localfield()],a.prototype,"guide2",void 0),__decorate([i.localfield()],a.prototype,"mute",void 0),__decorate([i.localfield()],a.prototype,"shock",void 0),__decorate([i.localfield()],a.prototype,"level",void 0),n.GameData=a,cc._RF.pop()},{GameDataBase:"GameDataBase"}],GameScene:[function(e,t,n){"use strict";cc._RF.push(t,"79d96W/BZpHnq8a7C8ez/Sh","GameScene"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("AudioManager"),a=e("GameData"),r=e("WxHelper"),o=e("EventManager"),s=e("UIManager"),c=e("Analytics"),u=e("SDKTools"),l=e("shareTools"),d=e("Grid"),h=e("PotItem"),f=cc._decorator,p=f.ccclass,v=f.property,_=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).home=null,e.txtTips=null,e.Grid=null,e.uid=null,e.flowerList=null,e.rewardTime=0,e.page=0,e.oldLevel=0,e}return _createClass2(n,[{key:"onLoad",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.Grid.init(this),this.addEvent(),this.home.active=!0,this.refreshFlower(),i.default.play(i.AudioType.bgm,!0);case 1:case"end":return e.stop()}},e,this)}))}},{key:"onEnable",value:function(){}},{key:"addEvent",value:function(){r.WxHelper.onShow(this.onShow.bind(this)),r.WxHelper.onHide(this.onHide.bind(this)),o.default.I.on(o.EventName.ONLINE_FUN,this.onlineFun,this)}},{key:"onlineFun",value:function(){var e=u.SDKTools.getParamsString("onlineTime","30,60,90,120").split(",").map(Number),t=e[Math.min(this.rewardTime,e.length-1)];this.scheduleOnce(this.onlineTime.bind(this),t)}},{key:"onlineTime",value:function(){this.rewardTime++}},{key:"onDestroy",value:function(){}},{key:"onShow",value:function(){l.ShareTools.onShowAd?l.ShareTools.onShowAd=!1:1==u.SDKTools.getParamsInt("is_interstitialAd",0)?u.SDKTools.createInterstitialAd():u.SDKTools.isnew||u.SDKTools.createInterstitialAd()}},{key:"onHide",value:function(){}},{key:"onClick",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var n;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=(c.Analytics.I.dot("Button",{from:"Game_".concat(t)}),t),e.next="setting"===e.t0?3:"start"===e.t0?8:"share"===e.t0?10:"flower"===e.t0?12:"left"===e.t0?14:"right"===e.t0?16:17;break;case 3:return e.next=5,s.default.waitOpenPanel(s.PanelType.setting,this.home.active?0:1);case 5:return 1==(n=e.sent)?this.goHome():2==n&&this.Grid.newGame(),e.abrupt("break",17);case 8:return c.Analytics.I.dot("game_start"),this.home.active=!1,this.Grid.newGame(!0),e.abrupt("break",17);case 10:return l.ShareTools.pureShare(l.ShareKey.home),e.abrupt("break",17);case 12:return s.default.openPanel(s.PanelType.FlowerPanel),e.abrupt("break",17);case 14:return this.page>1&&(this.page--,this.refreshFlower()),e.abrupt("break",17);case 16:this.page<Math.ceil((a.GameData.data.level+1)/9)&&(this.page++,this.refreshFlower());case 17:case"end":return e.stop()}},e,this)}))}},{key:"refreshFlower",value:function(){var e=this;this.page||(this.page=Math.ceil((a.GameData.data.level+1)/9)),this.oldLevel=a.GameData.data.level;var t=9,n=a.GameData.data.level+1;n<9*this.page&&(t=n%9),console.log(t,this.page),this.flowerList.children.forEach(function(n,i){i<t?(n.getComponent(h.PotItem).updateView(e,9*(e.page-1)+i),n.active=!0):n.active=!1})}},{key:"useProp",value:function(e,t){this.Grid.useProp(t)}},{key:"goHome",value:function(){this.home.active=!0,this.oldLevel!=a.GameData.data.level&&(this.page=0,this.refreshFlower())}}]),n}(cc.Component);__decorate([v(cc.Node)],_.prototype,"home",void 0),__decorate([v(cc.Node)],_.prototype,"txtTips",void 0),__decorate([v(d.default)],_.prototype,"Grid",void 0),__decorate([v(cc.Label)],_.prototype,"uid",void 0),__decorate([v(cc.Node)],_.prototype,"flowerList",void 0),_=__decorate([p],_),n.default=_,cc._RF.pop()},{Analytics:"Analytics",AudioManager:"AudioManager",EventManager:"EventManager",GameData:"GameData",Grid:"Grid",PotItem:"PotItem",SDKTools:"SDKTools",UIManager:"UIManager",WxHelper:"WxHelper",shareTools:"shareTools"}],GameService:[function(e,t,n){"use strict";cc._RF.push(t,"d0dc5es7w1A+qJ+aSKg5f9Y","GameService"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("DataService"),a=e("SDKApi"),r=e("SDKConst"),o=e("WxLogin"),s=e("WxApi"),c=e("WxPay"),u=e("WxSystem"),l=e("DouyinPay"),d=e("QQPay"),h=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"env",value:function(){return new Promise(function(e,t){a.SDKApi.Version().then(function(t){if(t){r.__LOG__&&console.log("\u7248\u672c\u4fe1\u606f",t);var n=t.data&&t.data.env?t.data.env:2;i.default.I.setEnvEnum(+n)}e(t)}).catch(function(e){t(e)})})}},{key:"login",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.I.login(e)}},{key:"saveData",value:function(e,t){return a.SDKApi.saveData({key:e,content:t,uid:i.default.I.UserId,token:i.default.I.Token})}},{key:"getData",value:function(e){return a.SDKApi.getData({key:e,uid:i.default.I.UserId,token:i.default.I.Token})}},{key:"rankAdd",value:function(e,t){return a.SDKApi.rankAdd({typ:e,fraction:t,uid:i.default.I.UserId,token:i.default.I.Token})}},{key:"rankList",value:function(e,t,n){return a.SDKApi.rankList({typ:e,t:t,rankdata:n?1:0,uid:i.default.I.UserId,token:i.default.I.Token})}},{key:"totalrankAdd",value:function(e,t,n,r){return a.SDKApi.totalrankAdd({typ:e,sort:r,t:n,fraction:t,uid:i.default.I.UserId,token:i.default.I.Token})}},{key:"totalrankList",value:function(e,t,n,r){return a.SDKApi.totalrankList({typ:e,t:t,sort:r,rankdata:n?1:0,uid:i.default.I.UserId,token:i.default.I.Token})}},{key:"adList",value:function(e){return a.SDKApi.adList({adtyp:e,uid:i.default.I.UserId,token:i.default.I.Token})}},{key:"wxencrypted",value:function(e,t){return a.SDKApi.wxencrypted({iv:e,encryptedData:t,openid:i.default.I.OpenId,token:i.default.I.Token,uid:i.default.I.UserId})}},{key:"subScribe",value:function(e,t){return new Promise(function(n,r){s.default.I.subscribeMessage(e).then(function(o){if(o=o||{},e.filter(function(e){return o[e]&&"accept"===o[e]}).length){var s=+i.default.I.UserId,c=i.default.I.Token+"",u=i.default.I.OpenId+"",l=t;a.SDKApi.subscribe({uid:s,token:c,openid:u,status:1,id:l}),n({code:0,msg:"\u8ba2\u9605\u6210\u529f\uff01"})}else r({errCode:0,errMsg:"\u70b9\u51fb\u53d6\u6d88\u8ba2\u9605"})}).catch(function(e){return r(e)})})}},{key:"pay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cc.sys.platform===cc.sys.BYTEDANCE_GAME?l.default.I.pay(e,t):"undefined"!=typeof qq?(console.log("QQ\u652f\u4ed8"),d.default.I.pay(e,t)):c.default.I.pay(e,t)}},{key:"orderQuery",value:function(e){return a.SDKApi.orderQuery(Object.assign(Object.assign({},this.buildParams()),{source:e}))}},{key:"preorder",value:function(e,t){return a.SDKApi.preorder(Object.assign(Object.assign({},this.buildParams2()),{token:i.default.I.Token,goodid:e,orderid:t}))}},{key:"goodslist",value:function(){return a.SDKApi.goodslist()}},{key:"checkmsg",value:function(e,t,n,o,s){var c=r.GAMEDATA.game_id,u=i.default.I.UserId,l=i.default.I.Token,d=i.default.I.OpenId;return a.SDKApi.checkmsg({gameid:c,uid:u,token:l,openid:d,scene:e,content:t,nickname:n,title:o,signature:s})}},{key:"updateNickname",value:function(e,t){var n=r.GAMEDATA.game_id,o=i.default.I.UserId,s=i.default.I.Token,c=r.SDKVersion;return a.SDKApi.updateNickname({gameid:n,uid:o,token:s,pkv:c,nickname:e,headurl:t})}},{key:"buildParams2",value:function(){return{gameid:r.GAMEDATA.game_id,channel:i.default.I.ChannelId,brand:u.default.I.brand,model:u.default.I.model,version:u.default.I.version,system:u.default.I.system,platform:u.default.I.platform,sdkversion:u.default.I.SDKVersion,scene:i.default.I.Scene+"",uid:i.default.I.UserId,env:1===i.default.I.EnvEnum?"pre":"prod",openid:i.default.I.OpenId}}},{key:"behavior",value:function(){var e=r.GAMEDATA.game_id,t=i.default.I.UserId,n=i.default.I.Token,o=i.default.I.OpenId;return a.SDKApi.behavior({openid:o,gameid:e,uid:t,token:n})}},{key:"buildParams",value:function(){return{gameid:r.GAMEDATA.game_id,channel:i.default.I.ChannelId,uid:i.default.I.UserId,token:i.default.I.Token,logindays:i.default.I.logindays}}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=h,cc._RF.pop()},{DataService:"DataService",DouyinPay:"DouyinPay",QQPay:"QQPay",SDKApi:"SDKApi",SDKConst:"SDKConst",WxApi:"WxApi",WxLogin:"WxLogin",WxPay:"WxPay",WxSystem:"WxSystem"}],Grid:[function(e,t,n){"use strict";cc._RF.push(t,"c3fa5oNTnBPM5s9FVpcmn//","Grid"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("AudioManager"),a=e("ConfigHelper"),r=e("Enum"),o=e("GameData"),s=e("WxHelper"),c=e("utils"),u=e("UIManager"),l=e("Analytics"),d=e("SDKTools"),h=e("shareTools"),f=e("Collection"),p=e("Const"),v=e("Flowerpots"),_=e("Guide"),y=e("ProgessItem"),g=e("Tile"),m=cc._decorator,k=m.ccclass,S=m.property,w=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).tilePre=null,e.flyPre=null,e.txtLevel=null,e.collection=null,e.flowerpots=null,e.FlowerIcon=null,e.imgProgess=null,e.txtProgess=null,e.animNode=null,e.adNode=[],e.progessLevel=null,e.guide=null,e.isGuide=!1,e.tiles=[],e.level=1,e.levelDiff=2,e.isShenshou=!1,e.touchCount=0,e.no_repeatArray=function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t},e}return _createClass2(n,[{key:"onLoad",value:function(){this.tilePool||(this.tilePool=new cc.NodePool);for(var e=0;e<50;e++)this.tilePool.put(cc.instantiate(this.tilePre));this.flyPool=new cc.NodePool;for(var t=0;t<10;t++)this.flyPool.put(cc.instantiate(this.flyPre))}},{key:"init",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.game=e,this.level=o.GameData.data.level,this.collection.init(this),this.flowerpots.init(this);case 1:case"end":return t.stop()}},t,this)}))}},{key:"reset",value:function(){var e=this;this.tiles.length>0&&this.tiles.forEach(function(t){cc.Tween.stopAllByTarget(t.node),e.tilePool.put(t.node)}),this.tiles=[],this.collection.reset(),this.flowerpots.reset(),this.adNode.forEach(function(e){e.active=!1})}},{key:"onTouch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(this.collection.isGG||this.collection.tiles.length>=6)){if(t&&i.default.play(i.AudioType.btn2),o.GameData.data.shock||s.WxHelper.vibrateShort(),e.state===g.TileState.GRID){if(this.flowerpots.addTile(e))this.clearTile(e);else{var n=this.collection.node.convertToNodeSpaceAR(e.node.parent.convertToWorldSpaceAR(e.node.getPosition())),a=c.utils.getTrueScale(this.node);e.node.parent=this.collection.node,e.node.scale=a,e.node.x=n.x,e.node.y=n.y,cc.Tween.stopAllByTarget(e.node),this.clearTile(e),this.collection.addTile(e)}this.isGuide&&this.guide.guide_step>1&&this.guide.guide_step<5&&this.guide.nextGuide()}this.isShenshou&&(this.isShenshou=!1,this.doUsable())}}},{key:"polarToCartesian",value:function(e,t){return{x:e*Math.cos(t),y:e*Math.sin(t)}}},{key:"initData",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n,i,r,s,u,h,f,v,_,y,m,k,S,w,I,D,b,T=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.node.destroyAllChildren(),this.level>=p.default.MAX_FLOWER&&(this.level=c.utils.random(10,p.default.MAX_FLOWER-1)),this.gameTime=Date.now(),d.SDKTools.isnew?l.Analytics.I.levelStart("2."+this.level,"\u7b2c".concat(this.level,"\u5173"),"\u65b0\u7528\u6237"):l.Analytics.I.levelStart("1."+this.level,"\u7b2c".concat(this.level,"\u5173"),"\u8001\u7528\u6237"),e.next=3,a.default.getLevel(this.level);case 3:for(t=e.sent,n=a.default.getDiff(this.level),t.length%3!=0&&(i=t.length%3,t.splice(0,i),console.error("\u5730\u56fe\u4f4d\u70b9\u4e0d\u662f3\u7684\u500d\u6570")),r=[],r=n.typeCount==n.typeIDList.length?c.utils.clone(n.typeIDList):c.utils.randN(1,15,n.typeCount),s=c.utils.clone(n.percent),u=0,h=0;h<s.length;h++)f=s[h],v=f[0]*t.length,u+=v-=v%3,_=f[1]*t.length,s[h][0]=v,s[h][1]=_;if(!(u<t.length)){e.next=21;break}y=t.length-u,m=0;case 13:if(!(m<s.length)){e.next=21;break}if(y>=3){e.next=17;break}return y>0&&console.error("\u51fa\u9519"),e.abrupt("break",21);case 17:s[m][0]+=3,y-=3;case 18:m++,e.next=13;break;case 21:for(k=this.getIdsByPercent(s,t.length,r),S=(S=this.getGroupIds(k)).reverse(),this.flowerpots.refresh(S),k.length!=t.length&&console.error("\u51fa\u9519"),this.tiles=[],k=k.reverse(),w=0;w<t.length;w++)I=t[w],D=this.createTilePre(),b=D.getComponent(g.default),this.node.addChild(D),D.x=I.x,D.y=-I.y,b.init(k[w],this.onTouch.bind(this),this),this.tiles.push(b);this.doCollEctionUsable(),__awaiter(T,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.utils.loadCndFlowerSprite(this.level+1);case 2:this.imgProgess.spriteFrame=this.FlowerIcon.spriteFrame=e.sent;case 3:case"end":return e.stop()}},e,this)})),this.refreshLevel(),o.GameData.data.guide2||(0==this.level?(this.isGuide=!0,o.GameData.data.guide2=!0,this.guide.init(this)):o.GameData.data.guide2=!0);case 25:case"end":return e.stop()}},e,this)}))}},{key:"getIdsByPercent",value:function(e,t,n){e=c.utils.clone(e);var i=[],a=[],r=function(){for(var t=i.length,r=e.length,o=0;o<r;o++){var s=e[o];if(s&&t>=s[1]){for(var c=0;c<s[0];c++)a.push(n[o]);e[o]=null}}};r();for(var o=0;o<t;o++)if(0===a.length)console.error("\u914d\u7f6e\u9519\u8bef");else if(a.length>0){var s=Math.floor(Math.random()*a.length),u=a[s];a.splice(s,1),i.push(u),r()}else console.error("\u5730\u56fe\u9519\u8bef");return i}},{key:"getGroupIds",value:function(e){var t=a.default.getDiff(this.level).targetBirth;e=c.utils.clone(e);var n=[],i=10,r=0,o=e.length/3,s=function(){for(var e=0;e<t.length;e++){var n=t[e];r>=Math.floor(n[1]*o)&&(i=n[0])}};s();for(var u=0;u<o;u++){var l=e.length>=i?i:e.length,d=e.splice(0,l),h=this.no_repeatArray(d),f=h[Math.floor(Math.random()*h.length)];n.push(f),e=d.concat(e),r+=3,s();for(var p=0;p<3;p++){var v=e.indexOf(f);-1!=v?e.splice(v,1):console.error("--not find targetID--")}}return n}},{key:"doCollEctionUsable",value:function(){for(var e=function(e,t,n,i){return function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}(e,n)<t+i},t=this.tiles.length,n=0;n<t;n++){var i=this.tiles[n];if(i){var a=i.node.position;i.setUsable(!0);for(var r=n+1;r<t;r++){var o=this.tiles[r];if(o&&e(a,43.12,o.node.position,43.12)){i.setUsable(!1);break}}}}}},{key:"unCollEctionUsable",value:function(){}},{key:"isRectanglesIntersect",value:function(e,t){var n=e.x,i=e.endX,a=e.y,r=e.endY,o=t.x,s=t.endX,c=t.y,u=t.endY;return!(i<o||n>s||r<c||a>u)}},{key:"isIntersection",value:function(e,t){var n=[Math.max(e.x,t.x),Math.max(e.y,t.y)],i=[Math.min(e.endX-1,t.endX-1),Math.min(e.endY-1,t.endY-1)];return n[0]<=i[0]&&n[1]<=i[1]}},{key:"checkTile",value:function(e,t,n){for(var i=this.tiles.length,a=this.tiles[e]["".concat(t,",").concat(n)],r=e+1;r<i;r++){var o=this.tiles[r];for(var s in o){var c=o[s];if(this.isIntersection(a,c))return!1}}return!0}},{key:"getTile",value:function(e,t,n){return this.tiles[e]&&this.tiles[e]["".concat(t,",").concat(n)]}},{key:"getIdiomsByStr",value:function(e){for(var t=[],n=0;n<this.idioms.length;n++)this.idioms[n].inFront!=e&&this.idioms[n].behind!=e||t.push(this.idioms[n]);return t}},{key:"clearTile",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c.utils.removeFromList(this.tiles,e),t&&this.doCollEctionUsable()}},{key:"createTilePre",value:function(){return this.tilePool||(this.tilePool=new cc.NodePool),this.tilePool.size()>0?this.tilePool.get():cc.instantiate(this.tilePre)}},{key:"createParPre",value:function(){return this.flyPool.size()>0?this.flyPool.get():cc.instantiate(this.flyPre)}},{key:"useProp",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){var n=this;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=(l.Analytics.I.dot("prop_"+e),+e),t.next=10===t.t0?3:0===t.t0?5:t.t0===r.PropType.xipai?7:t.t0===r.PropType.pack?18:t.t0===r.PropType.clear?29:41;break;case 3:return this.level++,this.reset(),this.initData(),t.abrupt("break",41);case 5:return"undefined"==typeof wx?(this.level++,this.reset(),this.initData()):u.default.openPanel(u.PanelType.FlowerPanel),t.abrupt("break",41);case 7:if(!this.adNode[0].active){t.next=11;break}h.ShareTools.share(h.ShareKey.prop_xipai,{success:function(){n.xipai()}}),t.next=17;break;case 11:return this.adNode[0].active=!0,t.next=14,u.default.waitOpenPanel(u.PanelType.PropPanel,r.PropType.xipai);case 14:if(t.t1=t.sent,!t.t1){t.next=17;break}this.xipai();case 17:return t.abrupt("break",41);case 18:if(!this.adNode[1].active){t.next=22;break}h.ShareTools.share(h.ShareKey.prop_pack,{success:function(){n.pack()}}),t.next=28;break;case 22:return this.adNode[1].active=!0,t.next=25,u.default.waitOpenPanel(u.PanelType.PropPanel,r.PropType.pack);case 25:if(t.t2=t.sent,!t.t2){t.next=28;break}this.pack();case 28:return t.abrupt("break",41);case 29:if(0!=this.collection.tiles.length){t.next=31;break}return t.abrupt("return",void c.utils.tips("unavailable\uff01\uff01"));case 31:if(!this.adNode[2].active){t.next=35;break}h.ShareTools.share(h.ShareKey.prop_clear,{success:function(){n.clear()}}),t.next=41;break;case 35:return this.adNode[2].active=!0,t.next=38,u.default.waitOpenPanel(u.PanelType.PropPanel,r.PropType.clear);case 38:if(t.t3=t.sent,!t.t3){t.next=41;break}this.clear();case 41:case"end":return t.stop()}},t,this)}))}},{key:"xipai",value:function(){var e=this;c.utils.showLoading(800);for(var t=Math.min(this.tiles.length,25),n=[],i=this.tiles.length-1;i>=0&&(n.push(this.tiles[i].value),n.length!=t);i--);n=c.utils.randSortList(n);for(var a=function(t){e.tiles[t].node.angle=0;var i=e.tiles[t].node.x,a=e.tiles[t].node.y;if(n.length<=0)cc.tween(e.tiles[t].node).to(.2,{x:310,y:-310,angle:360,scale:.6}).call(function(){}).to(.2,{x:i,y:a,angle:0,scale:1}).start();else{var r=n.pop();cc.tween(e.tiles[t].node).to(.2,{x:310,y:-310,angle:360,scale:.6}).call(function(){e.tiles[t].setValue(r)}).to(.1+.2*Math.random(),{x:i,y:a,angle:0,scale:1}).start()}},r=this.tiles.length-1;r>=0;r--)a(r)}},{key:"pack",value:function(){c.utils.showLoading(800);for(var e=0,t=0,n=0;n<this.flowerpots.flowerpots.length;n++){var i=this.flowerpots.flowerpots[n];i.count>e?(e=i.count,t=i.flowerId):!t&&i.node.active&&(t=i.flowerId)}for(var a=3-e,r=this.tiles.length-1;r>=0;r--){var o=this.tiles[r];if(o.value==t&&(o.setUsable(!0),this.flowerpots.addTile(o),this.clearTile(o,!1),--a<=0)){this.doCollEctionUsable();break}}}},{key:"clear",value:function(){var e=this;if(this.collection.tiles.length>0){for(var t={},n=function(n){var i=e.collection.tiles[n];i&&(t[i.value]?(t[i.value]++,3==t[i.value]&&(e.flowerpots.clearFlowerId(i.value),t[i.value]=0)):t[i.value]=1,i.clearAnim(function(){e.collection.clearTile(i),e.tilePool.put(i.node)}))},i=this.collection.tiles.length-1;i>=0;i--)n(i);for(var a in t)if(t[a]>0)for(var r=this.tiles.length-1;r>=0;r--){if(3==t[a]){this.flowerpots.clearFlowerId(+a),this.doCollEctionUsable();break}var o=this.tiles[r];o.value==+a&&(this.clearTile(o,!1),this.tilePool.put(o.node),t[a]++)}}else c.utils.tips("unavailable\uff01\uff01")}},{key:"doUsable",value:function(){this.doCollEctionUsable()}},{key:"unUsable",value:function(){this.unCollEctionUsable()}},{key:"tips",value:function(){}},{key:"refreshProgress",value:function(){var e=this.flowerpots.nowGroupCount/this.flowerpots.maxGroupCount;this.imgProgess.fillRange=-(1-e),this.txtProgess.string="".concat(Math.floor(100*e),"%"),this.checkOver()}},{key:"checkGG",value:function(){if(6!=this.collection.tiles.length)return!1;if(this.flowerpots.isAnim)return!1;for(var e=0;e<this.flowerpots.flowerpots.length;e++){var t=this.flowerpots.flowerpots[e];if(t.isMove)return!1;if(t.node.active&&3==t.count)return!1}for(var n=0;n<this.collection.tiles.length;n++)if(this.collection.tiles[n].isMove)return!1;return!0}},{key:"checkOver",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.flowerpots.checkEnd()){e.next=13;break}return o.GameData.data.level<p.default.MAX_FLOWER&&o.GameData.data.level++,this.level=o.GameData.data.level,t=Math.min((Date.now()-this.gameTime)/1e3,300),d.SDKTools.isnew?l.Analytics.I.levelEnd("2."+(this.level-1),"\u7b2c".concat(this.level-1,"\u5173"),"\u65b0\u7528\u6237","complete",t,1):l.Analytics.I.levelEnd("1."+(this.level-1),"\u7b2c".concat(this.level-1,"\u5173"),"\u8001\u7528\u6237","complete",t,1),o.GameData.save(),e.next=7,u.default.waitOpenPanel(u.PanelType.RetPanel,!1,this.level-1);case 7:if(e.t0=e.sent,2!=e.t0){e.next=12;break}this.newGame(),e.next=13;break;case 12:this.game.goHome();case 13:case"end":return e.stop()}},e,this)}))}},{key:"newGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.level=o.GameData.data.level),this.reset(),this.initData()}},{key:"fail",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.flowerpots.nowGroupCount/this.flowerpots.maxGroupCount,n=Math.min((Date.now()-this.gameTime)/1e3,300),d.SDKTools.isnew?l.Analytics.I.levelEnd("2."+this.level,"\u7b2c".concat(this.level,"\u5173"),"\u65b0\u7528\u6237","fail",n,t):l.Analytics.I.levelEnd("1."+this.level,"\u7b2c".concat(this.level,"\u5173"),"\u8001\u7528\u6237","fail",n,t),e.next=4,u.default.waitOpenPanel(u.PanelType.RetPanel,!0,this.level,t);case 4:if(e.t0=e.sent,1!=e.t0){e.next=9;break}this.newGame(),e.next=10;break;case 9:this.game.goHome();case 10:case"end":return e.stop()}},e,this)}))}},{key:"refreshLevel",value:function(){if(o.GameData.data.level>=p.default.MAX_FLOWER)this.progessLevel.active=!1;else{this.progessLevel.active=!0;var e=[],t=1;o.GameData.data.level<3?t=0:o.GameData.data.level>=p.default.MAX_FLOWER?(t=p.default.MAX_FLOWER-5,this.progessLevel.active=!1):t=o.GameData.data.level-2;for(var n=0;n<5;n++)e.push(t+n);this.progessLevel.children.forEach(function(t,n){t.getComponent(y.default).refresh(e[n])})}}}]),n}(cc.Component);__decorate([S(cc.Prefab)],w.prototype,"tilePre",void 0),__decorate([S(cc.Prefab)],w.prototype,"flyPre",void 0),__decorate([S(cc.Label)],w.prototype,"txtLevel",void 0),__decorate([S(f.default)],w.prototype,"collection",void 0),__decorate([S(v.default)],w.prototype,"flowerpots",void 0),__decorate([S(cc.Sprite)],w.prototype,"FlowerIcon",void 0),__decorate([S(cc.Sprite)],w.prototype,"imgProgess",void 0),__decorate([S(cc.Label)],w.prototype,"txtProgess",void 0),__decorate([S(cc.Node)],w.prototype,"animNode",void 0),__decorate([S(cc.Node)],w.prototype,"adNode",void 0),__decorate([S(cc.Node)],w.prototype,"progessLevel",void 0),__decorate([S(_.default)],w.prototype,"guide",void 0),w=__decorate([k],w),n.default=w,cc._RF.pop()},{Analytics:"Analytics",AudioManager:"AudioManager",Collection:"Collection",ConfigHelper:"ConfigHelper",Const:"Const",Enum:"Enum",Flowerpots:"Flowerpots",GameData:"GameData",Guide:"Guide",ProgessItem:"ProgessItem",SDKTools:"SDKTools",Tile:"Tile",UIManager:"UIManager",WxHelper:"WxHelper",shareTools:"shareTools",utils:"utils"}],Guide:[function(e,t,n){"use strict";cc._RF.push(t,"45942u6f/xLyokrtJVH6JL+","Guide"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("utils"),a=cc._decorator,r=a.ccclass,o=a.property,s={1:{desc:"Here is the synthetic target",y:0,x:300},2:{desc:"Click on 3 identical\n flowers to package",y:90,x:0},3:{desc:"Click on 3 identical \nflowers to package",y:90,x:0},4:{desc:"Click on 3 identical\n flowers to package",y:90,x:0},5:{desc:"Each time a pot of flowers is \nsynthesized, the progress will increase.\uff01",y:100,x:-320}},c=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).mask=null,e.hand=null,e.desc=null,e.txtDesc=null,e.btnMask=null,e.guide_step=0,e}return _createClass2(n,[{key:"init",value:function(e){this.grid=e,this.node.active=!0,this.nextGuide()}},{key:"nextGuide",value:function(){switch(this.guide_step++,this.btnMask.active=!1,this.guide_step){case 1:this.btnMask.active=!0;var e=this.grid.game.node.convertToNodeSpaceAR(this.grid.flowerpots.flowerpots[0].node.parent.convertToWorldSpaceAR(this.grid.flowerpots.flowerpots[0].node.getPosition()));this.mask.setPosition(e),this.hand.setPosition(e),this.desc.setPosition(e.x,e.y+s[1].y);break;case 2:case 3:case 4:var t=this.grid.tiles[this.grid.tiles.length-1],n=this.grid.game.node.convertToNodeSpaceAR(t.node.parent.convertToWorldSpaceAR(t.node.getPosition()));this.mask.width=t.icon.node.width,this.mask.height=t.icon.node.height,this.mask.getComponent(cc.Mask).spriteFrame=t.icon.spriteFrame,this.mask.setPosition(n),this.hand.setPosition(n),this.desc.setPosition(n.x,n.y+s[this.guide_step].y);break;case 5:this.btnMask.active=!0;var a=this.grid.game.node.convertToNodeSpaceAR(this.grid.FlowerIcon.node.parent.convertToWorldSpaceAR(this.grid.FlowerIcon.node.getPosition()));this.mask.width=.3*this.grid.FlowerIcon.node.width,this.mask.height=.3*this.grid.FlowerIcon.node.height,this.mask.getComponent(cc.Mask).spriteFrame=this.grid.FlowerIcon.spriteFrame,this.mask.setPosition(a),this.hand.setPosition(a),this.desc.setPosition(a.x,a.y+s[this.guide_step].y);break;case 6:default:this.node.active=!1,i.utils.tips("Beginner's guide complete!")}this.guide_step<6&&(this.desc.setPosition(s[this.guide_step].x,s[this.guide_step].y),this.txtDesc.string=s[this.guide_step].desc)}}]),n}(cc.Component);__decorate([o(cc.Node)],c.prototype,"mask",void 0),__decorate([o(cc.Node)],c.prototype,"hand",void 0),__decorate([o(cc.Node)],c.prototype,"desc",void 0),__decorate([o(cc.Label)],c.prototype,"txtDesc",void 0),__decorate([o(cc.Node)],c.prototype,"btnMask",void 0),c=__decorate([r],c),n.default=c,cc._RF.pop()},{utils:"utils"}],IPhoneXScreen:[function(e,t,n){"use strict";cc._RF.push(t,"05eeflAqyNNgpEDmGAGWwsv","IPhoneXScreen"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,r=i.property,o=i.menu,s=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).height=0,e.width=0,e.offsetTop=0,e.offsetLeft=0,e.offsetRight=0,e.offsetBottom=0,e}return _createClass2(n,[{key:"start",value:function(){var e=this.node.getComponent(cc.Widget);cc.view.getFrameSize().height/cc.view.getFrameSize().width>1.8&&e&&(this.node.height+=this.height,this.node.width+=this.width,e.top+=this.offsetTop,e.left+=this.offsetLeft,e.right+=this.offsetRight,e.bottom+=this.offsetBottom)}}]),n}(cc.Component);__decorate([r({tooltip:"\u5982\u679c\u662fIphoneX\u65f6\u9ad8\u5ea6\u504f\u79fb"})],s.prototype,"height",void 0),__decorate([r({tooltip:"\u5982\u679c\u662fIphoneX\u65f6\u5bbd\u5ea6\u504f\u79fb"})],s.prototype,"width",void 0),__decorate([r({tooltip:"\u5982\u679c\u662fIphoneX\u65f6top\u504f\u79fb"})],s.prototype,"offsetTop",void 0),__decorate([r({tooltip:"\u5982\u679c\u662fIphoneX\u65f6left\u504f\u79fb"})],s.prototype,"offsetLeft",void 0),__decorate([r({tooltip:"\u5982\u679c\u662fIphoneX\u65f6right\u504f\u79fb"})],s.prototype,"offsetRight",void 0),__decorate([r({tooltip:"\u5982\u679c\u662fIphoneX\u65f6bottom\u504f\u79fb"})],s.prototype,"offsetBottom",void 0),s=__decorate([a,o("\u81ea\u5b9a\u4e49/IPhoneXScreen")],s),n.default=s,cc._RF.pop()},{}],ListItem:[function(e,t,n){"use strict";cc._RF.push(t,"5b7cclEI4RM7aICt/ECtUva","ListItem"),Object.defineProperty(n,"__esModule",{value:!0});var i,a,r=cc._decorator,o=r.ccclass,s=r.property,c=r.disallowMultiple,u=r.menu,l=r.executionOrder;(a=i||(i={}))[a.NONE=0]="NONE",a[a.TOGGLE=1]="TOGGLE",a[a.SWITCH=2]="SWITCH";var d=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).icon=null,e.title=null,e.selectedMode=i.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}return _createClass2(n,[{key:"selected",get:function(){return this._selected},set:function(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case i.TOGGLE:this.selectedFlag.active=e;break;case i.SWITCH:var t=this.selectedFlag.getComponent(cc.Sprite);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}}},{key:"btnCom",get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom}},{key:"onLoad",value:function(){if(this.selectedMode==i.SWITCH){var e=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=e.spriteFrame}}},{key:"onDestroy",value:function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)}},{key:"_registerEvent",value:function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)}},{key:"_onSizeChange",value:function(){this.list._onItemAdaptive(this.node)}},{key:"createEvt",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var i=new cc.Component.EventHandler;return i.target=n||e.node,i.component=e.comName,i.handler=t,i}}},{key:"showAni",value:function(e,t,n){var i,a=this;switch(e){case 0:i=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,2*this.node.height)];break;case 1:i=[cc.scaleTo(.2,.7),cc.moveBy(.3,2*this.node.width,0)];break;case 2:i=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,-2*this.node.height)];break;case 3:i=[cc.scaleTo(.2,.7),cc.moveBy(.3,-2*this.node.width,0)];break;default:i=[cc.scaleTo(.3,.1)]}(t||n)&&i.push(cc.callFunc(function(){if(n){a.list._delSingleItem(a.node);for(var e=a.list.displayData.length-1;e>=0;e--)if(a.list.displayData[e].id==a.listId){a.list.displayData.splice(e,1);break}}t()})),this.node.runAction(cc.sequence(i))}},{key:"onClickThis",value:function(){this.list.selectedId=this.listId}}]),n}(cc.Component);__decorate([s({type:cc.Sprite})],d.prototype,"icon",void 0),__decorate([s({type:cc.Node})],d.prototype,"title",void 0),__decorate([s({type:cc.Enum(i)})],d.prototype,"selectedMode",void 0),__decorate([s({type:cc.Node,visible:function(){return this.selectedMode>i.NONE}})],d.prototype,"selectedFlag",void 0),__decorate([s({type:cc.SpriteFrame,visible:function(){return this.selectedMode==i.SWITCH}})],d.prototype,"selectedSpriteFrame",void 0),__decorate([s({})],d.prototype,"adaptiveSize",void 0),d=__decorate([o,c(),u("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),l(-5001)],d),n.default=d,cc._RF.pop()},{}],List:[function(e,t,n){"use strict";cc._RF.push(t,"bfe27wzGJpAvrtRy6kmzlsL","List"),Object.defineProperty(n,"__esModule",{value:!0});var i,a,r,o,s=cc._decorator,c=s.ccclass,u=s.property,l=s.disallowMultiple,d=s.menu,h=s.executionOrder,f=s.requireComponent,p=e("ListItem");(o=i||(i={}))[o.NODE=1]="NODE",o[o.PREFAB=2]="PREFAB",function(e){e[e.NORMAL=1]="NORMAL",e[e.ADHERING=2]="ADHERING",e[e.PAGE=3]="PAGE"}(a||(a={})),function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULT=2]="MULT"}(r||(r={}));var v=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).templateType=i.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=a.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=r.NONE,e.repeatEventSingle=!1,e.selectedEvent=null,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return _createClass2(n,[{key:"slideMode",get:function(){return this._slideMode},set:function(e){this._slideMode=e}},{key:"virtual",get:function(){return this._virtual},set:function(e){null!=e&&(this._virtual=e),0!=this._numItems&&this._onScrolling()}},{key:"updateRate",get:function(){return this._updateRate},set:function(e){e>=0&&e<=6&&(this._updateRate=e)}},{key:"selectedId",get:function(){return this._selectedId},set:function(e){var t,n=this;switch(n.selectedMode){case r.SINGLE:if(!n.repeatEventSingle&&e==n._selectedId)return;if(t=n.getItemByListId(e),n._selectedId>=0?n._lastSelectedId=n._selectedId:n._lastSelectedId=null,n._selectedId=e,t&&(t.getComponent(p.default).selected=!0),n._lastSelectedId>=0&&n._lastSelectedId!=n._selectedId){var i=n.getItemByListId(n._lastSelectedId);i&&(i.getComponent(p.default).selected=!1)}n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],t,e%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems);break;case r.MULT:if(!(t=n.getItemByListId(e)))return;var a=t.getComponent(p.default);n._selectedId>=0&&(n._lastSelectedId=n._selectedId),n._selectedId=e;var o=!a.selected;a.selected=o;var s=n.multSelected.indexOf(e);o&&s<0?n.multSelected.push(e):!o&&s>=0&&n.multSelected.splice(s,1),n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],t,e%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems,o)}}},{key:"numItems",get:function(){return this._actualNumItems},set:function(e){var t=this;if(t.checkInited(!1))if(null==e||e<0)cc.error("numItems set the wrong::",e);else if(t._actualNumItems=t._numItems=e,t._forceUpdate=!0,t._virtual)t._resizeContent(),t.cyclic&&(t._numItems=t._cyclicNum*t._numItems),t._onScrolling(),t.frameByFrameRenderNum||t.slideMode!=a.PAGE||(t.curPageNum=t.nearestListId);else{var n=t.content.getComponent(cc.Layout);if(n&&(n.enabled=!0),t._delRedundantItem(),t.firstListId=0,t.frameByFrameRenderNum>0){for(var i=t.frameByFrameRenderNum>t._numItems?t._numItems:t.frameByFrameRenderNum,r=0;r<i;r++)t._createOrUpdateItem2(r);t.frameByFrameRenderNum<t._numItems&&(t._updateCounter=t.frameByFrameRenderNum,t._updateDone=!1)}else{for(var o=0;o<e;o++)t._createOrUpdateItem2(o);t.displayItemNum=e}}}},{key:"scrollView",get:function(){return this._scrollView}},{key:"onLoad",value:function(){this._init()}},{key:"onDestroy",value:function(){var e=this;for(e._itemTmp&&e._itemTmp.isValid&&e._itemTmp.destroy(),e.tmpNode&&e.tmpNode.isValid&&e.tmpNode.destroy();e._pool.size();)e._pool.get().destroy()}},{key:"onEnable",value:function(){this._registerEvent(),this._init()}},{key:"onDisable",value:function(){this._unregisterEvent()}},{key:"_registerEvent",value:function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.on("touch-up",e._onTouchUp,e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.on("scroll-began",e._onScrollBegan,e,!0),e.node.on("scroll-ended",e._onScrollEnded,e,!0),e.node.on("scrolling",e._onScrolling,e,!0),e.node.on(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)}},{key:"_unregisterEvent",value:function(){var e=this;e.node.off(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.off("touch-up",e._onTouchUp,e),e.node.off(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.off("scroll-began",e._onScrollBegan,e,!0),e.node.off("scroll-ended",e._onScrollEnded,e,!0),e.node.off("scrolling",e._onScrolling,e,!0),e.node.off(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)}},{key:"_init",value:function(){var e=this;if(!e._inited)if(e._scrollView=e.node.getComponent(cc.ScrollView),e.content=e._scrollView.content,e.content){switch(e._layout=e.content.getComponent(cc.Layout),e._align=e._layout.type,e._resizeMode=e._layout.resizeMode,e._startAxis=e._layout.startAxis,e._topGap=e._layout.paddingTop,e._rightGap=e._layout.paddingRight,e._bottomGap=e._layout.paddingBottom,e._leftGap=e._layout.paddingLeft,e._columnGap=e._layout.spacingX,e._lineGap=e._layout.spacingY,e._colLineNum,e._verticalDir=e._layout.verticalDirection,e._horizontalDir=e._layout.horizontalDirection,e.setTemplateItem(cc.instantiate(e.templateType==i.PREFAB?e.tmpPrefab:e.tmpNode)),e._slideMode!=a.ADHERING&&e._slideMode!=a.PAGE||(e._scrollView.inertia=!1,e._scrollView._onMouseWheel=function(){}),e.virtual||(e.lackCenter=!1),e._lastDisplayData=[],e.displayData=[],e._pool=new cc.NodePool,e._forceUpdate=!1,e._updateCounter=0,e._updateDone=!0,e.curPageNum=0,e.cyclic&&(e._scrollView._processAutoScrolling=this._processAutoScrolling.bind(e),e._scrollView._startBounceBackIfNeeded=function(){return!1}),e._align){case cc.Layout.Type.HORIZONTAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}}}e.content.removeAllChildren(),e._inited=!0}else cc.error(e.node.name+"'s cc.ScrollView unset content!")}},{key:"_processAutoScrolling",value:function(e){this._scrollView._autoScrollAccumulatedTime+=1*e;var t=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var n=t-1;t=n*n*n*n*n+1}var i=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(t)),a=this._scrollView.getScrollEndedEventTiming(),r=Math.abs(t-1)<=a;Math.abs(t-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),r&&(this._scrollView._autoScrolling=!1);var o=i.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(o),r),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))}},{key:"setTemplateItem",value:function(e){if(e){var t=this;t._itemTmp=e,t._resizeMode==cc.Layout.ResizeMode.CHILDREN?t._itemSize=t._layout.cellSize:t._itemSize=cc.size(e.width,e.height);var n=e.getComponent(p.default),i=!1;switch(n||(i=!0),i&&(t.selectedMode=r.NONE),(n=e.getComponent(cc.Widget))&&n.enabled&&(t._needUpdateWidget=!0),t.selectedMode==r.MULT&&(t.multSelected=[]),t._align){case cc.Layout.Type.HORIZONTAL:t._colLineNum=1,t._sizeType=!1;break;case cc.Layout.Type.VERTICAL:t._colLineNum=1,t._sizeType=!0;break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var a=t.content.width-t._leftGap-t._rightGap;t._colLineNum=Math.floor((a+t._columnGap)/(t._itemSize.width+t._columnGap)),t._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var o=t.content.height-t._topGap-t._bottomGap;t._colLineNum=Math.floor((o+t._lineGap)/(t._itemSize.height+t._lineGap)),t._sizeType=!1}}}}},{key:"checkInited",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return!!this._inited||(e&&cc.error("List initialization not completed!"),!1)}},{key:"_resizeContent",value:function(){var e,t=this;switch(t._align){case cc.Layout.Type.HORIZONTAL:if(t._customSize){var n=t._getFixedSize(null);e=t._leftGap+n.val+t._itemSize.width*(t._numItems-n.count)+t._columnGap*(t._numItems-1)+t._rightGap}else e=t._leftGap+t._itemSize.width*t._numItems+t._columnGap*(t._numItems-1)+t._rightGap;break;case cc.Layout.Type.VERTICAL:if(t._customSize){var i=t._getFixedSize(null);e=t._topGap+i.val+t._itemSize.height*(t._numItems-i.count)+t._lineGap*(t._numItems-1)+t._bottomGap}else e=t._topGap+t._itemSize.height*t._numItems+t._lineGap*(t._numItems-1)+t._bottomGap;break;case cc.Layout.Type.GRID:switch(t.lackCenter&&(t.lackCenter=!1),t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var a=Math.ceil(t._numItems/t._colLineNum);e=t._topGap+t._itemSize.height*a+t._lineGap*(a-1)+t._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var r=Math.ceil(t._numItems/t._colLineNum);e=t._leftGap+t._itemSize.width*r+t._columnGap*(r-1)+t._rightGap}}var o=t.content.getComponent(cc.Layout);if(o&&(o.enabled=!1),t._allItemSize=e,t._allItemSizeNoEdge=t._allItemSize-(t._sizeType?t._topGap+t._bottomGap:t._leftGap+t._rightGap),t.cyclic){var s=t._sizeType?t.node.height:t.node.width;t._cyclicPos1=0,s-=t._cyclicPos1,t._cyclicNum=Math.ceil(s/t._allItemSizeNoEdge)+1;var c=t._sizeType?t._lineGap:t._columnGap;t._cyclicPos2=t._cyclicPos1+t._allItemSizeNoEdge+c,t._cyclicAllItemSize=t._allItemSize+t._allItemSizeNoEdge*(t._cyclicNum-1)+c*(t._cyclicNum-1),t._cycilcAllItemSizeNoEdge=t._allItemSizeNoEdge*t._cyclicNum,t._cycilcAllItemSizeNoEdge+=c*(t._cyclicNum-1)}t._lack=!t.cyclic&&t._allItemSize<(t._sizeType?t.node.height:t.node.width);var u=t._lack&&t.lackCenter||!t.lackSlide?.1:0,l=t._lack?(t._sizeType?t.node.height:t.node.width)-u:t.cyclic?t._cyclicAllItemSize:t._allItemSize;l<0&&(l=0),t._sizeType?t.content.height=l:t.content.width=l}},{key:"_onScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&e&&"scroll-ended"!=e.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var t=this.content.getPosition();t=this._sizeType?t.y:t.x;var n=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),i=this._sizeType?cc.v2(0,n):cc.v2(n,0);switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i))):t<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)));break;case 2:t<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):t>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i)));break;case 3:t<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i))):t>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i)));break;case 4:t>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(i))):t<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(i)))}}var a,r,o,s;if(this._calcViewPos(),this._sizeType?(a=this.viewTop,o=this.viewBottom):(r=this.viewRight,s=this.viewLeft),this._virtual){var c;this.displayData=[];var u=0,l=this._numItems-1;if(this._customSize)for(var d=!1;u<=l&&!d;u++)switch(c=this._calcItemPos(u),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=u&&this.displayData.length>0&&(d=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=a&&c.top>=o?this.displayData.push(c):0!=u&&this.displayData.length>0&&(d=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=a&&c.top>=o?this.displayData.push(c):0!=u&&this.displayData.length>0&&(d=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=s&&c.left<=r?this.displayData.push(c):0!=u&&this.displayData.length>0&&(d=!0)}}else{var h=this._itemSize.width+this._columnGap,f=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:u=(s+this._leftGap)/h,l=(r+this._rightGap)/h;break;case 2:u=(-r-this._rightGap)/h,l=(-s-this._leftGap)/h;break;case 3:u=(-a-this._topGap)/f,l=(-o-this._bottomGap)/f;break;case 4:u=(o+this._bottomGap)/f,l=(a+this._topGap)/f}for(u=Math.floor(u)*this._colLineNum,l=Math.ceil(l)*this._colLineNum,u<0&&(u=0),--l>=this._numItems&&(l=this._numItems-1);u<=l;u++)this.displayData.push(this._calcItemPos(u))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var p=this._lastDisplayData.length,v=this.displayItemNum!=p;if(v&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(e,t){return e-t}),v=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[p-1]),this._forceUpdate||v)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var _=0;_<this.displayItemNum;_++)this._createOrUpdateItem(this.displayData[_]);this._forceUpdate=!1}this._calcNearestItem()}}}},{key:"_calcViewPos",value:function(){var e=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=e.x>0?e.x:0,this.viewLeft=(e.x<0?-e.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=e.x<0?-e.x:0,this.viewRight=(e.x>0?-e.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=e.y<0?Math.abs(e.y):0,this.viewTop=(e.y>0?-e.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=e.y>0?Math.abs(e.y):0,this.viewBottom=(e.y<0?-e.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}}},{key:"_calcItemPos",value:function(e){var t,n,i,a,r,o,s,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var u=this._getFixedSize(e);r=this._leftGap+(this._itemSize.width+this._columnGap)*(e-u.count)+(u.val+this._columnGap*u.count);var l=this._customSize[e];t=l>0?l:this._itemSize.width}else r=this._leftGap+(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width;if(o=r+t,this.lackCenter){var d=this.content.width/2-this._allItemSizeNoEdge/2;r+=d,o+=d}return{id:e,left:r,right:o,x:r+this._itemTmp.anchorX*t,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){var h=this._getFixedSize(e);o=-this._rightGap-(this._itemSize.width+this._columnGap)*(e-h.count)-(h.val+this._columnGap*h.count);var f=this._customSize[e];t=f>0?f:this._itemSize.width}else o=-this._rightGap-(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width;if(r=o-t,this.lackCenter){var p=this.content.width/2-this._allItemSizeNoEdge/2;r-=p,o-=p}return{id:e,right:o,left:r,x:r+this._itemTmp.anchorX*t,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){var v=this._getFixedSize(e);i=-this._topGap-(this._itemSize.height+this._lineGap)*(e-v.count)-(v.val+this._lineGap*v.count);var _=this._customSize[e];n=_>0?_:this._itemSize.height}else i=-this._topGap-(this._itemSize.height+this._lineGap)*e,n=this._itemSize.height;if(a=i-n,this.lackCenter){var y=this.content.height/2-this._allItemSizeNoEdge/2;i-=y,a-=y}return{id:e,top:i,bottom:a,x:this._itemTmp.x,y:a+this._itemTmp.anchorY*n};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){var g=this._getFixedSize(e);a=this._bottomGap+(this._itemSize.height+this._lineGap)*(e-g.count)+(g.val+this._lineGap*g.count);var m=this._customSize[e];n=m>0?m:this._itemSize.height}else a=this._bottomGap+(this._itemSize.height+this._lineGap)*e,n=this._itemSize.height;if(i=a+n,this.lackCenter){var k=this.content.height/2-this._allItemSizeNoEdge/2;i+=k,a+=k}return{id:e,top:i,bottom:a,x:this._itemTmp.x,y:a+this._itemTmp.anchorY*n}}case cc.Layout.Type.GRID:var S=Math.floor(e/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(a=(i=-this._topGap-(this._itemSize.height+this._lineGap)*S)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:i=(a=this._bottomGap+(this._itemSize.height+this._lineGap)*S)+this._itemSize.height,c=a+this._itemTmp.anchorY*this._itemSize.height}switch(s=this._leftGap+e%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s+=this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s+=(1-this._itemTmp.anchorX)*this._itemSize.width,s-=(1-this.content.anchorX)*this.content.width,s*=-1}return{id:e,top:i,bottom:a,x:s,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:o=(r=this._leftGap+(this._itemSize.width+this._columnGap)*S)+this._itemSize.width,s=r+this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s=(r=(o=-this._rightGap-(this._itemSize.width+this._columnGap)*S)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,s+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-e%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:e,left:r,right:o,x:s,y:c}}}}},{key:"_calcExistItemPos",value:function(e){var t=this.getItemByListId(e);if(!t)return null;var n={id:e,x:t.x,y:t.y};return this._sizeType?(n.top=t.y+t.height*(1-t.anchorY),n.bottom=t.y-t.height*t.anchorY):(n.left=t.x-t.width*t.anchorX,n.right=t.x+t.width*(1-t.anchorX)),n}},{key:"getItemPos",value:function(e){return this._virtual?this._calcItemPos(e):this.frameByFrameRenderNum?this._calcItemPos(e):this._calcExistItemPos(e)}},{key:"_getFixedSize",value:function(e){if(!this._customSize)return null;null==e&&(e=this._numItems);var t=0,n=0;for(var i in this._customSize)parseInt(i)<e&&(t+=this._customSize[i],n++);return{val:t,count:n}}},{key:"_onScrollBegan",value:function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft}},{key:"_onScrollEnded",value:function(){var e=this;if(null!=e.scrollToListId){var t=e.getItemByListId(e.scrollToListId);e.scrollToListId=null,t&&t.runAction(cc.sequence(cc.scaleTo(.1,1.06),cc.scaleTo(.1,1)))}e._onScrolling(),e._slideMode!=a.ADHERING||e.adhering?e._slideMode==a.PAGE&&(null!=e._beganPos?this._pageAdhere():e.adhere()):e.adhere()}},{key:"_onTouchStart",value:function(e,t){if(!this._scrollView._hasNestedViewGroup(e,t)&&(e.eventPhase!==cc.Event.AT_TARGET||e.target!==this.node)){for(var n=e.target;null==n._listId&&n.parent;)n=n.parent;this._scrollItem=null!=n._listId?n:e.target}}},{key:"_onTouchUp",value:function(){var e=this;e._scrollPos=null,e._slideMode==a.ADHERING?(this.adhering&&(this._adheringBarrier=!0),e.adhere()):e._slideMode==a.PAGE&&(null!=e._beganPos?this._pageAdhere():e.adhere()),this._scrollItem=null}},{key:"_onTouchCancelled",value:function(e,t){var n=this;n._scrollView._hasNestedViewGroup(e,t)||e.simulate||(n._scrollPos=null,n._slideMode==a.ADHERING?(n.adhering&&(n._adheringBarrier=!0),n.adhere()):n._slideMode==a.PAGE&&(null!=n._beganPos?n._pageAdhere():n.adhere()),this._scrollItem=null)}},{key:"_onSizeChanged",value:function(){this.checkInited(!1)&&this._onScrolling()}},{key:"_onItemAdaptive",value:function(e){if(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height){this._customSize||(this._customSize={});var t=this._sizeType?e.height:e.width;this._customSize[e._listId]!=t&&(this._customSize[e._listId]=t,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}}},{key:"_pageAdhere",value:function(){var e=this;if(e.cyclic||!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){var t=e._sizeType?e.viewTop:e.viewLeft,n=(e._sizeType?e.node.height:e.node.width)*e.pageDistance;if(Math.abs(e._beganPos-t)>n)switch(e._alignCalcType){case 1:case 4:e._beganPos>t?e.prePage(.5):e.nextPage(.5);break;case 2:case 3:e._beganPos<t?e.prePage(.5):e.nextPage(.5)}else e.elasticTop<=0&&e.elasticRight<=0&&e.elasticBottom<=0&&e.elasticLeft<=0&&e.adhere();e._beganPos=null}}},{key:"adhere",value:function(){var e=this;if(e.checkInited()&&!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){e.adhering=!0,e._calcNearestItem();var t=(e._sizeType?e._topGap:e._leftGap)/(e._sizeType?e.node.height:e.node.width);e.scrollTo(e.nearestListId,.7,t)}}},{key:"update",value:function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var e=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++){var n=this.displayData[t];n&&this._createOrUpdateItem(n)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==a.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(var i=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,r=this._updateCounter;r<i;r++)this._createOrUpdateItem2(r);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==a.PAGE&&(this.curPageNum=this.nearestListId)}},{key:"_createOrUpdateItem",value:function(e){var t=this.getItemByListId(e.id);if(t)this._forceUpdate&&this.renderEvent&&(t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems));else{var n=this._pool.size()>0;if((t=n?this._pool.get():cc.instantiate(this._itemTmp))._listId!=e.id&&(t._listId=e.id,t.setContentSize(this._itemSize)),t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.content.addChild(t),n&&this._needUpdateWidget){var i=t.getComponent(cc.Widget);i&&i.updateAlignment()}t.setSiblingIndex(this.content.childrenCount-1);var a=t.getComponent(p.default);t.listItem=a,a&&(a.listId=e.id,a.list=this,a._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems)}this._resetItemSize(t),this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e.id)<0&&this._lastDisplayData.push(e.id)}},{key:"_createOrUpdateItem2",value:function(e){var t,n=this.content.children[e];n?this._forceUpdate&&this.renderEvent&&(n._listId=e,t&&(t.listId=e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,e)):((n=cc.instantiate(this._itemTmp))._listId=e,this.content.addChild(n),t=n.getComponent(p.default),n.listItem=t,t&&(t.listId=e,t.list=this,t._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,e)),this._updateListItem(t),this._lastDisplayData.indexOf(e)<0&&this._lastDisplayData.push(e)}},{key:"_updateListItem",value:function(e){if(e&&this.selectedMode>r.NONE){var t=e.node;switch(this.selectedMode){case r.SINGLE:e.selected=this.selectedId==t._listId;break;case r.MULT:e.selected=this.multSelected.indexOf(t._listId)>=0}}}},{key:"_resetItemSize",value:function(){}},{key:"_updateItemPos",value:function(e){var t=isNaN(e)?e:this.getItemByListId(e),n=this.getItemPos(t._listId);t.setPosition(n.x,n.y)}},{key:"setMultSelected",value:function(e,t){var n=this;if(n.checkInited()){var i,a;if(Array.isArray(e)||(e=[e]),null==t)n.multSelected=e;else if(t)for(var r=e.length-1;r>=0;r--)i=e[r],(a=n.multSelected.indexOf(i))<0&&n.multSelected.push(i);else for(var o=e.length-1;o>=0;o--)i=e[o],(a=n.multSelected.indexOf(i))>=0&&n.multSelected.splice(a,1);n._forceUpdate=!0,n._onScrolling()}}},{key:"updateItem",value:function(e){if(this.checkInited()){Array.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;t++){var i=e[t],a=this.getItemByListId(i);a&&cc.Component.EventHandler.emitEvents([this.renderEvent],a,i%this._actualNumItems)}}}},{key:"updateAll",value:function(){this.checkInited()&&(this.numItems=this.numItems)}},{key:"getItemByListId",value:function(e){if(this.content)for(var t=this.content.childrenCount-1;t>=0;t--){var n=this.content.children[t];if(n._listId==e)return n}}},{key:"_getOutsideItem",value:function(){for(var e,t=[],n=this.content.childrenCount-1;n>=0;n--)e=this.content.children[n],this.displayData.find(function(t){return t.id==e._listId})||t.push(e);return t}},{key:"_delRedundantItem",value:function(){if(this._virtual)for(var e=this._getOutsideItem(),t=e.length-1;t>=0;t--){var n=e[t];if(!this._scrollItem||n._listId!=this._scrollItem._listId){this._pool.put(n);for(var i=this._lastDisplayData.length-1;i>=0;i--)if(this._lastDisplayData[i]==n._listId){this._lastDisplayData.splice(i,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])}},{key:"_delSingleItem",value:function(e){e.removeFromParent(),e.destroy&&e.destroy(),e=null}},{key:"aniDelItem",value:function(e,t,n){var i,a=this;if(!a.checkInited()||a.cyclic||!a._virtual)return cc.error("This function is not allowed to be called!");if(a._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var o=a.getItemByListId(e);if(o){i=o.getComponent(p.default),a._aniDelRuning=!0;var s=a.displayData[a.displayData.length-1].id,c=i.selected;i.showAni(n,function(){var n,i,u;if(s<a._numItems-2&&(n=s+1),null!=n){var l=a._calcItemPos(n);a.displayData.push(l),a._virtual?a._createOrUpdateItem(l):a._createOrUpdateItem2(n)}else a._numItems--;if(a.selectedMode==r.SINGLE)c?a._selectedId=-1:a._selectedId-1>=0&&a._selectedId--;else if(a.selectedMode==r.MULT&&a.multSelected.length){var d=a.multSelected.indexOf(e);d>=0&&a.multSelected.splice(d,1);for(var h=a.multSelected.length-1;h>=0;h--)a.multSelected[h]>=e&&a.multSelected[h]--}if(a._customSize){var f;a._customSize[e]&&delete a._customSize[e];var p={};for(var v in a._customSize){f=a._customSize[v];var _=parseInt(v);p[_-(_>=e?1:0)]=f}a._customSize=p}for(var y=null!=n?n:s;y>=e+1;y--)if(o=a.getItemByListId(y)){var g=a._calcItemPos(y-1);i=[cc.moveTo(.2333,cc.v2(g.x,g.y))],y<=e+1&&(u=!0,i.push(cc.callFunc(function(){a._aniDelRuning=!1,t(e)}))),i.length>1?o.runAction(cc.sequence(i)):o.runAction(i[0])}u||(a._aniDelRuning=!1,t(e))},!0)}else t(e)}},{key:"scrollTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this;if(a.checkInited(!1)){var r,o;null==t?t=.5:t<0&&(t=0),e<0?e=0:e>=a._numItems&&(e=a._numItems-1),!a._virtual&&a._layout&&a._layout.enabled&&a._layout.updateLayout();var s=a.getItemPos(e);switch(a._alignCalcType){case 1:r=s.left,r-=null!=n?a.node.width*n:a._leftGap,s=cc.v2(r,0);break;case 2:r=s.right-a.node.width,r+=null!=n?a.node.width*n:a._rightGap,s=cc.v2(r+a.content.width,0);break;case 3:o=s.top,o+=null!=n?a.node.height*n:a._topGap,s=cc.v2(0,-o);break;case 4:o=s.bottom+a.node.height,o-=null!=n?a.node.height*n:a._bottomGap,s=cc.v2(0,-o+a.content.height)}var c=a.content.getPosition();c=Math.abs(a._sizeType?c.y:c.x);var u=a._sizeType?s.y:s.x;Math.abs((null!=a._scrollPos?a._scrollPos:c)-u)>.5&&(a._scrollView.scrollToOffset(s,t),a._scrollToListId=e,a._scrollToEndTime=(new Date).getTime()/1e3+t,a._scrollToSo=a.scheduleOnce(function(){if(a._adheringBarrier||(a.adhering=a._adheringBarrier=!1),a._scrollPos=a._scrollToListId=a._scrollToEndTime=a._scrollToSo=null,i){var t=a.getItemByListId(e);t&&t.runAction(cc.sequence(cc.scaleTo(.1,1.05),cc.scaleTo(.1,1)))}},t+.1),t<=0&&a._onScrolling())}}},{key:"_calcNearestItem",value:function(){var e,t,n,i,a,r,o=this;o.nearestListId=null,o._virtual&&o._calcViewPos(),n=o.viewTop,i=o.viewRight,a=o.viewBottom,r=o.viewLeft;for(var s=!1,c=0;c<o.content.childrenCount&&!s;c+=o._colLineNum)if(e=o._virtual?o.displayData[c]:o._calcExistItemPos(c))switch(t=o._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,o._alignCalcType){case 1:e.right>=r&&(o.nearestListId=e.id,r>t&&(o.nearestListId+=o._colLineNum),s=!0);break;case 2:e.left<=i&&(o.nearestListId=e.id,i<t&&(o.nearestListId+=o._colLineNum),s=!0);break;case 3:e.bottom<=n&&(o.nearestListId=e.id,n<t&&(o.nearestListId+=o._colLineNum),s=!0);break;case 4:e.top>=a&&(o.nearestListId=e.id,a>t&&(o.nearestListId+=o._colLineNum),s=!0)}if((e=o._virtual?o.displayData[o.displayItemNum-1]:o._calcExistItemPos(o._numItems-1))&&e.id==o._numItems-1)switch(t=o._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,o._alignCalcType){case 1:i>t&&(o.nearestListId=e.id);break;case 2:r<t&&(o.nearestListId=e.id);break;case 3:a<t&&(o.nearestListId=e.id);break;case 4:n>t&&(o.nearestListId=e.id)}}},{key:"prePage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;this.checkInited()&&this.skipPage(this.curPageNum-1,e)}},{key:"nextPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;this.checkInited()&&this.skipPage(this.curPageNum+1,e)}},{key:"skipPage",value:function(e,t){var n=this;if(n.checkInited())return n._slideMode!=a.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(e<0||e>=n._numItems||n.curPageNum!=e&&(n.curPageNum=e,n.pageChangeEvent&&cc.Component.EventHandler.emitEvents([n.pageChangeEvent],e),n.scrollTo(e,t)))}},{key:"calcCustomSize",value:function(e){var t=this;if(t.checkInited()){if(!t._itemTmp)return cc.error("Unset template item!");if(!t.renderEvent)return cc.error("Unset Render-Event!");t._customSize={};var n=cc.instantiate(t._itemTmp);t.content.addChild(n);for(var i=0;i<e;i++)cc.Component.EventHandler.emitEvents([t.renderEvent],n,i),n.height==t._itemSize.height&&n.width==t._itemSize.width||(t._customSize[i]=t._sizeType?n.height:n.width);return Object.keys(t._customSize).length||(t._customSize=null),n.removeFromParent(),n.destroy&&n.destroy(),t._customSize}}}]),n}(cc.Component);__decorate([u({type:cc.Enum(i)})],v.prototype,"templateType",void 0),__decorate([u({type:cc.Node,visible:function(){return this.templateType==i.NODE}})],v.prototype,"tmpNode",void 0),__decorate([u({type:cc.Prefab,visible:function(){return this.templateType==i.PREFAB}})],v.prototype,"tmpPrefab",void 0),__decorate([u()],v.prototype,"_slideMode",void 0),__decorate([u({type:cc.Enum(a)})],v.prototype,"slideMode",null),__decorate([u({type:cc.Float,range:[0,1,.1],slide:!0,visible:function(){return this._slideMode==a.PAGE}})],v.prototype,"pageDistance",void 0),__decorate([u({type:cc.Component.EventHandler,visible:function(){return this._slideMode==a.PAGE}})],v.prototype,"pageChangeEvent",void 0),__decorate([u()],v.prototype,"_virtual",void 0),__decorate([u({type:cc.Boolean})],v.prototype,"virtual",null),__decorate([u({visible:function(){var e=this.virtual&&this.slideMode==a.NORMAL;return e||(this.cyclic=!1),e}})],v.prototype,"cyclic",void 0),__decorate([u({visible:function(){return this.virtual}})],v.prototype,"lackCenter",void 0),__decorate([u({visible:function(){var e=this.virtual&&!this.lackCenter;return e||(this.lackSlide=!1),e}})],v.prototype,"lackSlide",void 0),__decorate([u({type:cc.Integer})],v.prototype,"_updateRate",void 0),__decorate([u({type:cc.Integer,range:[0,6,1],slide:!0})],v.prototype,"updateRate",null),__decorate([u({type:cc.Integer,range:[0,12,1],slide:!0})],v.prototype,"frameByFrameRenderNum",void 0),__decorate([u({type:cc.Component.EventHandler})],v.prototype,"renderEvent",void 0),__decorate([u({type:cc.Enum(r)})],v.prototype,"selectedMode",void 0),__decorate([u({visible:function(){return this.selectedMode==r.SINGLE}})],v.prototype,"repeatEventSingle",void 0),__decorate([u({type:cc.Component.EventHandler,visible:function(){return this.selectedMode>r.NONE}})],v.prototype,"selectedEvent",void 0),__decorate([u({serializable:!1})],v.prototype,"_numItems",void 0),v=__decorate([c,l(),d("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),f(cc.ScrollView),h(-5e3)],v),n.default=v,cc._RF.pop()},{ListItem:"ListItem"}],LoadingTools:[function(e,t,n){"use strict";cc._RF.push(t,"7d1f9DIdzRF/4pTGDtJADY7","LoadingTools"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("utils"),a=e("GameData"),r=e("WxHelper"),o=e("Analytics"),s=e("Enum"),c=e("SDKTools"),u=e("ConfigHelper"),l=e("WXSDK"),d=cc._decorator,h=d.ccclass,f=d.property,p=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).boxProgess=null,e.progess=null,e.sceneSuc=!1,e.panelSuc=!1,e.count=0,e}return _createClass2(n,[{key:"onLoad",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}},e,this)}))}},{key:"init",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.WxHelper.getSystemInfo(),o.Analytics.I.dot(s.DOT_TYPE.LoadingStart),this.loadScene(),this.handleProgess(.5),e.next=6,l.default.init();case 6:this.login();case 7:case"end":return e.stop()}},e,this)}))}},{key:"loadData",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.load();case 2:return e.next=4,a.GameData.load();case 4:if(e.t0=a.GameData.data.level>=9,!e.t0){e.next=8;break}return e.next=8,u.default.loadAll();case 8:this.handleProgess(.1),this.dataSuc=!0,this.toggelScene();case 11:case"end":return e.stop()}},e,this)}))}},{key:"login",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.utils.isWX){e.next=2;break}return e.abrupt("return",(this.loadData(),void this.handleProgess(.1)));case 2:return r.WxHelper.checkUpdate(!1),e.next=5,c.SDKTools.login(!1);case 5:this.loadData(),this.handleProgess(.1);case 7:case"end":return e.stop()}},e,this)}))}},{key:"loadScene",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.utils.loadBunlde("texs");case 2:i.utils.loadBunlde("game").then(function(){return __awaiter(t,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.handleProgess(.3),e.next=3,i.utils.loadPrefab2("game","game");case 3:t=e.sent,this.sceneSuc=!0,this.game=t,this.toggelScene();case 5:case"end":return e.stop()}},e,this)}))}),i.utils.loadBunlde("panel").then(function(){return __awaiter(t,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.panelSuc=!0,this.handleProgess(.1),this.toggelScene();case 1:case"end":return e.stop()}},e,this)}))});case 4:case"end":return e.stop()}},e)}))}},{key:"toggelScene",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.sceneSuc&&this.dataSuc&&this.panelSuc&&(i.utils.isWX&&(o.Analytics.I.dot(s.DOT_TYPE.loadingFinish),o.Analytics.I.loadingFinish()),cc.find("Canvas").getChildByName("box").addChild(this.game),this.boxProgess.removeFromParent(),cc.find("Canvas").getChildByName("bg").removeFromParent());case 1:case"end":return e.stop()}},e,this)}))}},{key:"handleProgess",value:function(e){this.count+=e,this.count=Math.min(1,this.count),cc.tween(this.progess).to(.3,{width:475*this.count}).start()}}]),n}(cc.Component);__decorate([f(cc.Node)],p.prototype,"boxProgess",void 0),__decorate([f(cc.Node)],p.prototype,"progess",void 0),p=__decorate([h],p),n.default=p,cc._RF.pop()},{Analytics:"Analytics",ConfigHelper:"ConfigHelper",Enum:"Enum",GameData:"GameData",SDKTools:"SDKTools",WXSDK:"WXSDK",WxHelper:"WxHelper",utils:"utils"}],Loading:[function(e,t,n){"use strict";cc._RF.push(t,"718afB3UpRHb6eMlAn4fqwL","Loading"),Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,r=i.property,o=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).progess=null,e.bg=null,e}return _createClass2(n,[{key:"onLoad",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:cc.loader.loadRes("progess",cc.Prefab,function(e,n){if(!e){var i=cc.instantiate(n);t.progess.addChild(i)}});case 1:case"end":return e.stop()}},e)}))}}]),n}(cc.Component);__decorate([r(cc.Node)],o.prototype,"progess",void 0),__decorate([r(cc.Node)],o.prototype,"bg",void 0),o=__decorate([a],o),n.default=o,cc._RF.pop()},{}],LogService:[function(e,t,n){"use strict";cc._RF.push(t,"79f56VblXJOA5fAD6FmIEBM","LogService"),Object.defineProperty(n,"__esModule",{value:!0}),n.LogLevel=void 0;var i,a,r=e("DataService"),o=e("SDKConst"),s=e("SDKApi"),c=e("WxSystem"),u=e("StorageUtils"),l=e("SDKEnum"),d=e("DateUtils"),h=function(){function e(){_classCallCheck2(this,e),this.queue=[],this.isLogin=!1,this.exposureArr={},this.logResArr=[],this.logLevelArr=[],this.regFinishState=0,this.isHandledShare=!1,this.timeoutShareId=0,this.lastReqBannerTime={},this.lastReqBannerData={}}return _createClass2(e,[{key:"setRegFinishState",value:function(e){this.regFinishState=e}},{key:"LaunchTime",get:function(){return r.default.I.LaunchTime}},{key:"LaunchKey",get:function(){return r.default.I.LaunchKey}},{key:"Scene",get:function(){return r.default.I.Scene}},{key:"RegTime",get:function(){return r.default.I.RegTime}},{key:"UserId",get:function(){return r.default.I.UserId}},{key:"OpenId",get:function(){return r.default.I.OpenId}},{key:"UserInviteUid",get:function(){return r.default.I.UserInviteUid}},{key:"QueryUserInviteUid",get:function(){return r.default.I.QueryUserInviteUid}},{key:"QueryExtData",get:function(){return r.default.I.QueryExtData}},{key:"Shield",get:function(){return r.default.I.Shield}},{key:"shareKey",get:function(){return r.default.I.ShareKey}},{key:"shareId",get:function(){return r.default.I.ShareId}},{key:"fixLaunchKey",value:function(e){r.default.I.fixLaunchKey(e)}},{key:"setLogind",value:function(e){if(r.default.I.setLoginData(e),this.isLogin=!0,this.queue.length>0)for(var t=0;t<this.queue.length;t++)(0,this.queue[t])();this.queue=[]}},{key:"dot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){var i,a,r,o,c=this;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i="",a="","{}"!=JSON.stringify(t)&&"object"==_typeof2(t))for(r in t)""===i&&(i=r,a=t[r]);else"string"==typeof t&&(t={from:o=t},i="from",a=o);this.checkLogin(function(){return s.SDKApi.dot(Object.assign(Object.assign({},c.buildParams()),{eventkey:e,value:JSON.stringify(t),itemkey:i,itemvalue:a}))});case 3:case"end":return n.stop()}},n,this)}))}},{key:"levelStart",value:function(e,t,n){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function i(){var a=this;return _regenerator.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.checkLogin(function(){return s.SDKApi.level(Object.assign(Object.assign({},a.buildParams()),{stageid:e,stagename:t,pattern:n,typ:1}))});case 1:case"end":return i.stop()}},i,this)}))}},{key:"levelRunning",value:function(e,t,n,i,a,r,o,c){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function u(){var l=this;return _regenerator.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:this.checkLogin(function(){return s.SDKApi.level(Object.assign(Object.assign({},l.buildParams()),{stageid:e,stagename:t,pattern:n,event:i,params_id:a,params_name:r,params_count:o,params_desc:c,typ:2}))});case 1:case"end":return u.stop()}},u,this)}))}},{key:"levelEnd",value:function(e,t,n,i,a,r){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function o(){var c=this;return _regenerator.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.checkLogin(function(){return s.SDKApi.level(Object.assign(Object.assign({},c.buildParams()),{stageid:e,stagename:t,pattern:n,event:i,times:a,perc:r,typ:3}))});case 1:case"end":return o.stop()}},o,this)}))}},{key:"loadingFinish",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.checkLogin(function(){return s.SDKApi.loadingFinish(Object.assign({},t.buildParams()))}),this.startStay();case 1:case"end":return e.stop()}},e,this)}))}},{key:"active",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.checkLogin(function(){return s.SDKApi.active(Object.assign(Object.assign({},t.buildParams()),{isnew:0,sharekey:t.shareKey,shareid:t.shareId}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"logOut",value:function(e){var t=this;this.checkLogin(function(){return s.SDKApi.logOut(Object.assign(Object.assign({},t.buildParams()),{times:e}))})}},{key:"share",value:function(e,t,n){var i=this;this.checkLogin(function(){return s.SDKApi.share(Object.assign(Object.assign({},i.buildParams()),{typ:n,sharekey:e,shareid:t,shareuid:n===l.DOT_SHARE_TYPE.click?i.QueryUserInviteUid:""}))})}},{key:"adStat",value:function(e,t,n,i,a){var r=this;this.checkLogin(function(){return s.SDKApi.adStat(Object.assign(Object.assign({},r.buildParams()),{videokey:e,adplat:"1",adid:t,adtyp:n,adstatus:i,times:a}))})}},{key:"startStay",value:function(){this.stayInterval=setInterval(this.stayFun.bind(this),1e3)}},{key:"stayFun",value:function(){var e=u.default.I.get("newUserTime")||0;e++,u.default.I.set("newUserTime",e);var t=u.default.I.get("newUserDot")||0;1===t&&clearInterval(this.stayInterval),e>=30&&0==t&&(u.default.I.set("newUserDot",1),this.loadingFinishStay(30),clearInterval(this.stayInterval))}},{key:"loadingFinishStay",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){var n=this;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.checkLogin(function(){r.default.I.RegTime===d.default.today&&s.SDKApi.stay(Object.assign(Object.assign({},n.buildParams()),{times:e}))});case 1:case"end":return t.stop()}},t,this)}))}},{key:"stay",value:function(){}},{key:"behaviors",value:function(){var e=this;this.checkLogin(function(){return s.SDKApi.behaviors(Object.assign({},e.buildParams()))})}},{key:"checkLogin",value:function(e){this.isLogin?e():this.queue.push(e)}},{key:"jumps",value:function(e,t){var n=this;this.checkLogin(function(){return s.SDKApi.jumps(Object.assign(Object.assign({},n.buildParams()),{adid:0,adplat:1,adtyp:t,typ:1,times:1,id:e}))})}},{key:"bannerExposure2",value:function(e,t,n){var i=this;this.checkLogin(function(){return s.SDKApi.jumps(Object.assign(Object.assign({},i.buildParams()),{adid:0,adplat:1,adtyp:t,typ:2,times:n,id:e}))})}},{key:"addExposure",value:function(e,t){var n=this;t&&t.forEach(function(t){var i=t.id;if(n.exposureArr.hasOwnProperty(e))n.exposureArr[e].hasOwnProperty(i)?n.exposureArr[e][i]++:n.exposureArr[e]=Object.assign(Object.assign({},n.exposureArr[e]),_defineProperty2({},i,1));else{var a=_defineProperty2({},e,_defineProperty2({},i,1));n.exposureArr=Object.assign(Object.assign({},n.exposureArr),a)}})}},{key:"bannerExposure",value:function(){if("{}"!==JSON.stringify(this.exposureArr)){var e=JSON.parse(JSON.stringify(this.exposureArr));for(var t in this.exposureArr={},e){var n=e[t];for(var i in n)this.bannerExposure2(i,t,n[i])}}}},{key:"role",value:function(e,t){var n=this;this.checkLogin(function(){return s.SDKApi.role(Object.assign(Object.assign({},n.buildParams()),{role_name:e,region:t}))})}},{key:"clientLog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.debug;switch(s.SDKApi.client_log({APIVersion:"0.6.0",gameid:o.GAMEDATA.game_id,cacheUserId:u.default.I.get("userId")||"0",level:i[t],content:e}),t){case i.error:console.error(e);break;case i.debug:console.log(e);break;case i.info:console.info(e);break;case i.warning:console.warn(e);break;default:console.log(e)}}},{key:"consume",value:function(e,t,n,i){var a=this;this.checkLogin(function(){return s.SDKApi.consume(Object.assign(Object.assign({},a.buildParams()),{id:e,typ:t,nums:n,gsne:i}))})}},{key:"daystay",value:function(){var e=this;this.checkLogin(function(){return s.SDKApi.daystay(Object.assign({},e.buildParams()))})}},{key:"loading",value:function(e,t,n,i,a,r){var o=this;this.checkLogin(function(){return s.SDKApi.loading(Object.assign(Object.assign({},o.buildParams()),{typ:e,stageid:t,stagename:n,event:i,times:a,perc:r}))})}},{key:"buildParams",value:function(){var e=o.SDKVersion;return{gameid:o.GAMEDATA.game_id,channel:r.default.I.ChannelId,APIVersion:"0.6.0",brand:c.default.I.brand,model:c.default.I.model,version:c.default.I.version,system:c.default.I.system,platform:c.default.I.platform,sdkversion:c.default.I.SDKVersion,scene:r.default.I.Scene+"",uid:this.UserId,env:1===r.default.I.EnvEnum?"pre":"prod",logindays:r.default.I.logindays,amount:r.default.I.amount,pon:r.default.I.pon,pkv:e,ptm:r.default.I.ptm,account_id:r.default.I.Data.ad_info.account_id,adgroup_id:r.default.I.Data.ad_info.adgroup_id,creative_id:r.default.I.Data.ad_info.creative_id}}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=h,(a=i=n.LogLevel||(n.LogLevel={}))[a.debug=0]="debug",a[a.info=1]="info",a[a.warning=2]="warning",a[a.error=3]="error",a[a.critical=4]="critical",cc._RF.pop()},{DataService:"DataService",DateUtils:"DateUtils",SDKApi:"SDKApi",SDKConst:"SDKConst",SDKEnum:"SDKEnum",StorageUtils:"StorageUtils",WxSystem:"WxSystem"}],ObjectInstance:[function(e,t,n){"use strict";cc._RF.push(t,"1b7d7G10zpEUJEJ1HUrSeTk","ObjectInstance"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"getInstance",value:function(t){if(!e.instances.has(t)){var n=new t;return e.instances.set(t,n),n}return e.instances.get(t)}}]),e}();n.default=i,i.instances=new Map,cc._RF.pop()},{}],OnlineService:[function(e,t,n){"use strict";cc._RF.push(t,"52b8aD5HTFFOJFebPQ+eK+n","OnlineService"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SDKApi"),r=function(){function e(){_classCallCheck2(this,e),this.isDebug=!1}return _createClass2(e,[{key:"setData",value:function(e){e&&(this.data=e)}},{key:"setDebugMode",value:function(e){this.isDebug=e}},{key:"updateOnlineConfig",value:function(){var e=this;return new Promise(function(t,n){e.reqOnlineConfig().then(function(e){return t(e)}).catch(function(e){return n(e)})})}},{key:"getParams",value:function(e){if(!e)return i.__LOG__&&console.warn("SDK OnlineService \u8bf7\u4f20\u9012key\uff01"),null;var t=this.data;return t?t.hasOwnProperty(e)?t[e]:(i.__LOG__&&console.warn("SDK OnlineService \u8bf7\u5728\u540e\u53f0\u914d\u7f6e\u5728\u7ebf\u53c2\u6570key\uff1a\u3010"+e+"\u3011"),null):null}},{key:"getParamsObj",value:function(){var e=this.getParams(arguments.length<=0?void 0:arguments[0]);return 2!==arguments.length||e?e?JSON.parse(e):e:arguments.length<=1?void 0:arguments[1]}},{key:"getParamsInt",value:function(){var e=this.getParams(arguments.length<=0?void 0:arguments[0]);return 2!==arguments.length||e?+e:arguments.length<=1?void 0:arguments[1]}},{key:"getParamsString",value:function(){var e=this.getParams(arguments.length<=0?void 0:arguments[0]);return 2!==arguments.length||e?e:arguments.length<=1?void 0:arguments[1]}},{key:"reqOnlineConfig",value:function(){var e=this;return new Promise(function(t,n){a.SDKApi.getConfig().then(function(n){e.data=n&&n.data&&n.data.config,e.data&&(e.data=n.data.config),t(e.data)}).catch(function(e){n(e)})})}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=r,cc._RF.pop()},{SDKApi:"SDKApi",SDKConst:"SDKConst"}],Panel:[function(e,t,n){"use strict";cc._RF.push(t,"a398dfZcENMo6l2XWkkThu4","Panel"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("UIManager"),a=cc._decorator,r=a.ccclass,o=a.property,s=a.menu,c=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).bg=null,e.touchBackgroundClose=!1,e.content=null,e.closeEvents=[],e.isHide=!1,e.animations=[],e.isNative="",e.isCountOpenAd=!1,e.isCountCloseAd=!0,e}return _createClass2(n,[{key:"onLoad",value:function(){var e=this;this.bg&&(this.bg.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()},this),this.bg.on(cc.Node.EventType.TOUCH_MOVE,function(e){e.stopPropagation()},this),this.bg.on(cc.Node.EventType.TOUCH_END,function(t){t.stopPropagation(),e.touchBackgroundClose&&e.close()},this),this.bg.on(cc.Node.EventType.MOUSE_ENTER,function(e){e.stopPropagation()},this)),this.content&&(this.content.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation()},this),this.content.on(cc.Node.EventType.TOUCH_MOVE,function(e){e.stopPropagation()},this),this.content.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation()},this),this.content.on(cc.Node.EventType.MOUSE_ENTER,function(e){e.stopPropagation()},this)),this.node.isModal=!0,this.scheduleOnce(function(){e.enterPlay()})}},{key:"showModal",value:function(e){this.node.getComponents(cc.Component).forEach(function(t){var n=t;n.onShow&&n.onShow.apply(t,e)}),cc.director.getScene().addChild(this.node)}},{key:"close",value:function(e){var t=this;this.handleAdHide(),this.isHide&&e?i.default.hdiePanel(e,this):(this.closeEvents.forEach(function(e){e.emit([t])}),this.getComponents(cc.Component).forEach(function(e){var t=e;t.onHide&&t.onHide.apply(e)}),this.node.removeFromParent())}},{key:"enterPlay",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t,n,i=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.animations.forEach(function(e){e.isPlayed=!1}),this.animations.sort(function(e,t){var n=1e5*(e.sort-t.sort);return(n+=1e3*(e.level-t.level))+1*(e.index-t.index)}),t=_regenerator.default.mark(function e(t){var n,a;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=i.animations[t]).isPlayed){e.next=12;break}if(0!=n.group){e.next=8;break}return n.isPlayed=!0,e.next=6,n.play();case 6:e.next=12;break;case 8:return(a=i.animations.filter(function(e){return e.group==n.group})).forEach(function(e){e.isPlayed=!0}),e.next=12,Promise.all(a.map(function(e){return e.play()}));case 12:case"end":return e.stop()}},e)}),n=0;case 3:if(!(n<this.animations.length)){e.next=8;break}return e.delegateYield(t(n),"t0",5);case 5:n++,e.next=3;break;case 8:case"end":return e.stop()}},e,this)}))}},{key:"testPlay",value:function(){for(var e=0;e<this.animations.length;e++)this.animations[e].init();this.enterPlay()}},{key:"onDisable",value:function(){i.default.nextPanel()}},{key:"init",value:function(){}},{key:"handleAdShow",value:function(){}},{key:"handleAdHide",value:function(){}}]),n}(cc.Component);__decorate([o(cc.Node)],c.prototype,"bg",void 0),__decorate([o({tooltip:"\u70b9\u51fb\u80cc\u666f\u5173\u95ed"})],c.prototype,"touchBackgroundClose",void 0),__decorate([o({tooltip:"\u5185\u5bb9\u56fe\u5c42",type:cc.Node})],c.prototype,"content",void 0),__decorate([o({tooltip:"\u5185\u5bb9\u56fe\u5c42",type:cc.Component.EventHandler})],c.prototype,"closeEvents",void 0),__decorate([o({tooltip:"\u662f\u5426\u9690\u85cf,\u52fe\u9009\u8c03\u7528close\u4e0d\u9500\u6bc1"})],c.prototype,"isHide",void 0),c=__decorate([r,s("\u89c6\u56fe/Panel")],c),n.default=c,cc._RF.pop()},{UIManager:"UIManager"}],PotItem:[function(e,t,n){"use strict";cc._RF.push(t,"362b1yuDiRFXqWbc9LWyfPD","PotItem"),Object.defineProperty(n,"__esModule",{value:!0}),n.PotItem=void 0;var i=e("GameData"),a=e("utils"),r=cc._decorator,o=r.ccclass,s=r.property,c=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).mask=null,e.icon=null,e.btnGet=null,e}return _createClass2(n,[{key:"updateView",value:function(e,t){this.game=e,this.btnGet.active=t==i.GameData.data.level,this.mask.node.active=t==i.GameData.data.level,__awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.utils.loadCndFlowerSprite(t+1);case 2:this.mask.spriteFrame=this.icon.spriteFrame=e.sent;case 3:case"end":return e.stop()}},e,this)}))}},{key:"onGet",value:function(){console.log("1111"),this.game.onClick(null,"start")}}]),n}(cc.Component);__decorate([s(cc.Sprite)],c.prototype,"mask",void 0),__decorate([s(cc.Sprite)],c.prototype,"icon",void 0),__decorate([s(cc.Node)],c.prototype,"btnGet",void 0),c=__decorate([o],c),n.PotItem=c,cc._RF.pop()},{GameData:"GameData",utils:"utils"}],ProgessItem:[function(e,t,n){"use strict";cc._RF.push(t,"814d0QggIFA04UTyJhVGZSO","ProgessItem"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("GameData"),a=e("utils"),r=cc._decorator,o=r.ccclass,s=r.property,c=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).nodes=[],e.garyNodes=[],e.FlowerIcon=null,e}return _createClass2(n,[{key:"refresh",value:function(e){var t=e<=i.GameData.data.level;this.nodes.forEach(function(e){e.active=t}),this.garyNodes.forEach(function(e){e.active=!t}),e==i.GameData.data.level&&(this.nodes[2].active=!1),this.nodes[0].getComponent(cc.Label).string=this.garyNodes[0].getComponent(cc.Label).string=e+1+"",this.nodes[0].getComponent(cc.Label).spacingX=this.garyNodes[0].getComponent(cc.Label).spacingX=-8,t?__awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.utils.loadCndFlowerSprite(e+1);case 2:this.FlowerIcon.spriteFrame=t.sent;case 3:case"end":return t.stop()}},t,this)})):this.FlowerIcon.spriteFrame=null}}]),n}(cc.Component);__decorate([s(cc.Node)],c.prototype,"nodes",void 0),__decorate([s(cc.Node)],c.prototype,"garyNodes",void 0),__decorate([s(cc.Sprite)],c.prototype,"FlowerIcon",void 0),c=__decorate([o],c),n.default=c,cc._RF.pop()},{GameData:"GameData",utils:"utils"}],PropPanel:[function(e,t,n){"use strict";cc._RF.push(t,"93f48ADwUNIsYbywdxtMBtc","PropPanel"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("Panel"),a=e("shareTools"),r=cc._decorator,o=r.ccclass,s=r.property,c=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).nodes=[],e.title=null,e.txtDesc=null,e.callback=null,e.type=null,e}return _createClass2(n,[{key:"init",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.callback=e,this.type=t,this.title.string=["Adapt","Pack","Clear"][t-1],this.txtDesc.string=["Randomly refresh the\n remaining flowers","Randomly pack a pot\n of flowers","Empty the grid \nof flowers"][t-1],this.nodes.forEach(function(e,n){e.active=n==t-1});case 1:case"end":return n.stop()}},n,this)}))}},{key:"onClick",value:function(e,t){var n=this;switch(t){case"close":this.close();break;case"video":var i=[a.ShareKey.prop_xipai,a.ShareKey.prop_pack,a.ShareKey.prop_clear];a.ShareTools.share(i[this.type-1],{success:function(){n.close(),n.callback&&n.callback(!0)}})}}}]),n}(i.default);__decorate([s(cc.Node)],c.prototype,"nodes",void 0),__decorate([s(cc.Label)],c.prototype,"title",void 0),__decorate([s(cc.Label)],c.prototype,"txtDesc",void 0),c=__decorate([o],c),n.default=c,cc._RF.pop()},{Panel:"Panel",shareTools:"shareTools"}],QQPay:[function(e,t,n){"use strict";cc._RF.push(t,"92fa2B2x6VBSqvJ4a+Jywre","QQPay"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SDKEnum"),r=e("SDKApi"),o=e("DataService"),s=e("WxSystem"),c=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"pay",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(s,c){var u=i.GAMEDATA.MidasPay;u.Mode,u.OfferId,u.ZoneId,u.CurrencyType,u.Platform,o.default.I.EnvEnum,a.EnvCode.Prod;var l=o.default.I.Platform;e.money;var d="";for(var h in n)d+="".concat(h,"=").concat(n[h],"&");d=d.substring(0,d.length-1),d=encodeURIComponent(d);var f=Object.assign(Object.assign({},t.buildParams()),{extend:d,orderid:e.orderid,goodid:e.goodid,money:e.money,platform:l});console.log("payParams",f),r.SDKApi.qqOrderReport(f).then(function(e){if(console.log("res",e),e.code)c(e);else{var t=e.data,n=t.prepayId,i=t.starCurrency,a=t.setEnv;qq.requestMidasPayment({prepayId:n,starCurrency:i,setEnv:a,success:function(){s({code:0,msg:"\u652f\u4ed8\u6210\u529f\uff01"})},fail:function(e){s({code:e.errCode,msg:"\u652f\u4ed8\u5931\u8d25"})},complete:function(e){console.log("\u8c03\u7528\u5b8c\u6210",e)}})}})})}},{key:"handlePaySuccess",value:function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3;return __awaiter(this,void 0,void 0,_regenerator.default.mark(function c(){var u,l,d,h;return _regenerator.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(l in u="",t)u+="".concat(l,"=").concat(t[l],"&");u=u.substring(0,u.length-1),u=encodeURIComponent(u),d=Object.assign(Object.assign({},this.buildParams()),{extend:u,midasenv:o.default.I.EnvEnum===a.EnvCode.Prod?0:1,orderid:e.orderid,payid:e.payid,goodid:e.goodid,type:1,money:e.money,platform:e.platform}),h=this,r.SDKApi.qqOrderReport(d).then(function(a){a.code?(s=Math.min(2*s,6e4),setTimeout(function(){h.handlePaySuccess(e,t,n,i,s)},s)):n(a)});case 6:case"end":return c.stop()}},c,this)}))}},{key:"handlePayError",value:function(e,t,n,i){console.log("\u652f\u4ed8\u5931\u8d25",JSON.stringify(n));var s=2;n.errCode+""=="1"&&(s=3);var c="";for(var u in t)c+="".concat(u,"=").concat(t[u],"&");c=c.substring(0,c.length-1),c=encodeURIComponent(c);var l=Object.assign(Object.assign({},this.buildParams()),{extend:c,midasenv:o.default.I.EnvEnum===a.EnvCode.Prod?0:1,orderid:e.orderid,payid:e.payid,goodid:e.goodid,type:s,money:e.money,platform:e.platform});r.SDKApi.qqOrderReport(l),i(n)}},{key:"buildParams",value:function(){var e=i.GAMEDATA.game_id,t=o.default.I.ChannelId;return{gameid:e,openid:o.default.I.OpenId,channel:t,brand:s.default.I.brand,model:s.default.I.model,version:s.default.I.version,system:s.default.I.system,sdkversion:s.default.I.SDKVersion,scene:o.default.I.Scene+"",uid:o.default.I.UserId,token:o.default.I.Token,env:1===o.default.I.EnvEnum?"pre":"prod"}}}],[{key:"I",get:function(){return this._instance||(this._instance=new e)}}]),e}();n.default=c,cc._RF.pop()},{DataService:"DataService",SDKApi:"SDKApi",SDKConst:"SDKConst",SDKEnum:"SDKEnum",WxSystem:"WxSystem"}],RandomUtils:[function(e,t,n){"use strict";cc._RF.push(t,"df631ILWXtJr4JBGU3Clf7a","RandomUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"randomArray",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"rand",value:function(e,t){return e=e||0,t=t||1e4,Math.floor(1e4*Math.random())%(t-e)+e}},{key:"rang",value:function(e,t){return Math.round(Math.random()*(t-e)+e)}},{key:"randFloat",value:function(e,t){return parseFloat((Math.random()*(t-e)+e).toFixed(2))}}]),e}(),cc._RF.pop()},{}],RankManager:[function(e,t,n){"use strict";cc._RF.push(t,"72820lIDm1Cob+X4p5dj3LN","RankManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.OpenDataKey=void 0;var i=e("SDKTools"),a=e("SDKUtils");function r(e){var t="",n=!1;switch(e.type){case"touchstart":t="listTouchStart";break;case"touchmove":t="listTouchMove";break;case"touchend":t="listTouchEnd",n=!0;break;case"touchcancel":t="listTouchEnd",n=!0}wx.postMessage({message:t,data:n?"{}":JSON.stringify({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})})}var o,s,c=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"touchStart",value:function(e){e.type="touchstart",r(e)}},{key:"touchMove",value:function(e){e.type="touchmove",r(e)}},{key:"touchEnd",value:function(e){e.type="touchend",r(e)}},{key:"touchCancel",value:function(e){e.type="touchcancel",r(e)}},{key:"updateUserWithKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isShowGameOver=!0;var n=[],a=[];for(var r in e)n.push(r),a.push(e[r]);wx.postMessage({message:"updateUser",data:{keys:n,values:a,isForceUpdate:t,openid:i.SDKTools.openId}})}},{key:"showLevelRankList",value:function(){this.rankType=o.Levels,wx.postMessage({message:"showLevelRank",data:{key:"level"}}),this.scheduleRank()}},{key:"scheduleRank",value:function(){this.onSchedule()}},{key:"onSchedule",value:function(){var e;(e=this.rankType===o.Levels?wx.getOpenDataContext().canvas.levelList:wx.getOpenDataContext().canvas.rankList)&&this.filterSelfRank(e)}},{key:"filterSelfRank",value:function(e){var t=i.SDKTools.openId;if(a.default.isArray(e))for(var n=0,r=e.length;n<r&&e[n].openid!==t;n++);else for(var o in e)if(e[o].openid===t){parseInt(o);break}}},{key:"getRankType",value:function(){return this.rankType}},{key:"showRankList",value:function(e){"undefined"!=typeof wx&&(this.isShowRank=!0,wx.postMessage({message:"showFriendRank",data:{key:"score",openid:i.SDKTools.openId,mode:e}}),wx.onTouchStart(this.touchStart),wx.onTouchMove(this.touchMove),wx.onTouchEnd(this.touchEnd),wx.onTouchCancel(this.touchCancel),this.scheduleRank())}},{key:"hideRankList",value:function(){"undefined"!=typeof wx&&(this.isShowRank=!1,wx.postMessage({message:"dismissFriendRank"}),wx.offTouchStart(this.touchStart),wx.offTouchMove(this.touchMove),wx.offTouchEnd(this.touchEnd),wx.offTouchCancel(this.touchCancel))}},{key:"showRecommendFriends",value:function(){this.isShowRank=!0,wx.postMessage({message:"recommendFriends"})}},{key:"clickRecommendFriends",value:function(e){wx.postMessage({message:"clickRecommendFriends",idx:e})}},{key:"showGameOverRank",value:function(e,t){"undefined"!=typeof wx&&wx.postMessage({message:"showGameResultRank",data:{key:"score",value:e,mode:t,openid:i.SDKTools.openId,updateObj:{key:"score",less:!0,value:JSON.stringify({score:e}),openid:i.SDKTools.openId}}})}},{key:"hideGameOverRank",value:function(){"undefined"!=typeof wx&&wx.postMessage({message:"dismissFriendRank"})}},{key:"showTips",value:function(){"undefined"!=typeof wx&&wx.postMessage({message:"showTips",data:{openid:i.SDKTools.openId}})}},{key:"hideTips",value:function(){"undefined"!=typeof wx&&wx.postMessage({message:"dismissFriendRank"})}}],[{key:"I",get:function(){return this._instance||(this._instance=new e)}}]),e}();n.default=c,(s=o||(o={}))[s.None=0]="None",s[s.Friend=1]="Friend",s[s.Group=2]="Group",s[s.Progress=3]="Progress",s[s.Levels=4]="Levels",function(e){e[e.INIT="init"]="INIT",e[e.OVER="overRank"]="OVER",e[e.FRIEND="showFriendRank"]="FRIEND",e[e.recommendFriends="recommendFriends"]="recommendFriends",e[e.HIDE="hide"]="HIDE",e[e.OPEN_PASS="passRank"]="OPEN_PASS",e[e.UPDATE_PASS="updatePass"]="UPDATE_PASS"}(n.OpenDataKey||(n.OpenDataKey={})),cc._RF.pop()},{SDKTools:"SDKTools",SDKUtils:"SDKUtils"}],ResManager:[function(e,t){"use strict";cc._RF.push(t,"98c5eweVIJFxLjbViesQP8c","ResManager"),cc._RF.pop()},{}],RetPanel:[function(e,t,n){"use strict";cc._RF.push(t,"69c0bvmN6pPVZfY9y4H3/fU","RetPanel"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("AudioManager"),a=e("ConfigHelper"),r=e("utils"),o=e("Panel"),s=e("SDKTools"),c=cc._decorator,u=c.ccclass,l=c.property,d=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).sucNodes=[],e.failNodes=[],e.sp1=null,e.sp3=null,e.animNode=null,e.FlowerIcon=null,e.imgProgess=null,e.txtProgess=null,e}return _createClass2(n,[{key:"init",value:function(e,t,n,o){var s=this;if(this.callback=e,__awaiter(s,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.utils.loadCndFlowerSprite(n+1);case 2:this.imgProgess.spriteFrame=this.FlowerIcon.spriteFrame=e.sent;case 3:case"end":return e.stop()}},e,this)})),this.failNodes.forEach(function(e){e.active=t}),this.sucNodes.forEach(function(e){e.active=!t}),this.sp1.clearTracks(),this.sp3.clearTracks(),t)this.sp3.setAnimation(0,"enter_lose",!1),this.sp3.setCompleteListener(function(){s.sp3.setAnimation(0,"loop_lose",!0)}),i.default.play(i.AudioType.shibai),this.imgProgess.node.active=!0,this.txtProgess.node.active=!0,this.imgProgess.fillRange=-(1-o),this.txtProgess.string="".concat(Math.floor(100*o),"%");else{this.sp1.setAnimation(0,"enter_win",!1),this.sp1.setCompleteListener(function(){s.sp1.setAnimation(0,"loop_win",!0)}),i.default.play(i.AudioType.wancheng),this.imgProgess.node.active=!1,this.txtProgess.node.active=!1;var c=a.default.flowerCfg[n];this.sucNodes[3].getComponent(cc.Label).string=c.name}this.animNode.scale=0,cc.tween(this.animNode).delay(.2).to(.2,{scale:1}).start()}},{key:"onClick",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="3"===e.t0?3:"2"===e.t0?4:"1"===e.t0?6:7;break;case 3:this.callback&&this.callback(3),this.close();case 4:return this.callback&&this.callback(2),this.close(),1==s.SDKTools.getParamsInt("next_show_ad",0)&&s.SDKTools.createInterstitialAd(),e.abrupt("break",7);case 6:this.callback&&this.callback(1),this.close();case 7:case"end":return e.stop()}},e,this)}))}}]),n}(o.default);__decorate([l(cc.Node)],d.prototype,"sucNodes",void 0),__decorate([l(cc.Node)],d.prototype,"failNodes",void 0),__decorate([l(sp.Skeleton)],d.prototype,"sp1",void 0),__decorate([l(sp.Skeleton)],d.prototype,"sp3",void 0),__decorate([l(cc.Node)],d.prototype,"animNode",void 0),__decorate([l(cc.Sprite)],d.prototype,"FlowerIcon",void 0),__decorate([l(cc.Sprite)],d.prototype,"imgProgess",void 0),__decorate([l(cc.Label)],d.prototype,"txtProgess",void 0),d=__decorate([u],d),n.default=d,cc._RF.pop()},{AudioManager:"AudioManager",ConfigHelper:"ConfigHelper",Panel:"Panel",SDKTools:"SDKTools",utils:"utils"}],SDKApi:[function(e,t,n){"use strict";cc._RF.push(t,"0605fxjPCdKBYVMmDj1aZA3","SDKApi"),Object.defineProperty(n,"__esModule",{value:!0}),n.SDKApi=void 0;var i=e("SDKHttp"),a=e("SDKConst"),r=e("DataService"),o=_createClass2(function e(){_classCallCheck2(this,e)});n.SDKApi=o,o.Version=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.default).httpPost.apply(e,["".concat(a.VersionHost),""].concat(n))},o.ShareList=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.ShareList].concat(n))},o.getConfig=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.getConfig].concat(n))},o.subscribe=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.subscribe].concat(n))},o.saveData=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.saveData].concat(n))},o.getData=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.getData].concat(n))},o.rankAdd=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.rankAdd].concat(n))},o.totalrankAdd=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.totalrankAdd].concat(n))},o.rankList=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.rankList].concat(n))},o.totalrankList=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.totalrankList].concat(n))},o.adList=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.adList].concat(n))},o.behavior=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.behavior].concat(n))},o.attribute=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.attribute].concat(n))},o.wxencrypted=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.wxencrypted].concat(n))},o.checkmsg=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.checkmsg].concat(n))},o.updateNickname=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.GameApi,a.HostKeys.updateNickname].concat(n))},o.Login=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.LoginApi,a.HostKeys.Login].concat(n))},o.reftoken=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.LoginApi,a.HostKeys.Reftoken].concat(n))},o.weakLogin=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.LoginApi,a.HostKeys.weakLogin].concat(n))},o.logOut=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.logOut].concat(n))},o.loadingFinish=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.loadingFinish].concat(n))},o.active=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.Active].concat(n))},o.share=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.Share].concat(n))},o.adStat=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.AdStat].concat(n))},o.stay=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.stay].concat(n))},o.behaviors=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.behaviors].concat(n))},o.dot=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.dot].concat(n))},o.jumps=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.jumps].concat(n))},o.level=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.level].concat(n))},o.role=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.role].concat(n))},o.client_log=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.client_log].concat(n))},o.consume=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.consume].concat(n))},o.daystay=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.daystay].concat(n))},o.loading=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpGet.apply(e,[r.default.I.DotApi,a.HostKeys.loading].concat(n))},o.pay=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.OrderApi,a.HostKeys.orderReport].concat(n))},o.bytedanceOrderReport=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.OrderApi,a.HostKeys.bytedanceOrderReport].concat(n))},o.qqOrderReport=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.OrderApi,a.HostKeys.qqOrderReport].concat(n))},o.orderQuery=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.OrderApi,a.HostKeys.orderQuery].concat(n))},o.preorder=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.OrderApi,a.HostKeys.preorder].concat(n))},o.goodslist=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=i.default).httpPost.apply(e,[r.default.I.OrderApi,a.HostKeys.goodslist].concat(n))},cc._RF.pop()},{DataService:"DataService",SDKConst:"SDKConst",SDKHttp:"SDKHttp"}],SDKBaseData:[function(e,t,n){"use strict";cc._RF.push(t,"e33d52HHfpOAJwy6Ldzbs14","SDKBaseData"),Object.defineProperty(n,"__esModule",{value:!0});var i=_createClass2(function e(){_classCallCheck2(this,e)});n.default=i,i.SimulateShareTime=3e3,cc._RF.pop()},{}],SDKConst:[function(e,t,n){"use strict";cc._RF.push(t,"fde1cj/pOFNIIUs1XDZ56kw","SDKConst"),Object.defineProperty(n,"__esModule",{value:!0}),n.SDKDotType=n.SceneCode=n.Method=n.BannerError=n.ShareVideoError=n.InterstitalAdError=n.ErrorCode=n.BannerType=n.StorageKeys=n.HostKeys=n.GMHost=n.OrderHost=n.GameHost=n.DotHost=n.LoginHost=n.VersionHost=n.sdkEnv=n.__LOG__=n.SDKVersion=n.GAMEDATA=void 0,n.GAMEDATA={game_id:"10082",channel_id:"10082",version:"1.1.4",appkey:"87044d3be612ad539d6fe1edf40c4a82",interstitialAdId:"adunit-50644bf9c12d7b97",bannerId:"adunit-ea01a019cb44581c",customId:"adunit-949e634f5ea74b5d",videoAd:"adunit-d355d8d3c570ffd7",shareMessageToFriend:{scene:10,sharekey:"shareMessageToFriendScene",share_id:26},default_share:{content:"\u4e00\u8d77\u6765\u73a9\u5440\uff01",icon:"https://cdn-wxsdk.miso-lab.com/b8/a0f592c537cdbcb70909e8fa49b3ae.jpg",id:"9999",key:"default",title:"\u9ed8\u8ba4",typ:1,videoid:""},MidasPay:{OfferId:"1450031480",ZoneId:"1",Mode:"game",CurrencyType:"CNY",Platform:""}},n.SDKVersion="v1.0.16",n.__LOG__=!1,n.sdkEnv={isDebug:!1},n.VersionHost="https://wxsdk-ver.d3games.com/version",n.LoginHost={Prod:"https://login-wxsdk.d3games.com/",Pre:"https://login-wxsdk-pre.d3games.com/"},n.DotHost={Prod:"https://wxsdk-api.cn-beijing.log.aliyuncs.com/",Pre:"https://wxsdk-api.cn-beijing.log.aliyuncs.com/"},n.GameHost={Prod:"https://wxsdk-data.d3games.com/",Pre:"https://wxsdk-data-pre.d3games.com/"},n.OrderHost={Prod:"https://wxsdk-order.d3games.com/",Pre:"https://wxsdk-order-pre.d3games.com/"},n.GMHost={Prod:"https://hermes.d3games.com/",Pre:"http://wxadmin.pre.d3games.com/"},n.HostKeys={Active:"logstores/login/track",AdStat:"logstores/adlog/track",logOut:"logstores/times/track",Share:"logstores/share/track",loadingFinish:"logstores/firstsecren/track",stay:"logstores/stay/track",behaviors:"logstores/behaviors/track",dot:"logstores/events/track",jumps:"logstores/jumps/track",level:"logstores/level/track",role:"logstores/role/track",client_log:"logstores/client_log/track",consume:"logstores/consume/track",daystay:"logstores/daystay/track",loading:"logstores/loading/track",Login:"api/login",weakLogin:"api/login",Reftoken:"api/reftoken",ShareList:"api/share/lst",getConfig:"api/game/config",subscribe:"api/subscribe/add",saveData:"api/member/savedata",getData:"api/member/getdata",rankAdd:"api/rank/add",rankList:"api/rank/list",totalrankAdd:"game/totalrank/add",totalrankList:"game/totalrank/list",adList:"api/adplan/list",behavior:"api/douyin/behavior",attribute:"api/member/attribute/set",wxencrypted:"api/wx/encrypted",checkmsg:"api/wx/checkmsg",updateNickname:"api/member/update/nickname",orderReport:"api/order/v2/mimas/new",orderQuery:"api/order/query",preorder:"api/order/v2/preorder",bytedanceOrderReport:"api/order/v2/bytedance",qqOrderReport:"api/order/v2/qq",goodslist:"api/v2/goodslist"},n.StorageKeys={SDKAdVtKey:"__pcsdk_advt_key__",SDKAdMvKey:"__pcsdk_admv_key__",SDKAdMvNewKey:"__pcsdk_admv_new_key__",SDKTokenKey:"__pcsdk_token_key__",SDKLaunchKey:"__pcsdk_launch_key__",SDKEventLaunchKey:"__pcsdk_event_launch",SDKOnlienKey:"__pcsdk_online_env_key__",SDKStartUpKey:"__pcsdk_startup_key__",SDKDayAllShareNumKey:"__pcsdk_day_allsharenum_key__",SDKDayAllVideoNumKey:"__pcsdk_day_allvideonum_key__",SDKIntegralShareNumKey:"__pcsdk_integral_sharenum_key__",SDKVideoOverShareNumKey:"__pcsdk_video_over_sharenum_$0_key__",SDKShareRatioKey:"__pcsdk_shareratio_key__",SDKUserShieldKey:"__pcsdk_usershield_key__"},n.BannerType={},n.ErrorCode={UnKnow:{code:1001,msg:"\u672a\u77e5\u9519\u8bef"},InvalidLogin:{code:1e4,msg:"\u767b\u9646\u5931\u6548"}},n.InterstitalAdError={AdQuit:{code:1e3,msg:"\u8981\u770b\u5b8c\u5e7f\u544a\u54e6!"},AdFail:{code:1001,msg:"\u52a0\u8f7d\u5e7f\u544a\u5931\u8d25!"},AdInvalid:{code:999,msg:"\u5e7f\u544aUID\u4e0d\u5b58\u5728!"},AdNotOpen:{code:1002,msg:"\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u6682\u4e0d\u652f\u6301!"},AdPlaying:{code:1003,msg:"\u6b63\u5728\u52a0\u8f7d\u4e2d..."}},n.ShareVideoError={VideoQuit:{code:1e3,msg:"\u8981\u770b\u5b8c\u89c6\u9891\u54e6!"},VideoFail:{code:1001,msg:"\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25!"},VideoInvalid:{code:999,msg:"\u89c6\u9891UID\u4e0d\u5b58\u5728!"},VideoNotOpen:{code:1002,msg:"\u89c6\u9891\u7ec4\u4ef6\u672a\u5f00\u653e!"},VideoPlaying:{code:1003,msg:"\u6b63\u5728\u89c2\u770b\u89c6\u9891\u4e2d..."},ShareFail:{code:1004,msg:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5c1d\u8bd5\u53d1\u9001\u81f3\u4e0d\u540c\u7fa4!"},ShareSame:{code:1005,msg:"\u522b\u603b\u9a9a\u6270\u8fd9\u4e2a\u7fa4\uff0c\u6362\u4e2a\u7fa4\u5206\u4eab\u5427!"},ShareNotGroup:{code:1006,msg:"\u8bf7\u5206\u4eab\u5230\u7fa4\u54e6!"},NotNet:{code:1007,msg:"\u7f51\u7edc\u9519\u8bef~"},ShareRuleFail:{code:1008,msg:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5c1d\u8bd5\u53d1\u9001\u81f3\u4e0d\u540c\u7fa4!"},ShareOverLimit:{code:1009,msg:"\u4eca\u65e5\u5df2\u8fbe\u5206\u4eab\u4e0a\u9650\u6b21\u6570\uff0c\u8bf7\u660e\u65e5\u518d\u6765"}},n.BannerError={BannerInvalid:{code:1e3,msg:"\u5e7f\u544a uid\u4e0d\u80fd\u4e3a\u7a7a!"},BannerFail:{code:1001,msg:"\u52a0\u8f7d\u5e7f\u544a\u5931\u8d25!"},BannerNotOpen:{code:1002,msg:"\u52a0\u8f7d\u5e7f\u544a\u5931\u8d25!"}},n.Method={Get:"GET",Post:"POST"},n.SceneCode={WX_STORE:1104,WX_SHARE_FRIEND:1007,WX_SHARE_GROUP:1008,WX_SHARE_TICKET:1044,WX_INTEGRAL:1139},n.SDKDotType={Share:1001},cc._RF.pop()},{}],SDKDefault:[function(e,t){"use strict";cc._RF.push(t,"9cadbjUZ/xDz6PNiGKpLpYX","SDKDefault"),cc._RF.pop()},{}],SDKEnum:[function(e,t,n){"use strict";var i;cc._RF.push(t,"cdd6618qIhGSaRZnOXnvzHW","SDKEnum"),Object.defineProperty(n,"__esModule",{value:!0}),n.AdType=n.NetworkType=n.DOT_AD_STATUS=n.DOT_AD_TYPE=n.DOT_SHARE_TYPE=n.TacticType=n.ShareVideoFrom=n.ShareVideoType=n.BannerStat=n.Gender=n.EnvCode=void 0,(i=n.EnvCode||(n.EnvCode={}))[i.Prod=2]="Prod",i[i.Pre=1]="Pre",function(e){e[e.Invalid=-1]="Invalid",e[e.Unknown=0]="Unknown",e[e.Male=1]="Male",e[e.Female=2]="Female"}(n.Gender||(n.Gender={})),function(e){e[e.Click=0]="Click",e[e.Cancel=-1]="Cancel"}(n.BannerStat||(n.BannerStat={})),function(e){e[e.None=-1]="None",e[e.Share=1]="Share",e[e.Video=2]="Video",e[e.VideoToShare=3]="VideoToShare"}(n.ShareVideoType||(n.ShareVideoType={})),function(e){e[e.None=0]="None",e[e.Share=1]="Share",e[e.ShareAysnc=2]="ShareAysnc",e[e.Video=3]="Video"}(n.ShareVideoFrom||(n.ShareVideoFrom={})),function(e){e[e.ShareLaunch=10]="ShareLaunch",e[e.ShareInterrupt=11]="ShareInterrupt",e[e.ShareSuccess=12]="ShareSuccess",e[e.ShareEnterLaunch=13]="ShareEnterLaunch",e[e.ShareEnterGame=14]="ShareEnterGame",e[e.VideoFetchSuccess=20]="VideoFetchSuccess",e[e.VideoPlayInterrupt=21]="VideoPlayInterrupt",e[e.VideoPlayComplete=22]="VideoPlayComplete",e[e.VideoFetchFail=23]="VideoFetchFail",e[e.InterstitialAdSuccess=30]="InterstitialAdSuccess",e[e.InterstitialAdFail=31]="InterstitialAdFail"}(n.TacticType||(n.TacticType={})),function(e){e[e.default=0]="default",e[e.share=1]="share",e[e.click=2]="click"}(n.DOT_SHARE_TYPE||(n.DOT_SHARE_TYPE={})),function(e){e[e.default=0]="default",e[e.banner=1]="banner",e[e.video=2]="video",e[e.interstitial=3]="interstitial",e[e.grid=4]="grid",e[e.custom=5]="custom"}(n.DOT_AD_TYPE||(n.DOT_AD_TYPE={})),function(e){e[e.default=0]="default",e[e.request=1]="request",e[e.rt=2]="rt",e[e.show=3]="show",e[e.click=4]="click",e[e.complete=5]="complete",e[e.interrupt=6]="interrupt",e[e.fail=7]="fail"}(n.DOT_AD_STATUS||(n.DOT_AD_STATUS={})),function(e){e.Wifi="wifi",e["2g"]="2g",e["3g"]="3g",e["4g"]="4g",e.Unknown="unknown",e.None="none"}(n.NetworkType||(n.NetworkType={})),function(e){e[e.default=0]="default",e[e.draw=1]="draw",e[e.guessLike=2]="guessLike",e[e.grid=3]="grid",e[e.play=4]="play"}(n.AdType||(n.AdType={})),cc._RF.pop()},{}],SDKEventCenter:[function(e,t,n){"use strict";cc._RF.push(t,"c30c01k2T1F0pcAUD3fAsmZ","SDKEventCenter"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){_classCallCheck2(this,e),this._events={}}return _createClass2(e,[{key:"getEvents",value:function(){return this._events||(this._events={})}},{key:"getListeners",value:function(e){var t=this.getEvents();return t[e]||(t[e]=[])}},{key:"getListenersAsObject",value:function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n}},{key:"isValidListener",value:function(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=_typeof2(e))&&this.isValidListener(e.listener)}},{key:"getOnceReturnValue",value:function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue}},{key:"onceReturnValue",set:function(e){this._onceReturnValue=e}},{key:"indexOf",value:function(e,t,n){for(var i=e.length;i--;)if(e[i].listener===t&&(!n||e[i].context===n))return i;return-1}},{key:"add",value:function(e,t,n){if(!e||!e.constructor)throw new TypeError("evt must be a string");if(!this.isValidListener(t))throw new TypeError("listener must be a function");var i,a=this.getListenersAsObject(e),r="object"==_typeof2(t);for(i in a)a.hasOwnProperty(i)&&-1===this.indexOf(a[i],t,n)&&a[i].push(r?t:{listener:t,context:n,once:!1});return this}},{key:"once",value:function(e,t,n){return this.add(e,{listener:t,context:n,once:!0})}},{key:"remove",value:function(e,t,n){var i,a,r=this.getListenersAsObject(e);for(a in r)r.hasOwnProperty(a)&&-1!==(i=this.indexOf(r[a],t,n))&&r[a].splice(i,1);return this}},{key:"removeAll",value:function(e){var t=_typeof2(e),n=this.getEvents();return"string"===t?delete n[e]:delete this._events,this}},{key:"trigger",value:function(e){for(var t,n,i,a,r=this.getListenersAsObject(e),o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];for(a in r)if(r.hasOwnProperty(a))for(t=r[a].slice(0),i=0;i<t.length;i++)!0===(n=t[i]).once&&this.remove(e,n.listener,n.context),n.listener.apply(n.context||this,s||[])===this.getOnceReturnValue()&&this.remove(e,n.listener,n.context);return this}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.trigger.apply(this,[e].concat(n))}},{key:"defineEvent",value:function(e){return this.getListeners(e),this}},{key:"defineEvents",value:function(e){for(var t=0,n=e.length;t<n;t++)this.defineEvent(e[t]);return this}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=i,cc._RF.pop()},{}],SDKEventEnum:[function(e,t,n){"use strict";var i;cc._RF.push(t,"2e19dyU/7JJqLWFdXDxcvUk","SDKEventEnum"),Object.defineProperty(n,"__esModule",{value:!0}),n.SDKEventEnum=void 0,(i=n.SDKEventEnum||(n.SDKEventEnum={})).APP_SHOW="app.show",i.APP_HIDE="app.hide",i.TACTIC_UPDATE="tactic.update",i.BANNER_HIDE="banner.hide",i.BANNER_SHOW="banner.show",i.BANNER_ERROR="banner.error",i.BANNER_DESTORY="banner.destory",i.BANNER_SUCCESS="banner.success",i.ONLINE_SUCCESS="online.success",cc._RF.pop()},{}],SDKHttp:[function(e,t,n){"use strict";cc._RF.push(t,"a6caciHdkVIgbGSxOtcd74H","SDKHttp"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SignUtils");n.default=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"httpRequest",value:function(e,t,n){return arguments.length>3&&void 0!==arguments[3]&&arguments[3],__awaiter(this,void 0,void 0,_regenerator.default.mark(function r(){return _regenerator.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r){if(n=Object.assign(Object.assign({},n),{ver:i.GAMEDATA.version,gameid:i.GAMEDATA.game_id,sign_type:"md5",time_stamp:Math.floor(Date.now()/1e3)+""}),(n=Object.assign(Object.assign({},n),{sign:a.default.I.createSign(n)}))&&"object"==_typeof2(n)&&(n=JSON.stringify(n)),n=n||"","GET"==t&&""!=n){n=JSON.parse(n);var o="";for(var s in n)o=o+"".concat(s)+"="+"".concat(n[s],"&");e+="?"+o,n=""}var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==c.readyState)if(c.status>=200&&c.status<400){var n=c.responseText;try{return n=JSON.parse(n),void(e.indexOf(".json")>-1?r({code:0,data:n,msg:n.msg,servertime:n.servertime}):r({code:+n.code,data:n.data,msg:n.msg,servertime:n.servertime}))}catch(t){return void r({msg:"JSON parse error:"+t.message,code:-1})}}else console.error(c.status,"\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25\uff01"),r({code:-1})},c.ontimeout=function(){r({msg:"\u8bf7\u6c42\u8d85\u65f6\uff01",code:-1})},c.onerror=function(){r({msg:"\u8bf7\u6c42\u5931\u8d25\uff01",code:-1})},c.onabort=function(){r({msg:"\u8bf7\u6c42\u5931\u8d25\uff01",code:-1})},c.open(t,e,!0),"POST"==t&&c.setRequestHeader("Content-Type","application/json;charset=utf-8"),c.timeout=3e3,c.send(n)}));case 1:case"end":return r.stop()}},r)}))}},{key:"withMock",value:function(e){return i.sdkEnv.isDebug&&window.MOCK&&window.MOCK[e]}},{key:"mockData",value:function(e){var t=window.MOCK[e];return Promise.resolve({code:+t.code,data:t.data,msg:t.msg})}},{key:"httpGet",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json";return __awaiter(this,void 0,void 0,_regenerator.default.mark(function a(){var r;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.withMock(t)){a.next=2;break}return a.abrupt("return",this.mockData(t));case 2:return t=e+t,a.next=5,this.httpRequest(t,"GET",n,i);case 5:return r=a.sent,a.abrupt("return",(this.onErrorResponse&&!r.code&&this.onErrorResponse(r),r));case 7:case"end":return a.stop()}},a,this)}))}},{key:"httpPost",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json";return __awaiter(this,void 0,void 0,_regenerator.default.mark(function a(){var r;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.withMock(t)){a.next=2;break}return a.abrupt("return",this.mockData(t));case 2:return t=e+t,a.next=5,this.httpRequest(t,"POST",n,i);case 5:return r=a.sent,a.abrupt("return",(this.onErrorResponse&&r.code&&this.onErrorResponse(r),r));case 7:case"end":return a.stop()}},a,this)}))}}]),e}(),cc._RF.pop()},{SDKConst:"SDKConst",SignUtils:"SignUtils"}],SDKShare:[function(e,t,n){"use strict";cc._RF.push(t,"e651bUTSQFPdJggZ31fe3Gn","SDKShare"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SimulateShare"),a=e("SDKConst"),r=e("LogService"),o=e("SDKEnum"),s=function(){function e(){_classCallCheck2(this,e),this.shareSimulate=!0}return _createClass2(e,[{key:"share",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(s,c){var u=t.title,l=t.imageUrl,d=t.query,h=t.imageUrlId,f=t.share_id,p=(t.withShareTicket,{title:u,imageUrl:l,query:d,imageUrlId:h||""}),v={success:function(t){a.__LOG__&&console.error("WxShare share success"),r.default.I.share(e,f,o.DOT_SHARE_TYPE.share),s(t)},fail:function(){a.__LOG__&&console.error("WxShare share fail"),c(Object.assign({},a.ShareVideoError.ShareNotGroup))},cancel:function(){a.__LOG__&&console.error("WxShare share cancel",null),c(null)}};n.shareSimulate&&!i.closeSimulate&&n.simulate(Object.assign({},v)),n.shareSimulate&&i.closeSimulate&&r.default.I.share(e,f,o.DOT_SHARE_TYPE.share),wx.shareAppMessage(p)})}},{key:"updateShareMenu",value:function(e){"undefined"!=typeof wx&&wx.updateShareMenu({withShareTicket:e})}},{key:"forward",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,i=e.title,r=e.imageUrl,o=e.query,s=e.imageUrlId;wx.onShareAppMessage(function(){var e={title:i,imageUrl:r,query:o,imageUrlId:s||"",success:function(e){a.__LOG__&&console.error("WxShare forward success"),t.success&&t.success.call(t.context,e)},fail:function(e){a.__LOG__&&console.error("WxShare forward fail"),t.fail&&t.fail.call(t.context,e)},cancel:function(){a.__LOG__&&console.error("WxShare forward cancel",null),t.fail&&t.fail.call(t.context,null)}};return n.shareSimulate&&!t.closeSimulate&&n.simulate(Object.assign({},e)),e}),wx.showShareMenu({})}},{key:"createQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},e);var t="";for(var n in e)t.length&&(t+="&"),t+="".concat(n,"=").concat(e[n]);return t}},{key:"simulate",value:function(e){i.default.I.bind(e)}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=s,cc._RF.pop()},{LogService:"LogService",SDKConst:"SDKConst",SDKEnum:"SDKEnum",SimulateShare:"SimulateShare"}],SDKTools:[function(e,t,n){"use strict";cc._RF.push(t,"4730aJaOstFHLw71RlyGHZu","SDKTools"),Object.defineProperty(n,"__esModule",{value:!0}),n.OnlineKeys=n.SDKTools=void 0;var i,a=e("SDKConst"),r=e("DateUtils"),o=e("WXSDK");n.SDKTools=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"isWx",get:function(){return"undefined"!=typeof wx}},{key:"isSupported",get:function(){return"object"==_typeof2(o.default)}},{key:"envNum",get:function(){return o.default.data.envEnum}},{key:"data",get:function(){return o.default.data}},{key:"scene",get:function(){return o.default.data.scene}},{key:"uid",get:function(){return o.default.data.userId}},{key:"channel",get:function(){return o.default.data.channelId}},{key:"openId",get:function(){return o.default.data.openId}},{key:"pon",get:function(){return o.default.data.pon}},{key:"isnew",get:function(){try{var e=r.default.today;return o.default.data.regTime===e}catch(i){return!1}}},{key:"isFirstLogin",get:function(){try{return 1===o.default.data.isnew}catch(i){return!1}}},{key:"isAfterTime",value:function(e){try{var t=new Date(e).getTime();return new Date("".concat(o.default.data.regTime," 00:00:00")).getTime()>=t}catch(n){return!1}}},{key:"createBanner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.GAMEDATA.bannerId,t=arguments.length>1?arguments[1]:void 0;if(this.isWx)return o.default.ad.createBanner(e,t)}},{key:"showBanner",value:function(){this.isWx&&o.default.ad.showBanner()}},{key:"hideBanner",value:function(){this.isWx&&o.default.ad.hideBanner()}},{key:"destoryBanner",value:function(){this.isWx&&o.default.ad.destoryBanner()}},{key:"createInterstitialAd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.GAMEDATA.interstitialAdId;return this.isWx?o.default.ad.createInterstitialAd(e):Promise.resolve({code:1,msg:"\u6682\u65e0\u5e7f\u544a"})}},{key:"createCustom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.GAMEDATA.customId,t=arguments.length>1?arguments[1]:void 0;if(this.isWx)return o.default.ad.createCustom(e,t)}},{key:"showCustom",value:function(){this.isWx&&o.default.ad.showCustom()}},{key:"hideCustom",value:function(){this.isWx&&o.default.ad.hideCustom()}},{key:"destoryCustom",value:function(){this.isWx&&o.default.ad.destoryCustom()}},{key:"navigateToMiniProgram",value:function(e,t,n){if(this.isWx)return o.default.ad.navigateToMiniProgram(e,t,n)}},{key:"subScribe",value:function(e,t){if(this.isWx)return o.default.game.subScribe(e,t)}},{key:"login",value:function(e){return o.default.game.login(e)}},{key:"saveData",value:function(e,t){return o.default.game.saveData(e,t)}},{key:"getData",value:function(e){return o.default.game.getData(e)}},{key:"rankAdd",value:function(e,t){return o.default.game.rankAdd(e,t)}},{key:"updateRankData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.stringify(e);return o.default.game.saveData("rankData",t)}},{key:"rankList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.isWx?o.default.game.rankList(e,t,n):Promise.resolve({code:-1})}},{key:"totalrankAdd",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o.default.game.totalrankAdd(e,t,n,i)}},{key:"totalrankList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this.isWx?o.default.game.totalrankList(e,t,n,i):Promise.resolve({code:-1})}},{key:"wxencrypted",value:function(e,t){return this.isWx?o.default.game.wxencrypted(e,t):Promise.resolve({code:-1})}},{key:"adList",value:function(e){return this.isWx?o.default.game.adList(e):Promise.resolve({code:-1})}},{key:"addExposure",value:function(e,t){return this.isWx?o.default.stat.addExposure(e,t):Promise.resolve({code:-1})}},{key:"updateOnlineParams",value:function(){return o.default.online.updateOnlineConfig()}},{key:"getParamsInt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.default.online.getParamsInt(e.toString(),t)}},{key:"getParamsObj",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.default.online.getParamsObj(e.toString(),t)}},{key:"getParamsString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o.default.online.getParamsString(e.toString(),t)}},{key:"pay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.default.game.pay(e,t)}},{key:"orderQuery",value:function(e){return o.default.game.orderQuery(e)}},{key:"preorder",value:function(e,t){return o.default.game.preorder(e,t)}},{key:"goodslist",value:function(){return o.default.game.goodslist()}},{key:"role",value:function(e,t){return o.default.stat.role(e,t)}},{key:"behavior",value:function(){return o.default.game.behavior()}},{key:"checkmsg",value:function(e,t,n,i,a){return o.default.game.checkmsg(e,t,n,i,a)}},{key:"updateNickname",value:function(e,t){return o.default.game.updateNickname(e,t)}}]),e}(),(i=n.OnlineKeys||(n.OnlineKeys={})).isOpenInterstitialAdId="isOpenInterstitialAdId",i.shareRandom="shareRandom",i.switch_draw="switch_draw",i.switch_banner="switch_banner",i.switch_grid="switch_grid",i.calendar_level_max="calendar_level_max",i.over_show_ad="over_show_ad",cc._RF.pop()},{DateUtils:"DateUtils",SDKConst:"SDKConst",WXSDK:"WXSDK"}],SDKUtils:[function(e,t,n){"use strict";cc._RF.push(t,"b3b66e5R+5FhY6H4WYayepZ","SDKUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"isString",value:function(e){return"[object String]"===this.toString.call(e)}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isPlainObject",value:function(e){return null!==e&&"[object Object]"===this.toString.call(e)&&"isPrototypeOf"in e}},{key:"isObject",value:function(e){return null!==e&&"[object Object]"===this.toString.call(e)}},{key:"isArray",value:function(e){return"[object Array]"===this.toString.call(e)}},{key:"isNumber",value:function(e){return"number"==typeof e&&isFinite(e)}},{key:"isUndefined",value:function(e){return void 0===e||"undefined"===e}},{key:"hasProperty",value:function(e,t){return!!e&&e.hasOwnProperty(t)}},{key:"trim",value:function(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")}},{key:"isEmpty",value:function(e){return!e||void 0===e||this.isString(e)&&""===this.trim(e)||"null"===e}},{key:"covertArray",value:function(e){return this.isArray(e)?_toConsumableArray2(e):[e]}},{key:"serializeParams",value:function(e){if(!e)return"";var t=encodeURIComponent;return Object.keys(e).map(function(n){return"".concat(t(n),"=").concat(t(e[n]))}).join("&")}},{key:"compareVersion",value:function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var i=0;i<n;i++){var a=parseInt(e[i]),r=parseInt(t[i]);if(a>r)return 1;if(a<r)return-1}return 0}},{key:"clone",value:function(e){if(null===e||"object"!=_typeof2(e))return e;if(this.isArray(e)){for(var t=e.slice(),n=0,i=t.length;n<i;n++)t[n]=this.clone(t[n]);return t}var a={};for(var r in e)a[r]=this.clone(e[r]);return a}},{key:"merge",value:function(e,t,n){if(null===e||"object"!=_typeof2(e))throw new TypeError("SDK merge() - \u7b2c\u4e00\u4e2a\u53c2\u6570\u5fc5\u987b\u662fobject, \u4e0d\u80fd\u4e3a "+_typeof2(e)+"\u3002");if(null===t||"object"!=_typeof2(t))throw new TypeError("SDK merge() - \u7b2c\u4e8c\u4e2a\u53c2\u6570\u5fc5\u987b\u662fobject, \u4e0d\u80fd\u4e3a "+_typeof2(t)+"\u3002");if(this.isArray(e)||this.isArray(t))throw new TypeError("SDK merge() - \u4e0d\u652f\u6301\u6570\u7ec4\u5408\u5e76\u3002");for(var i in t){var a=void 0,r=t[i];Object.prototype.hasOwnProperty.call(e,i)?n||(null!==(a=e[i])&&"object"==_typeof2(a)&&null!==r&&"object"==_typeof2(r)?this.merge(a,r,!1):e[i]=this.clone(r)):e[i]=this.clone(r)}return e}},{key:"promisifyAsyncWrap",value:function(e){return function(t){return new Promise(function(n,i){var a={success:function(e){n(e)},fail:function(e){i(e)}};e(Object.assign({},a,t))})}}}]),e}();n.default=i,i.toString=Object.prototype.toString,cc._RF.pop()},{}],SDKVideo:[function(e,t,n){"use strict";cc._RF.push(t,"22a42X5xoFMA5W9ZYNdKf+I","SDKVideo"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SDKEnum"),r=e("LogService"),o=function(){function e(){_classCallCheck2(this,e),this.show_time=0,this.isPreload=!1,this.videoKey="",this._isPlaying=!1,this._isErrored=!1,this._isMultiton=!1}return _createClass2(e,[{key:"isErrored",get:function(){return this._isErrored}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"preloadVideo",value:function(e){var t=this;if(!this.preloadVideoAd&&!this.isPreload){this.isPreload=!0;var n=wx.createRewardedVideoAd({adUnitId:e});n.onError(this.preError),n.load().then(this.handleLoaded2).catch(function(){t.isPreload=!1}),this.videoAd2=n}}},{key:"preError",value:function(){e.I.isPreload=!1}},{key:"handleLoaded2",value:function(){var t=e.I;t.preloadVideoAd=t.videoAd2,t.isPreload=!1,i.__LOG__&&console.warn("\u89c6\u9891\u9884\u52a0\u8f7d\u6210\u529f",t.preloadVideoAd)}},{key:"offPreload",value:function(){var t=e.I;t.preloadVideoAd.offError(t.preError)}},{key:"show",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return __awaiter(this,void 0,void 0,_regenerator.default.mark(function o(){var s=this;return _regenerator.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise(function(o,c){return __awaiter(s,void 0,void 0,_regenerator.default.mark(function s(){var u,l;return _regenerator.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!this.isPlaying){s.next=2;break}return s.abrupt("return",c(Object.assign({},i.ShareVideoError.VideoPlaying)));case 2:if(t){s.next=4;break}return s.abrupt("return",c(Object.assign({},i.ShareVideoError.VideoInvalid)));case 4:if(r.default.I.adStat(e,this.adUnitId,a.DOT_AD_TYPE.video,a.DOT_AD_STATUS.request),this.preloadVideoAd&&!n?(i.__LOG__&&console.log("\u4f7f\u7528\u9884\u52a0\u8f7d\u89c6\u9891",this.preloadVideoAd),l=!0,this.offPreload(),u=this.preloadVideoAd):(i.__LOG__&&console.log("\u4e0d\u4f7f\u7528\u9884\u52a0\u8f7d\u89c6\u9891"),l=!1,u=wx.createRewardedVideoAd({adUnitId:t,multiton:!0})),this._isMultiton=!l,u){s.next=6;break}return s.abrupt("return",c(Object.assign({},i.ShareVideoError.VideoNotOpen)));case 6:if(this._isPlaying=!0,this._isErrored=!1,this.videoKey=e,this.adUnitId=t,this.resolve=o,this.reject=c,this.videoAd=u,u.onClose(this.handleClose),u.onError(this.onError),!l){s.next=20;break}return s.prev=7,s.next=10,this.handleLoaded();case 10:s.next=18;break;case 12:return s.prev=12,s.t0=s.catch(7),i.__LOG__&&console.log("error",s.t0),s.next=17,u.load();case 17:this.handleLoaded();case 18:s.next=30;break;case 20:return s.prev=20,s.next=23,u.load();case 23:return s.next=25,this.handleLoaded();case 25:s.next=30;break;case 27:s.prev=27,s.t1=s.catch(20),this.handleError({});case 30:i.__LOG__&&console.warn("====> PCSDK WxVideo \u8bf7\u6c42\u89c6\u9891adUnitId",t);case 31:case"end":return s.stop()}},s,this,[[7,12],[20,27]])}))}));case 1:case"end":return o.stop()}},o)}))}},{key:"onError",value:function(t){var n=e.I;!n.isErrored&&n.handleError(t)}},{key:"handleLoaded",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){var n;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.I,t.prev=1,r.default.I.adStat(this.videoKey,this.adUnitId,a.DOT_AD_TYPE.video,a.DOT_AD_STATUS.show),cc.sys.platform!==cc.sys.WECHAT_GAME){t.next=13;break}if(!n.videoAd.isReady()){t.next=10;break}return n.show_time=Date.now(),t.next=8,n.videoAd.show();case 8:t.next=11;break;case 10:n.videoAd.load().then(function(){n.show_time=Date.now(),n.videoAd.show()}).catch(n.handleError);case 11:t.next=16;break;case 13:return n.show_time=Date.now(),t.next=16,n.videoAd.show();case 16:i.__LOG__&&console.log("handleLoaded_show"),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(1),i.__LOG__&&console.log("handleLoaded_show__err"),n.handleError({});case 22:case"end":return t.stop()}},t,this,[[1,19]])}))}},{key:"handleClose",value:function(t){i.__LOG__&&console.warn("====> PCSDK WxVideo \u5e7f\u544a\u5173\u95ed",t&&t.isEnded||void 0===t);var n=e.I,o=Math.floor((Date.now()-n.show_time)/1e3);t&&t.isEnded||void 0===t?(r.default.I.adStat(n.videoKey,n.adUnitId,a.DOT_AD_TYPE.video,a.DOT_AD_STATUS.complete),n.resolve&&n.resolve({type:2})):(r.default.I.adStat(n.videoKey,n.adUnitId,a.DOT_AD_TYPE.video,a.DOT_AD_STATUS.interrupt,o),n.reject&&n.reject(Object.assign({},i.ShareVideoError.VideoQuit))),n.videoAd.offClose(n.handleClose),n._isMultiton&&(n.videoAd.destroy(),n.videoAd=null),n.preloadVideo(n.adUnitId),n._isPlaying=!1,n._isErrored=!1}},{key:"handleError",value:function(t){i.__LOG__&&console.warn("====> PCSDK WxVideo \u52a0\u8f7d\u89c6\u9891\u5e7f\u544a\u5931\u8d25",t);var n=e.I;r.default.I.adStat(n.videoKey,n.adUnitId,a.DOT_AD_TYPE.video,a.DOT_AD_STATUS.fail),n.reject&&n.reject(Object.assign({},i.ShareVideoError.VideoFail)),n.videoAd&&n.videoAd.offClose&&n.videoAd.offClose(n.handleClose),n._isPlaying=!1,n._isErrored=!0}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=o,cc._RF.pop()},{LogService:"LogService",SDKConst:"SDKConst",SDKEnum:"SDKEnum"}],SdkData:[function(e,t,n){"use strict";cc._RF.push(t,"f09e3j/TWhBfokElJEn5NMh","SdkData"),Object.defineProperty(n,"__esModule",{value:!0}),n.UserState=void 0;var i,a,r=e("SDKEnum");n.default=function(){return _createClass2(function e(){_classCallCheck2(this,e),this.token="",this.refToken="",this.expice=0,this.isnew=0,this.scene="",this.openId="",this.userId=0,this.regTime="",this.launchTime=0,this.shareId=0,this.shareKey="",this.platform="",this.networkType=r.NetworkType.Unknown,this.gender=r.Gender.Unknown,this.channelId=0,this.queryChannelId=0,this.queryExtData={},this.inviteType=0,this.shareTicket="",this.systemId=0,this.launchKey="",this.launchSource=-1,this.authorize=!1,this.cdnUrl="",this.envEnum=2,this.version="1.0",this.inviteUid=0,this.queryUserInviteUid=0,this.shield=0,this.configParams=null,this.userState=i.Default,this.isCross=!1,this.isDrawer=!1,this.isGuessLike=!1,this.logindays=0,this.amount=0,this.pon=0,this.ptm=0,this.clue_token="",this.creative_id="",this.advertister_id="",this.request_id="",this.launch_ad_info={},this.ad_info={}})}(),(a=i=n.UserState||(n.UserState={}))[a.Default=0]="Default",a[a.Old=1]="Old",a[a.New=2]="New",cc._RF.pop()},{SDKEnum:"SDKEnum"}],SettingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"e7a2apAK+VAfY1+L2af6hVi","SettingPanel"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("AudioManager"),a=e("GameData"),r=e("Panel"),o=e("shareTools"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).toogleNode=[],e.btn1=null,e.btn2=null,e.callback=null,e.num=0,e}return _createClass2(n,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.callback=e,this.btn1.active=0==t,this.btn2.active=1==t,this.refreshView()}},{key:"refreshView",value:function(){this.toogleNode[0].getChildByName("bg").active=!a.GameData.data.mute,this.toogleNode[0].getChildByName("btn").x=a.GameData.data.mute?-66:66,this.toogleNode[1].getChildByName("bg").active=!a.GameData.data.shock,this.toogleNode[1].getChildByName("btn").x=a.GameData.data.shock?-66:66}},{key:"onClick",value:function(e,t){switch(t){case"close":this.close(),this.callback&&this.callback(0);break;case"shock":a.GameData.data.shock=!a.GameData.data.shock,this.refreshView();break;case"sound":i.default.toggleAtuio(),this.refreshView();break;case"share":this.num++,this.num%3==0&&(a.GameData.data.clear(),console.log("\u6e05\u9664\u6570\u636e")),o.ShareTools.pureShare(o.ShareKey.setting);break;case"home":this.close(),this.callback&&this.callback(1);break;case"new":this.close(),this.callback&&this.callback(2)}}}]),n}(r.default);__decorate([u(cc.Node)],l.prototype,"toogleNode",void 0),__decorate([u(cc.Node)],l.prototype,"btn1",void 0),__decorate([u(cc.Node)],l.prototype,"btn2",void 0),l=__decorate([c],l),n.default=l,cc._RF.pop()},{AudioManager:"AudioManager",GameData:"GameData",Panel:"Panel",shareTools:"shareTools"}],Sha1Utils:[function(e,t,n){"use strict";cc._RF.push(t,"b994fE/1DJDqp+Zo8MqWv4z","Sha1Utils"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"init",value:function(e){this.blockstart=null,this.W=new Array(80),this.H0=1732584193,this.H1=4023233417,this.H2=2562383102,this.H3=271733878,this.H4=3285377520,this.A=this.B=this.C=this.D=this.E=this.temp=this.msg=this.msg_len=null,this.word_array=[],this.msg=this.Utf8Encode(e),this.msg_len=this.msg.length;for(var t=0;t<this.msg_len-3;t+=4){var n=this.msg.charCodeAt(t)<<24|this.msg.charCodeAt(t+1)<<16|this.msg.charCodeAt(t+2)<<8|this.msg.charCodeAt(t+3);this.word_array.push(n)}this.initMsg(this.msg_len)}},{key:"initMsg",value:function(e){var t;switch(e%4){case 0:t=2147483648;break;case 1:t=this.msg.charCodeAt(e-1)<<24|8388608;break;case 2:t=this.msg.charCodeAt(e-2)<<24|this.msg.charCodeAt(e-1)<<16|32768;break;case 3:t=this.msg.charCodeAt(e-3)<<24|this.msg.charCodeAt(e-2)<<16|this.msg.charCodeAt(e-1)<<8|128}for(this.word_array.push(t);this.word_array.length%16!=14;)this.word_array.push(0);this.word_array.push(e>>>29),this.word_array.push(e<<3&4294967295),this.getTemp()}},{key:"getTemp",value:function(){for(this.blockstart=0;this.blockstart<this.word_array.length;this.blockstart+=16){for(var e=0;e<16;e++)this.W[e]=this.word_array[this.blockstart+e];for(var t=16;t<=79;t++)this.W[t]=this.rotate_left(this.W[t-3]^this.W[t-8]^this.W[t-14]^this.W[t-16],1);this.A=this.H0,this.B=this.H1,this.C=this.H2,this.D=this.H3,this.E=this.H4;for(var n=0;n<=19;n++)this.temp=this.rotate_left(this.A,5)+(this.B&this.C|~this.B&this.D)+this.E+this.W[n]+1518500249&4294967295,this.E=this.D,this.D=this.C,this.C=this.rotate_left(this.B,30),this.B=this.A,this.A=this.temp;for(var i=20;i<=39;i++)this.temp=this.rotate_left(this.A,5)+(this.B^this.C^this.D)+this.E+this.W[i]+1859775393&4294967295,this.E=this.D,this.D=this.C,this.C=this.rotate_left(this.B,30),this.B=this.A,this.A=this.temp;for(var a=40;a<=59;a++)this.temp=this.rotate_left(this.A,5)+(this.B&this.C|this.B&this.D|this.C&this.D)+this.E+this.W[a]+2400959708&4294967295,this.E=this.D,this.D=this.C,this.C=this.rotate_left(this.B,30),this.B=this.A,this.A=this.temp;for(var r=60;r<=79;r++)this.temp=this.rotate_left(this.A,5)+(this.B^this.C^this.D)+this.E+this.W[r]+3395469782&4294967295,this.E=this.D,this.D=this.C,this.C=this.rotate_left(this.B,30),this.B=this.A,this.A=this.temp;this.H0=this.H0+this.A&4294967295,this.H1=this.H1+this.B&4294967295,this.H2=this.H2+this.C&4294967295,this.H3=this.H3+this.D&4294967295,this.H4=this.H4+this.E&4294967295}}},{key:"hex_sha1",value:function(e){return this.init(e),(this.cvt_hex(this.H0)+this.cvt_hex(this.H1)+this.cvt_hex(this.H2)+this.cvt_hex(this.H3)+this.cvt_hex(this.H4)).toLowerCase()}},{key:"rotate_left",value:function(e,t){return e<<t|e>>>32-t}},{key:"lsb_hex",value:function(e){var t,n,i="";for(t=0;t<=6;t+=2)n=e>>>4*t&15,i+=(e>>>4*t+4&15).toString(16)+n.toString(16);return i}},{key:"cvt_hex",value:function(e){var t,n="";for(t=7;t>=0;t--)n+=(e>>>4*t&15).toString(16);return n}},{key:"Utf8Encode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=i,cc._RF.pop()},{}],ShareData:[function(e,t,n){"use strict";cc._RF.push(t,"d9db9sTRwtFbZX/dTVOwjyg","ShareData"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKEnum");n.default=function(){return _createClass2(function e(){_classCallCheck2(this,e),this.content="",this.icon="",this.id="",this.key="",this.title="",this.typ=i.ShareVideoType.None,this.videoid=""})}(),cc._RF.pop()},{SDKEnum:"SDKEnum"}],ShareVideoService:[function(e,t,n){"use strict";cc._RF.push(t,"91574oAAFtDkbxVdAQGFaBy","ShareVideoService"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SDKEnum"),r=e("SDKApi"),o=e("SDKShare"),s=e("SDKVideo"),c=e("RandomUtils"),u=e("DataService"),l=function(){function e(){_classCallCheck2(this,e),this.preload=!0,this.forwardKey="forward",this.shareObjs={default:[i.GAMEDATA.default_share]}}return _createClass2(e,[{key:"setForwardKey",value:function(e){this.forwardKey=e,this.forward(this.forwardKey)}},{key:"init",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.SDKApi.ShareList();case 2:t=e.sent,this.setShareVideoData(t),o.default.I.updateShareMenu(!0),cc.sys.platform===cc.sys.WECHAT_GAME&&i.GAMEDATA.shareMessageToFriend.scene>0&&wx.setMessageToFriendQuery({shareMessageToFriendScene:i.GAMEDATA.shareMessageToFriend.scene}),this.forwardKey&&this.forward(this.forwardKey);case 4:case"end":return e.stop()}},e,this)}))}},{key:"preloadVideo",value:function(){s.default.I.preloadVideo(i.GAMEDATA.videoAd)}},{key:"share",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});return new Promise(function(i,r){var c=t.getShareVideoData(e),u=c.id,l=c.typ,d=c.content,h=c.key,f=c.icon,p=c.videoid,v={title:d,imageUrl:f,share_id:u,query:t.createQuery({share_key:h,share_id:u,query:n.query})},_=!1;switch(n&&(n.title&&(v.title=n.title),n.img_url&&(v.imageUrl=n.img_url),n.share_type&&(l=n.share_type),n.hasOwnProperty("multiton")&&(_=n.multiton)),+l){case a.ShareVideoType.Video:s.default.I.show(e,p,_).then(function(e){i(e)}).catch(function(e){r(e)});break;case a.ShareVideoType.VideoToShare:s.default.I.show(e,p,_).then(function(e){i(e)}).catch(function(t){1e3!==t.code&&1003!==t.code?o.default.I.share(e,v,n).then(function(e){i(e)}).catch(function(e){r(e)}):r(t)});break;case a.ShareVideoType.Share:o.default.I.share(e,v,n).then(function(e){i(e)}).catch(function(e){r(e)});break;case a.ShareVideoType.None:default:i({})}})}},{key:"forward",value:function(e){var t=this.getShareVideoData(e||this.forwardKey),n={title:t.content,imageUrl:t.icon,query:this.createQuery({share_key:t.key,share_id:t.id})};o.default.I.forward(n)}},{key:"getShareVideoID",value:function(e){return this.getShareVideoData(e).id}},{key:"getShareVideoID2",value:function(e){return this.getShareVideoData(e).videoid}},{key:"getShareVideoType",value:function(e){return+this.getShareVideoData(e).typ}},{key:"getShareType",value:function(e){return this.getShareVideoType(e)}},{key:"getType",value:function(e){return this.getShareVideoType(e)}},{key:"setShareVideoData",value:function(e){var t=this;(e.data||[]).forEach(function(e){t.shareObjs[e.key]=t.shareObjs[e.key]||[],t.shareObjs[e.key].push(e)})}},{key:"getShareVideoData",value:function(e){var t=this.shareObjs[e];return t||(t=this.shareObjs.default),t[c.default.rand(0,t.length)]}},{key:"createQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query;if(delete e.query,t)for(var n in t)e[n]=t[n];e=Object.assign(Object.assign({},e),{channel_id:i.GAMEDATA.channel_id,user_invite_uid:u.default.I.UserId,user_invite_openid:u.default.I.OpenId});var a="";for(var r in e)a.length&&(a+="&"),a+="".concat(r,"=").concat(e[r]);return a}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=l,cc._RF.pop()},{DataService:"DataService",RandomUtils:"RandomUtils",SDKApi:"SDKApi",SDKConst:"SDKConst",SDKEnum:"SDKEnum",SDKShare:"SDKShare",SDKVideo:"SDKVideo"}],SignUtils:[function(e,t,n){"use strict";cc._RF.push(t,"5342c+RJdNHib3qadUC4xpM","SignUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("md5"),a=e("SDKConst"),r=e("SDKUtils"),o=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"createSign",value:function(e){var t=this.createQuery(e)+""+a.GAMEDATA.appkey;return i.Md5.hashStr(t)}},{key:"ksort",value:function(e){var t,n,i,a={},r=[],o={};for(i in t=function(e,t){var n=parseFloat(e),i=parseFloat(t),a=n+""===e,r=i+""===t;return a&&r?n>i?1:n<i?-1:0:a&&!r?1:!a&&r?-1:e>t?1:e<t?-1:0},e)e.hasOwnProperty(i)&&r.push(i);for(r.sort(t),n=0;n<r.length;n++)a[i=r[n]]=e[i];for(n in a)a.hasOwnProperty(n)&&(o[n]=a[n]);return o}},{key:"createQuery",value:function(e){e=e||{};for(var t=Object.keys(this.ksort(e)),n="",i="",a=0,o=t.length;a<o;a++)null!=e[t[a]]&&"undefined"!==e[t[a]]&&""!==e[t[a]]&&"0"!==e[t[a]]&&0!==e[t[a]]&&"ver"!==t[a]&&"pkv"!==t[a]&&(n=t[a],a&&(i+=""),r.default.isArray(e[n])?i+="".concat(n,"=").concat(JSON.stringify(e[n])):i+="".concat(n,"=").concat(e[n]));return i}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=o,cc._RF.pop()},{SDKConst:"SDKConst",SDKUtils:"SDKUtils",md5:"md5"}],SimulateShare:[function(e,t,n){"use strict";cc._RF.push(t,"4ff4eeHrSlJ34+ZRzkbGs0B","SimulateShare"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKBaseData"),a=e("SDKEventCenter"),r=e("SDKEventEnum"),o=e("SDKConst"),s=function(){function e(){_classCallCheck2(this,e),this.hideTime=0,this.delayTime=300}return _createClass2(e,[{key:"SuccessTime",get:function(){return i.default.SimulateShareTime}},{key:"bind",value:function(e){o.__LOG__&&console.warn("SDK SimulateShare bind");var t=e.success,n=e.fail,i=e.cancel,s=!0;e.success=function(e){s&&t(e),s=!1},e.fail=function(e){s&&n(e),s=!1},e.cancel=function(e){s&&i(e),s=!1},this.hideTime=0,this.callbacks=e,a.default.I.add(r.SDKEventEnum.APP_SHOW,this.onShow,this),a.default.I.add(r.SDKEventEnum.APP_HIDE,this.onHide,this)}},{key:"clear",value:function(){this.hideTime=0,a.default.I.remove(r.SDKEventEnum.APP_SHOW,this.onShow,this),a.default.I.remove(r.SDKEventEnum.APP_HIDE,this.onHide,this)}},{key:"onHide",value:function(){o.__LOG__&&console.warn("SDK SimulateShare hide"),this.hideTime=(new Date).getTime()}},{key:"onShow",value:function(){var e,t=this.SuccessTime;o.__LOG__&&console.warn("SDK SimulateShare show",t);var n=this.callbacks,i=n.success,a=n.fail,r=Date.now()-this.hideTime;e=r<t?setTimeout(function(){o.__LOG__&&console.warn("SDK SimulateShare \u6a21\u62df\u5206\u4eab\u5931\u8d25\uff01"),a&&a({errMsg:"\u6a21\u62df\u5206\u4eab\u5931\u8d25\uff01"}),clearTimeout(e),e=null},this.delayTime):setTimeout(function(){o.__LOG__&&console.warn("SDK SimulateShare \u6a21\u62df\u5206\u4eab\u6210\u529f\uff01"),i&&i({errMsg:"\u6a21\u62df\u5206\u4eab\u6210\u529f\uff01",shareTickets:["simulate_ticket"]}),clearTimeout(e),e=null},this.delayTime),this.clear()}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=s,cc._RF.pop()},{SDKBaseData:"SDKBaseData",SDKConst:"SDKConst",SDKEventCenter:"SDKEventCenter",SDKEventEnum:"SDKEventEnum"}],StorageUtils:[function(e,t,n){"use strict";cc._RF.push(t,"ffc5dnZ+ZhDhbDFKTMMXvKV","StorageUtils"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("WxStorage"),a=e("Storage"),r=function(){function e(){_classCallCheck2(this,e),this.store=null,"object"==("undefined"==typeof localStorage?"undefined":_typeof2(localStorage))&&(this.store=new a.default),"undefined"!=typeof wx&&(this.store=new i.default)}return _createClass2(e,[{key:"__isExpired",value:function(e){return!e||this.timestamp-(e.timestamp+e.expiration)>=0}},{key:"timestamp",get:function(){return+((new Date).getTime()/1e3).toFixed(0)}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i={timestamp:this.timestamp,expiration:n,key:e,value:t};return this.store.setItem(e,JSON.stringify(i)),this}},{key:"get",value:function(e){var t;try{if(!(t=this.store.getItem(e)))return null;t=JSON.parse(t)}catch(n){return console.warn(n),null}return t.expiration&&this.__isExpired(t)?(this.remove(e),null):t.value}},{key:"remove",value:function(e){try{this.store.removeItem(e)}catch(t){console.warn(t)}return this}},{key:"clear",value:function(){try{this.store.clear()}catch(e){console.warn(e)}return this}},{key:"isExist",value:function(e){return this.store.hasKey(e)}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=r,cc._RF.pop()},{Storage:"Storage",WxStorage:"WxStorage"}],Storage:[function(e,t,n){"use strict";cc._RF.push(t,"b9e02nBK7FNU6eU+EAJX1eQ","Storage"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"getItem",value:function(e){return localStorage.getItem(e)||""}},{key:"setItem",value:function(e,t){localStorage.setItem(e,t)}},{key:"removeItem",value:function(e){localStorage.removeItem(e)}},{key:"clear",value:function(){localStorage.clear()}},{key:"hasKey",value:function(e){var t=localStorage.length;if(t)for(var n=0;n<t;n++)if(e===localStorage.key(n))return!0;return!1}}]),e}(),cc._RF.pop()},{}],Tile:[function(e,t,n){"use strict";cc._RF.push(t,"33e5bulmNNATLjj8ooxrHX0","Tile"),Object.defineProperty(n,"__esModule",{value:!0}),n.TileState=void 0;var i,a,r=e("utils"),o=e("Const"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).icon=null,e.strLb1=null,e.par=null,e}return _createClass2(n,[{key:"init",value:function(e,t,n){this.callback=t,this.grid=n,this.value=e,this.updateView(),this.setUsable(!0),this.tips(!1),this.reset(),this.state=i.GRID}},{key:"reset",value:function(){this.node.scale=1}},{key:"updateView",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){var t=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:cc.resources.load("images/"+this.value,cc.SpriteFrame,function(e,n){t.icon.spriteFrame=n}),cc.resources.load("images/hb_"+this.value,cc.SpriteFrame,function(e,n){t.par.getComponent(cc.ParticleSystem).spriteFrame=n});case 1:case"end":return e.stop()}},e,this)}))}},{key:"touchStart",value:function(){this._usable&&this.state==i.GRID&&this.callback&&this.callback(this)}},{key:"collect",value:function(){this.state=i.COLLECT,this.setUsable(!0),this.isMove=!1,this.updateView()}},{key:"flowerPot",value:function(){this.state=i.FLOWER_POT,this.setUsable(!0),this.isMove=!1}},{key:"changeIconScale",value:function(e,t,n){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function i(){var a=this;return _regenerator.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise(function(i){cc.Tween.stopAllByTarget(a.icon.node),cc.tween(a.icon.node).to(n,{scaleX:e,scaleY:t}).call(function(){i(1)}).start()}));case 1:case"end":return i.stop()}},i)}))}},{key:"setValue",value:function(e){this._value=e,this.icon.spriteFrame=null,this.updateView()}},{key:"moveIn",value:function(e,t){var n=this;cc.Tween.stopAllByTarget(this.node),this.collectIndex=e,this.isMove=!0,this.node.angle=5==this.node.y?360:0,this.par.active=!0,this.par.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(this.node).to(.3,{angle:360,x:11+o.default.TILE_W/2+(o.default.TILE_W+16)*e,y:5}).call(function(){n.isMove=!1,n.par.active=!1,t&&t()}).start()}},{key:"moveIn2",value:function(e,t){var n=this;cc.Tween.stopAllByTarget(this.node),this.collectIndex=e,this.isMove=!0,this.par.active=!0,this.par.getComponent(cc.ParticleSystem).resetSystem(),cc.tween(this.node).to(.3,{x:e%2==0?-36:36,y:0,scale:1}).call(function(){n.isMove=!1,n.par.active=!1,t&&t()}).start()}},{key:"clearAnim",value:function(e){var t=this;cc.Tween.stopAllByTarget(this.node),this.isMove=!0,this.node.angle=0,cc.tween(this.node).to(.3,{scale:0,angle:360}).call(function(){t.isMove=!1,e&&e()}).start()}},{key:"setUsable",value:function(e){this._usable=e,this.icon.getComponent(cc.Button).interactable=e,this.icon.node.color=e?cc.Color.WHITE:r.utils.hexToColor("#555555")}},{key:"checkMove",value:function(e){return this.collectIndex==e&&this.node.x==11+o.default.TILE_W/2+(o.default.TILE_W+16)*e&&5==this.node.y}},{key:"tips",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}},{key:"value",get:function(){return this._value},set:function(e){this._value=e}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"isMove",get:function(){return this._isMove},set:function(e){this._isMove=e}},{key:"ueable",get:function(){return this._usable}}]),n}(cc.Component);__decorate([u(cc.Sprite)],l.prototype,"icon",void 0),__decorate([u(cc.Label)],l.prototype,"strLb1",void 0),__decorate([u(cc.Node)],l.prototype,"par",void 0),l=__decorate([c],l),n.default=l,(a=i=n.TileState||(n.TileState={}))[a.GRID=0]="GRID",a[a.GRID_EXTEND=1]="GRID_EXTEND",a[a.COLLECT=2]="COLLECT",a[a.FLOWER_POT=3]="FLOWER_POT",cc._RF.pop()},{Const:"Const",utils:"utils"}],TimeShow:[function(e,t,n){"use strict";cc._RF.push(t,"5cbbbRS3ztCuI6KE4SreXa9","TimeShow"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKTools"),a=cc._decorator,r=a.ccclass,o=a.property,s=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).wait=2.5,e}return _createClass2(n,[{key:"onEnable",value:function(){var e=this,t=this.node,n=t.x,a=t.getComponent(cc.Button);a.interactable=!1,t.opacity=0,t.x=-1e3,i.SDKTools.isnew&&1===i.SDKTools.getParamsInt("btn_wait_show",0)?this.scheduleOnce(function(){a.interactable=!0,t.x=n,e.node.runAction(cc.fadeTo(.5,255))},this.wait):(a.interactable=!0,t.x=n,this.node.opacity=255)}}]),n}(cc.Component);__decorate([o({tooltip:"\u7b49\u5f85\u65f6\u95f4"})],s.prototype,"wait",void 0),s=__decorate([r],s),n.default=s,cc._RF.pop()},{SDKTools:"SDKTools"}],TimingClose:[function(e,t,n){"use strict";cc._RF.push(t,"d682bdnnTxMnZojVh1hGxNl","TimingClose"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKTools"),a=cc._decorator,r=a.ccclass,o=(a.property,function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){return _classCallCheck2(this,n),t.apply(this,arguments)}return _createClass2(n,[{key:"onEnable",value:function(){i.SDKTools.isnew&&1===i.SDKTools.getParamsInt("btn_timing_close",1)&&this.node.getComponent(cc.Animation).play("anim_close")}}]),n}(cc.Component));o=__decorate([r],o),n.default=o,cc._RF.pop()},{SDKTools:"SDKTools"}],UIManager:[function(e,t,n){"use strict";cc._RF.push(t,"5af44gzqhVLJpsxmhysott/","UIManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.PanelType=void 0;var i,a=e("utils"),r=e("Panel"),o=e("EventManager");(i=n.PanelType||(n.PanelType={})).in="inPanel",i.reward="rewardPanel",i.rank="rankPanel",i.setting="settingPanel",i.RetPanel="RetPanel",i.GGPanel="GGPanel",i.PropPanel="PropPanel",i.FlowerPanel="FlowerPanel";var s=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"openPanel",value:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){var s,c,u;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.panelHideList||!this.panelHideList[t]){n.next=2;break}return n.abrupt("return",(e.panel_type=t,o.default.I.emit(o.EventName.hide_customad2),this.isOpen=!0,this.panelHideList[t].node.active=!0,(s=this.panelHideList[t]).init.apply(s,i),void this.panelHideList[t].handleAdShow()));case 2:if(!this.isOpen){n.next=6;break}this.panelDataList.push({type:t,arg:i}),n.next=11;break;case 6:return this.isOpen=!0,n.next=9,a.utils.loadPrefab2("panel",t);case 9:u=n.sent,e.panel_type=t,o.default.I.emit(o.EventName.hide_customad2),(c=u.getComponent(r.default)).init.apply(c,i),u.getComponent(r.default).handleAdShow(),cc.find("Canvas").getChildByName("panel").addChild(u);case 11:case"end":return n.stop()}},n,this)}))}},{key:"waitOpenPanel",value:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return new Promise(function(n){e.openPanel.apply(e,[t,n].concat(i))})}},{key:"waitAddPanel",value:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return new Promise(function(n){e.addPanel.apply(e,[t,n].concat(i))})}},{key:"nextPanel",value:function(){if(this.panelDataList.length>0){var t=this.panelDataList.shift();this.isOpen=!1,this.openPanel.apply(this,[t.type].concat(_toConsumableArray2(t.arg)))}else e.panel_type=null,o.default.I.emit(o.EventName.show_customad2),this.isOpen=!1}},{key:"addPanel",value:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){var s,c;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.utils.loadPrefab2("panel",t);case 2:c=n.sent,e.panel_type=t,o.default.I.emit(o.EventName.hide_customad2),(s=c.getComponent(r.default)).init.apply(s,i),c.getComponent(r.default).handleAdShow(),cc.find("Canvas").getChildByName("panel").addChild(c);case 4:case"end":return n.stop()}},n)}))}},{key:"hdiePanel",value:function(e,t){if(this.panelHideList)this.panelHideList[e]||(this.panelHideList[e]=t);else{var n=_defineProperty2({},"".concat(e),t);this.panelHideList=n}t.node.active=!1}},{key:"loadScene",value:function(e){var t=this;return new Promise(function(n){return __awaiter(t,void 0,void 0,_regenerator.default.mark(function t(){var i;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.preloadScene(e);case 2:i=t.sent;case 3:if(i){t.next=8;break}return t.next=6,this.preloadScene(e);case 6:t.next=3;break;case 8:cc.director.loadScene(e,function(){n(1)});case 9:case"end":return t.stop()}},t,this)}))})}},{key:"preloadScene",value:function(e){var t=this;return new Promise(function(n){cc.director.preloadScene(e,function(e){return __awaiter(t,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(!e);case 1:case"end":return t.stop()}},t)}))})})}}]),e}();n.default=s,s.panelDataList=[],s.isOpen=!1,cc._RF.pop()},{EventManager:"EventManager",Panel:"Panel",utils:"utils"}],Version:[function(e,t,n){"use strict";cc._RF.push(t,"475e1HfJM5EqKmrBkIjC/Q5","Version"),Object.defineProperty(n,"__esModule",{value:!0});var i,a,r,o=e("SDKConst");(r=i||(i={})).WX="wx",r.QQ="qq",(a||(a={})).PlatformType="wx";var s=function(){function e(){var t,n;_classCallCheck2(this,e),this.DEFUALT="0.0.0",this.VERSION={createRewardedVideoAd:(t={},_defineProperty2(t,i.WX,"2.0.4"),_defineProperty2(t,i.QQ,"0.1.26"),t),createInterstitialAd:_defineProperty2({},i.WX,"2.6.0"),createFeedbackButton:_defineProperty2({},i.WX,"2.1.2"),createUserInfoButton:_defineProperty2({},i.WX,"2.0.1"),createBannerAd:(n={},_defineProperty2(n,i.WX,"2.0.4"),_defineProperty2(n,i.QQ,"0.1.26"),n),createGameBanner:_defineProperty2({},i.WX,"2.7.5"),createGamePortal:_defineProperty2({},i.WX,"2.7.5"),createGameIcon:_defineProperty2({},i.WX,"2.8.2"),setClipboardData:_defineProperty2({},i.WX,"1.1.0"),setSubscribeMessage:_defineProperty2({},i.WX,"2.8.0"),getUpdateManager:_defineProperty2({},i.WX,"1.9.90"),updateShareMenu:_defineProperty2({},i.WX,"1.2.0"),showShareMenu:_defineProperty2({},i.WX,"1.1.0"),vibrate:_defineProperty2({},i.WX,"1.2.0"),getShareInfo:_defineProperty2({},i.WX,"1.1.0"),openCustomerServiceConversation:_defineProperty2({},i.WX,"2.0.3")},o.__LOG__&&console.error("SDK Version ",this.VERSION,this.getVRewardedVideoAd(),this.getVInterstitialAd())}return _createClass2(e,[{key:"getVRewardedVideoAd",value:function(){return this.VERSION.createRewardedVideoAd[a.PlatformType]||this.DEFUALT}},{key:"getVInterstitialAd",value:function(){return this.VERSION.createInterstitialAd[a.PlatformType]||this.DEFUALT}},{key:"getVFeedbackButton",value:function(){return this.VERSION.createFeedbackButton[a.PlatformType]||this.DEFUALT}},{key:"getVUserInfoButton",value:function(){return this.VERSION.createUserInfoButton[a.PlatformType]||this.DEFUALT}},{key:"getVBannerAd",value:function(){return this.VERSION.createBannerAd[a.PlatformType]||this.DEFUALT}},{key:"getVGameBanner",value:function(){return this.VERSION.createGameBanner[a.PlatformType]||this.DEFUALT}},{key:"getVGamePortal",value:function(){return this.VERSION.createGamePortal[a.PlatformType]||this.DEFUALT}},{key:"getVGameIcon",value:function(){return this.VERSION.createGameIcon[a.PlatformType]||this.DEFUALT}},{key:"getVClipboardData",value:function(){return this.VERSION.setClipboardData[a.PlatformType]||this.DEFUALT}},{key:"getVSubscribeMessage",value:function(){return this.VERSION.setSubscribeMessage[a.PlatformType]||this.DEFUALT}},{key:"getVUpdateManager",value:function(){return this.VERSION.getUpdateManager[a.PlatformType]||this.DEFUALT}},{key:"getVVibrate",value:function(){return this.VERSION.vibrate[a.PlatformType]||this.DEFUALT}},{key:"getVShareInfo",value:function(){return this.VERSION.getShareInfo[a.PlatformType]||this.DEFUALT}},{key:"getVUpdateShareMenu",value:function(){return this.VERSION.updateShareMenu[a.PlatformType]||this.DEFUALT}},{key:"getVShowShareMenu",value:function(){return this.VERSION.showShareMenu[a.PlatformType]||this.DEFUALT}},{key:"getVCustomerService",value:function(){return this.VERSION.openCustomerServiceConversation[a.PlatformType]||this.DEFUALT}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=s,cc._RF.pop()},{SDKConst:"SDKConst"}],ViewAction:[function(e,t,n){"use strict";cc._RF.push(t,"30ce4xGxP1DyIswbjn02V3n","ViewAction"),Object.defineProperty(n,"__esModule",{value:!0}),n.ViewActionMoveFrom=void 0;var i,a,r=e("Panel"),o=e("Action"),s=e("utils"),c=cc._decorator,u=c.ccclass,l=c.property,d=c.menu;(a=i=n.ViewActionMoveFrom||(n.ViewActionMoveFrom={}))[a.left=0]="left",a[a.top=1]="top",a[a.right=2]="right",a[a.bottom=3]="bottom";var h=function(e){_inherits2(n,e);var t=_createSuper2(n);function n(){var e;return _classCallCheck2(this,n),(e=t.apply(this,arguments)).scale=!1,e.fade=!1,e.rotation=!1,e.move=!1,e.moveFrom=i.left,e.moveFromTarget=null,e.anim=null,e.delay=0,e.duration=.2,e.sort=0,e.group=0,e.hidden=!1,e.onPlay=new cc.Component.EventHandler,e.isPlayed=!1,e._level=-1,e.setButton=!1,e}return _createClass2(n,[{key:"onLoad",value:function(){var e=this.panel;e?e.animations.push(this):cc.warn("[ViewAction]\u672a\u627e\u5230Panel\u8282\u70b9")}},{key:"onEnable",value:function(){this.targetPos=this.node.position,this.targetScale=this.node.scale,this.targetOpacity=this.node.opacity,this.targetRotation=-this.node.angle,this.node.getComponent(cc.Widget)?this.scheduleOnce(this.init.bind(this)):this.init()}},{key:"level",get:function(){if(-1==this._level)for(var e=this.node;e;)this._level++,e=e.parent;return this._level}},{key:"index",get:function(){return null==this.node.parent?-1:this.node.parent.children.indexOf(this.node)}},{key:"panel",get:function(){if(null==this._panel)for(var e=this.node;e&&e!=cc.director.getScene();){var t=e.getComponent(r.default);if(t){this._panel=t;break}e=e.parent}return this._panel}},{key:"init",value:function(){var e=this.node.getComponent(cc.Button),t=this.node.getComponent(o.default);if(e&&e.enabled&&(this.setButton=!0,e.enabled=!1,t&&(t.enabled=!1)),this.scale&&(this.node.scale=0),this.fade&&(this.node.opacity=0),this.anim&&(this.node.opacity=0),this.move)if(this.moveFromTarget){var n=this.moveFromTarget.convertToWorldSpaceAR(cc.v2(0,0));this.node.position=this.node.parent.convertToNodeSpaceAR(n)}else switch(this.moveFrom){case i.left:this.node.position=this.targetPos.add(cc.v2(-500,0));break;case i.top:this.node.position=this.targetPos.add(cc.v2(0,800));break;case i.right:this.node.position=this.targetPos.add(cc.v2(500,0));break;case i.bottom:this.node.position=this.targetPos.add(cc.v2(0,-800))}this.rotation&&(this.node.angle=0,this.node.opacity=0),this.hidden&&(this.node.opacity=0)}},{key:"play",value:function(){var e=this;return new Promise(function(t){s.utils.executeHandler(e.onPlay,e),e.hidden&&(e.node.opacity=255);var n=[],i=[];e.scale&&i.push(cc.scaleTo(e.duration,e.targetScale).easing(cc.easeBackOut())),e.fade&&i.push(cc.fadeTo(e.duration,e.targetOpacity)),e.move&&i.push(cc.moveTo(e.duration,e.targetPos).easing(cc.easeBackOut())),e.rotation&&(e.node.opacity=e.targetOpacity,e.node.angle=0,i.push(cc.rotateBy(e.duration,360)));var a=e.anim;a&&(e.node.opacity=e.targetOpacity,a.play(),a.once("finished",function(){t(1)}),0==i.length)||i.length&&(1==i.length?n.push(i[0]):n.push(cc.spawn(i)),e.delay&&n.unshift(cc.delayTime(e.delay)),n.push(cc.callFunc(function(){var n=e.node.getComponent(cc.Button),i=e.node.getComponent(o.default);n&&e.setButton&&(n.enabled=!0),i&&(i.enabled=!0),t(1)})),e.node.runAction(cc.sequence(n)))})}}]),n}(cc.Component);__decorate([l()],h.prototype,"scale",void 0),__decorate([l()],h.prototype,"fade",void 0),__decorate([l({tooltip:"\u8fdb\u884c\u65cb\u8f6c"})],h.prototype,"rotation",void 0),__decorate([l()],h.prototype,"move",void 0),__decorate([l({type:cc.Enum(i)})],h.prototype,"moveFrom",void 0),__decorate([l({type:cc.Node,tooltip:"\u6765\u6e90\u4e8e\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e"})],h.prototype,"moveFromTarget",void 0),__decorate([l({type:cc.Animation,tooltip:"\u6307\u5b9a\u4e00\u4e2a\u5916\u90e8\u52a8\u753b"})],h.prototype,"anim",void 0),__decorate([l({tooltip:"\u5f53\u524d\u52a8\u753b\u8282\u70b9\u5ef6\u65f6\u6267\u884c\u6307\u5b9a\u65f6\u95f4"})],h.prototype,"delay",void 0),__decorate([l()],h.prototype,"duration",void 0),__decorate([l()],h.prototype,"sort",void 0),__decorate([l({tooltip:"\u5f53\u64ad\u653e\u6307\u5b9a\u52a8\u753b\u65f6\uff0c\u540c\u65f6\u64ad\u653e\u76f8\u540c\u7ec4\uff0c\u5206\u7ec40\u4f8b\u5916\uff0c\u4e3a\u987a\u5e8f\u64ad\u653e"})],h.prototype,"group",void 0),__decorate([l({tooltip:"\u9ed8\u8ba4\u4e0b\u9690\u85cf\u6307\u5b9a\u8282\u70b9"})],h.prototype,"hidden",void 0),__decorate([l({type:cc.Component.EventHandler,tooltip:"\u5f53\u64ad\u653e\u65f6\u8c03\u7528"})],h.prototype,"onPlay",void 0),h=__decorate([u,d("\u89c6\u56fe/ViewAction")],h),n.default=h,cc._RF.pop()},{Action:"Action",Panel:"Panel",utils:"utils"}],WXSDK:[function(e,t,n){"use strict";cc._RF.push(t,"eb64d9jQORMGaZHA/mXOqdW","WXSDK"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("DataService"),a=e("ShareVideoService"),r=e("WxInit"),o=e("GameService"),s=e("LogService"),c=e("AdService"),u=e("OnlineService"),l=e("WxInterstitial");n.default=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"isWx",get:function(){return"undefined"!=typeof wx}},{key:"data",get:function(){return i.default.I.Data}},{key:"share",get:function(){return a.default.I}},{key:"game",get:function(){return o.default.I}},{key:"ad",get:function(){return c.default.I}},{key:"stat",get:function(){return s.default.I}},{key:"online",get:function(){return u.default.I}},{key:"init",value:function(){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function e(){return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isWx&&(r.default.I.init(),cc.sys.platform===cc.sys.WECHAT_GAME&&"undefined"==typeof qq&&setTimeout(function(){l.default.initInterstitialAd(),a.default.I.preloadVideo()},2e3)),i.default.I.updateTodayOnlineTime(),e.next=4,this.game.env();case 4:return this.isWx&&a.default.I.init(),e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}},e,this)}))}}]),e}(),cc._RF.pop()},{AdService:"AdService",DataService:"DataService",GameService:"GameService",LogService:"LogService",OnlineService:"OnlineService",ShareVideoService:"ShareVideoService",WxInit:"WxInit",WxInterstitial:"WxInterstitial"}],WxApi:[function(e,t,n){"use strict";cc._RF.push(t,"e1d2eP+HxhOk40HcsR+qEnz","WxApi"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKUtils"),a=e("WxSystem"),r=e("Version"),o=e("SDKConst"),s=e("SDKEnum"),c=e("DataService"),u=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"getVersionError",value:function(e){return{errMsg:"\u652f\u6301\u6700\u4f4e\u7248\u672c\uff1a".concat(e),errCode:-1}}},{key:"canIUse",value:function(e){return i.default.compareVersion(a.default.I.SDKVersion,e)>=0}},{key:"showModal",value:function(e){wx.showModal(e)}},{key:"subscribeMessage",value:function(e){var t=r.default.I.getVSubscribeMessage();return this.canIUse(t)?new Promise(function(t,n){wx.requestSubscribeMessage({tmplIds:e,success:function(e){t(e)},fail:function(e){n(e)}})}):Promise.reject(this.getVersionError(t))}},{key:"createBannerAd",value:function(e,t,n){return this.canIUse(r.default.I.getVBannerAd())?(n=n||30,wx.createBannerAd({adUnitId:e,style:t})):null}},{key:"createGameBanner",value:function(e,t){return this.canIUse(r.default.I.getVGameBanner())?wx.createGameBanner({adUnitId:e,style:t}):null}},{key:"createInterstitialAd",value:function(e){return this.canIUse(r.default.I.getVInterstitialAd())?wx.createInterstitialAd({adUnitId:e}):null}},{key:"createGameIcon",value:function(e,t){return this.canIUse(r.default.I.getVGameIcon())?wx.createGameIcon(Object.assign({adUnitId:e},t)):null}},{key:"createGamePortal",value:function(e){return this.canIUse(r.default.I.getVGamePortal())?wx.createGamePortal({adUnitId:e}):null}},{key:"createRewardedVideoAd",value:function(e){return this.canIUse(r.default.I.getVRewardedVideoAd())?wx.createRewardedVideoAd({adUnitId:e}):null}},{key:"createFeedbackButton",value:function(e){return this.canIUse(r.default.I.getVFeedbackButton())?wx.createFeedbackButton(e):null}},{key:"createUserInfoButton",value:function(e){return this.canIUse(r.default.I.getVUserInfoButton())?wx.createUserInfoButton(e):null}},{key:"openCustomerServiceConversation",value:function(e){return this.canIUse(r.default.I.getVCustomerService())?(wx.openCustomerServiceConversation(Object.assign({},e)),1):-1}},{key:"vibrateLong",value:function(){return this.canIUse(r.default.I.getVVibrate())?new Promise(function(e){wx.vibrateLong({success:function(){e(1)},fail:function(){e(0)}})}):Promise.reject(null)}},{key:"vibrateShort",value:function(){return this.canIUse(r.default.I.getVVibrate())?new Promise(function(e){wx.vibrateShort({success:function(){e(1)},fail:function(){e(0)}})}):Promise.reject(null)}},{key:"updateShareMenu",value:function(e){this.canIUse(r.default.I.getVUpdateShareMenu())&&wx.updateShareMenu({withShareTicket:e})}},{key:"checkUpdate",value:function(e){if(this.canIUse(r.default.I.getVUpdateManager())){var t=this,n={title:(e=e||{}).title||"\u66f4\u65b0\u63d0\u793a",content:e.content||"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",showCancel:!1,success:function(t){e.success&&e.success(t),t.confirm&&a.applyUpdate()},fail:function(t){return e.fail&&e.fail(t)},complete:function(){return e.complete&&e.complete()}};["cancelText","cancelColor","confirmText","confirmColor"].forEach(function(t){return i.default.hasProperty(e,t)&&(n=Object.assign(Object.assign({},n),_defineProperty2({},t,e[t])))});var a=wx.getUpdateManager();a.onCheckForUpdate(function(e){o.__LOG__&&console.warn("====> PCSDK WxApi updateManager onCheckForUpdate",e.hasUpdate)}),a.onUpdateReady(function(){t.showModal(n)}),a.onUpdateFailed(function(){o.__LOG__&&console.warn("SDK WxApi updateManager onUpdateFailed")})}}},{key:"showShareMenu",value:function(e,t){this.canIUse(r.default.I.getVShowShareMenu())&&(o.__LOG__&&console.error("showShareMenu shareApp"),o.__LOG__&&console.error("showShareMenu shareMenu"),wx.onShareAppMessage(function(){return e}),wx.showShareMenu(t))}},{key:"shareAppMessage",value:function(e){wx.shareAppMessage(e)}},{key:"previewImage",value:function(e,t){return new Promise(function(n,i){e&&0!==e.length?wx.previewImage({current:e[t],urls:e,success:function(e){n(Object.assign(Object.assign({},e),{qrcode:1}))},fail:function(e){i(e)}}):i()})}},{key:"getNetworkType",value:function(){return new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(){t({networkType:s.NetworkType.Unknown})}})})}},{key:"navigateToMiniProgram",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(i,a){wx.navigateToMiniProgram({appId:e,path:t,extraData:n.extraData||{},envVersion:n.envVersion||"release",success:function(e){i(e)},fail:function(e){a(e)}})})}},{key:"login",value:function(){return new Promise(function(t,n){wx.login({success:function(e){t(e.code)},fail:function(t){n(t),e.I.setAuthorize(Object.assign({errorTip:"wx.login fail"},t))}})})}},{key:"getUserinfo",value:function(){return new Promise(function(t,n){wx.getUserInfo({lang:"zh_CN",withCredentials:!0,success:function(i){if(!i)return n(i),e.I.setAuthorize(Object.assign({errorTip:"getUserInfo Success result is null"},i));t(i)},fail:function(t){n(t),e.I.setAuthorize(Object.assign({errorTip:"getUserInfo Fail"},t))}})})}},{key:"getShareInfo",value:function(e){return this.canIUse(r.default.I.getVShareInfo())?new Promise(function(t,n){wx.getShareInfo({shareTicket:e,success:function(e){"getShareInfo:ok"===e.errMsg?t(e):n(e)},fail:function(e){n(e)}})}):Promise.reject(null)}},{key:"requestMidasPayment",value:function(e){var t=e.mode,n=e.env,i=e.offerId,a=e.currencyType,r=e.platform,o=e.buyQuantity,s=e.zoneId;return console.warn("====> PCSDK WxApi requestMidasPayment \u652f\u4ed8\u53c2\u6570",{mode:t,env:n,offerId:i,currencyType:a,platform:r,buyQuantity:o,zoneId:s}),new Promise(function(e,c){wx.requestMidasPayment({mode:t,env:n,offerId:i,currencyType:a,platform:r,buyQuantity:o,zoneId:s,success:function(t){t&&"requestMidasPayment:ok"===t.errMsg?e(t):c(t)},fail:function(e){c(e)}})})}},{key:"setAuthorize",value:function(){c.default.I.setAuthorize(!1)}}],[{key:"I",get:function(){return this._instance||(this._instance=new e)}}]),e}();n.default=u,cc._RF.pop()},{DataService:"DataService",SDKConst:"SDKConst",SDKEnum:"SDKEnum",SDKUtils:"SDKUtils",Version:"Version",WxSystem:"WxSystem"}],WxBanner:[function(e,t,n){"use strict";cc._RF.push(t,"d17b1CDbgFKc43MDebF1gv6","WxBanner"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("WxSystem"),a=e("SDKUtils"),r=e("SDKConst"),o=e("LogService"),s=e("SDKEnum"),c=function(){function e(t,n){_classCallCheck2(this,e),this.queue=[],this.isEnd=!1,t=t||750,n=n||750,this.adUnitId="",this._isErrored=!1,this.designWidth=t,this.bannerScale=i.default.I.winWidth/this.designWidth,this.bannerWidth=Math.max(this.bannerScale*n,300),this.bannerHeight=i.default.I.winHeight/this.bannerScale}return _createClass2(e,[{key:"isErrored",get:function(){return this._isErrored}},{key:"create",value:function(t,n){var c=this;return this.bannerParams=n||{},n&&n.bannerWidth&&(this.bannerWidth=n.bannerWidth),this.isEnd=!0,this.bannerParams.type=this.bannerParams.type||1,this.bannerParams.offsetY=-this.bannerParams.offsetY||0,this.bannerParams.adIntervals=this.bannerParams.adIntervals||120,new Promise(function(u,l){if(c.resolve=u,c.reject=l,c._isErrored=!1,c.adUnitId=t,a.default.isEmpty(t))return e.I.handleQueue(),c.reject(Object.assign(Object.assign({},r.BannerError.BannerInvalid),{adUnitId:c.adUnitId}));2===c.bannerParams.type&&(c.bannerWidth=i.default.I.winWidth);var d={top:0,left:(i.default.I.winWidth-c.bannerWidth)/2,width:c.bannerWidth};if(d=Object.assign(Object.assign({},d),{top:0+c.bannerParams.offsetY}),c.bannerAd)(!n||n&&!n.isOff)&&c.show(!1);else{if(c.bannerAd=wx.createBannerAd({adUnitId:t,style:d,adIntervals:c.bannerParams.adIntervals}),o.default.I.adStat("banner",c.adUnitId,s.DOT_AD_TYPE.banner,s.DOT_AD_STATUS.request),!c.bannerAd)return e.I.handleQueue(),c.reject(Object.assign(Object.assign({},r.BannerError.BannerNotOpen),{adUnitId:c.adUnitId}));c.bannerAd.onLoad(c.onLoad),c.bannerAd.onError(c.onError),c.bannerAd.onResize(c.onResize),(!n||n&&!n.isOff)&&c.show(!1)}})}},{key:"show",value:function(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e.I.isEnd||!n)return e.I.isEnd=!0,this.bannerAd?(this.bannerAd.style.realHeight&&(this.bannerAd.style.top=i.default.I.winHeight-this.bannerAd.style.realHeight+this.bannerParams.offsetY),2===this.bannerParams.type&&this.bannerAd.style.width?this.bannerAd.style.left=(i.default.I.winWidth-this.bannerAd.style.width)/2:this.bannerAd.style.left=(i.default.I.winWidth-this.bannerWidth)/2,o.default.I.adStat("banner",this.adUnitId,s.DOT_AD_TYPE.banner,s.DOT_AD_STATUS.show),this.bannerAd.show().catch(function(e){return t.handleShowError(e)}),r.__LOG__&&console.error("wxBanner - show: "+this.adUnitId,this.bannerAd.style),e.I.handleQueue(),!0):(e.I.handleQueue(),!1);e.I.queue.push(e.I.show.bind(e.I))}},{key:"hide",value:function(){var t=e.I;t.isEnd?t.queue.push(t.hide.bind(t)):(t.isEnd=!0,this.bannerAd&&(this.bannerAd.style.left=-9999,this.bannerAd.hide(),o.default.I.adStat("banner",t.adUnitId,s.DOT_AD_TYPE.banner,s.DOT_AD_STATUS.interrupt),r.__LOG__&&console.error("wxBanner - hide: "+this.adUnitId)),t.handleQueue())}},{key:"toggle",value:function(e){e?this.show():this.hide()}},{key:"destory",value:function(){this.bannerAd&&(this.bannerAd.style.left=-9999,this.bannerAd.destroy(),this.bannerAd=null,o.default.I.adStat("banner",this.adUnitId,s.DOT_AD_TYPE.banner,s.DOT_AD_STATUS.interrupt),r.__LOG__&&console.error("wxBanner - destory: "+this.adUnitId))}},{key:"onLoad",value:function(){var t=e.I,n=t.bannerAd;n&&(r.__LOG__&&console.error("wxBanner - onLoad: "+t.adUnitId),n.style.realHeight&&(n.style.top=i.default.I.winHeight-n.style.realHeight+t.bannerParams.offsetY),t.unbind(),t.handleQueue(),t.resolve&&t.resolve({adUnitId:t.adUnitId,scale:t.bannerScale,width:n.style.realWidth/t.bannerScale,height:n.style.realHeight/t.bannerScale}))}},{key:"onError",value:function(t){r.__LOG__&&console.error("wxBanner - onError",t);var n=e.I;!n._isErrored&&n.handleError(t,Object.assign(Object.assign({},r.BannerError.BannerFail),{adUnitId:n.adUnitId}))}},{key:"onResize",value:function(){var t=e.I,n=t.bannerAd;n&&(n.style.top=i.default.I.winHeight-n.style.realHeight+t.bannerParams.offsetY,n.style.left=(i.default.I.winWidth-n.style.realWidth)/2)}},{key:"handleShowError",value:function(t){r.__LOG__&&console.error("wxBanner - handleShowError",t);var n=e.I,i=t.errCode,a=t.errMsg;!n.isErrored&&n.handleError(t,{code:i,msg:a})}},{key:"handleError",value:function(t,n){var i=e.I;i.unbind(),i._isErrored=!0,i.bannerAd=null,i.handleQueue(),o.default.I.adStat("banner",i.adUnitId,s.DOT_AD_TYPE.banner,s.DOT_AD_STATUS.fail),i.reject&&i.reject(Object.assign(Object.assign({},n),{adUnitId:i.adUnitId})),r.__LOG__&&console.error("wxBanner - onError: "+i.adUnitId)}},{key:"unbind",value:function(){this.bannerAd&&(this.bannerAd.offLoad(this.onLoad),this.bannerAd.offError(this.onError),this.bannerAd.offResize(this.onResize))}},{key:"handleQueue",value:function(){var t=e.I;t.queue.length>0?(t.isEnd=!1,t.queue.shift()()):t.isEnd=!1}}],[{key:"I",get:function(){return this.instance||(this.instance=new e(750,750))}}]),e}();n.default=c,cc._RF.pop()},{LogService:"LogService",SDKConst:"SDKConst",SDKEnum:"SDKEnum",SDKUtils:"SDKUtils",WxSystem:"WxSystem"}],WxCustom2:[function(e,t,n){"use strict";cc._RF.push(t,"f8e09YT3xVJ35CV/0eWwVw7","WxCustom2"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SDKEnum"),r=e("LogService"),o=e("SDKUtils"),s=function(){function e(){_classCallCheck2(this,e),this.queue=[],this.isEnd=!1,this.adUnitId="",this._isErrored=!1}return _createClass2(e,[{key:"isErrored",get:function(){return this._isErrored}},{key:"create",value:function(t,n){var s=this;if(this.bannerParams=n||{},this.bannerParams.adIntervals=this.bannerParams.adIntervals||60,!this.customAd||!e.I.isEnd)return new Promise(function(c,u){if(s.resolve=c,s.reject=u,s._isErrored=!1,s.adUnitId=t,o.default.isEmpty(t))return e.I.handleQueue(),s.reject(Object.assign(Object.assign({},i.BannerError.BannerInvalid),{adUnitId:s.adUnitId}));if(s.customAd)s.show(!1);else{var l={top:n.top,left:n.left,width:310};if(s.customAd=wx.createCustomAd({adUnitId:t,style:l,adIntervals:s.bannerParams.adIntervals}),r.default.I.adStat("custom",s.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.request),!s.customAd)return s.reject(Object.assign(Object.assign({},i.BannerError.BannerNotOpen),{adUnitId:s.adUnitId}));s.customAd.onLoad(s.onLoad),s.customAd.onClose(s.onClose),s.customAd.onError(s.onError)}});e.I.queue.push(e.I.show.bind(e.I))}},{key:"show",value:function(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e.I.isEnd||!n)return e.I.isEnd=!0,this.customAd?(r.default.I.adStat("custom",this.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.show),this.customAd.show().then(function(){e.I.handleQueue()}).catch(function(e){return t.handleShowError(e)}),i.__LOG__&&console.error("WxCustom - show: "+this.adUnitId,this.customAd),!0):(e.I.handleQueue(),!1);e.I.queue.push(e.I.show.bind(e.I))}},{key:"hide",value:function(){var t=e.I;t.isEnd?t.queue.push(t.hide.bind(t)):(t.isEnd=!0,this.customAd&&(this.customAd.hide(),r.default.I.adStat("custom",t.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.interrupt),i.__LOG__&&console.error("WxCustom - hide: "+t.adUnitId)),t.handleQueue())}},{key:"toggle",value:function(e){e?this.show():this.hide()}},{key:"destory",value:function(){this.customAd&&(this.customAd.destroy(),this.customAd=null,r.default.I.adStat("custom",this.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.interrupt),i.__LOG__&&console.error("WxCustom - destory: "+this.adUnitId))}},{key:"onLoad",value:function(){var t=e.I;t.customAd&&(i.__LOG__&&console.error("WxCustom - onLoad: "+t.adUnitId),t.unbind(),t.resolve&&t.resolve({adUnitId:t.adUnitId,top:t.bannerParams.top,left:t.bannerParams.left}))}},{key:"onError",value:function(t){i.__LOG__&&console.error("WxCustom - onError",t);var n=e.I;!n._isErrored&&n.handleError(t,Object.assign(Object.assign({},i.BannerError.BannerFail),{adUnitId:n.adUnitId}))}},{key:"onClose",value:function(){e.I.customAd=null,r.default.I.dot("wxCustom_close")}},{key:"handleShowError",value:function(t){i.__LOG__&&console.error("WxCustom - handleShowError",t);var n=e.I,a=t.errCode,r=t.errMsg;!n.isErrored&&n.handleError(t,{code:a,msg:r})}},{key:"handleError",value:function(t,n){var o=e.I;o.unbind(),o._isErrored=!0,o.customAd&&o.customAd.destroy(),o.customAd=null,o.handleQueue(),o.reject&&o.reject(Object.assign(Object.assign({},n),{adUnitId:o.adUnitId})),r.default.I.adStat("custom",this.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.fail),i.__LOG__&&console.error("WxCustom - onError: "+o.adUnitId)}},{key:"unbind",value:function(){this.customAd&&(this.customAd.offLoad(this.onLoad),this.customAd.offClose(this.onClose),this.customAd.offError(this.onError))}},{key:"handleQueue",value:function(){var t=e.I;t.queue.length>0?(t.isEnd=!1,t.queue.shift()()):t.isEnd=!1}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=s,cc._RF.pop()},{LogService:"LogService",SDKConst:"SDKConst",SDKEnum:"SDKEnum",SDKUtils:"SDKUtils"}],WxCustom3:[function(e,t,n){"use strict";cc._RF.push(t,"89054kP6rFC16YjwUlfb77q","WxCustom3"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SDKEnum"),r=e("LogService"),o=e("SDKUtils"),s=function(){function e(){_classCallCheck2(this,e),this.queue=[],this.isEnd=!1,this.adUnitId="",this._isErrored=!1}return _createClass2(e,[{key:"isErrored",get:function(){return this._isErrored}},{key:"create",value:function(t,n){var s=this;if(this.bannerParams=n||{},this.bannerParams.adIntervals=this.bannerParams.adIntervals||60,!this.customAd||!e.I.isEnd)return this.isEnd=!0,new Promise(function(c,u){if(s.resolve=c,s.reject=u,s._isErrored=!1,s.adUnitId=t,o.default.isEmpty(t))return e.I.handleQueue(),s.reject(Object.assign(Object.assign({},i.BannerError.BannerInvalid),{adUnitId:s.adUnitId}));if(s.customAd)s.show(!1);else{var l={top:n.top,left:n.left,width:310};if(s.customAd=wx.createCustomAd({adUnitId:t,style:l,adIntervals:s.bannerParams.adIntervals}),r.default.I.adStat("custom",s.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.request),!s.customAd)return s.reject(Object.assign(Object.assign({},i.BannerError.BannerNotOpen),{adUnitId:s.adUnitId}));s.customAd.onLoad(s.onLoad),s.customAd.onClose(s.onClose),s.customAd.onError(s.onError)}});e.I.queue.push(e.I.show.bind(e.I))}},{key:"show",value:function(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e.I.isEnd||!n)return e.I.isEnd=!0,this.customAd?(r.default.I.adStat("custom",this.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.show),this.customAd.show().then(function(){e.I.handleQueue()}).catch(function(e){return t.handleShowError(e)}),i.__LOG__&&console.error("WxCustom - show: "+this.adUnitId,this.customAd),!0):(e.I.handleQueue(),!1);e.I.queue.push(e.I.show.bind(e.I))}},{key:"hide",value:function(){var t=e.I;t.isEnd?t.queue.push(t.hide.bind(t)):(t.isEnd=!0,this.customAd&&(this.customAd.hide(),r.default.I.adStat("custom",t.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.interrupt),i.__LOG__&&console.error("WxCustom - hide: "+t.adUnitId)),t.handleQueue())}},{key:"toggle",value:function(e){e?this.show():this.hide()}},{key:"destory",value:function(){this.customAd&&(this.customAd.destroy(),this.customAd=null,r.default.I.adStat("custom",this.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.interrupt),i.__LOG__&&console.error("WxCustom - destory: "+this.adUnitId))}},{key:"onLoad",value:function(){var t=e.I;t.customAd&&(t.show(!1),i.__LOG__&&console.error("WxCustom - onLoad: "+t.adUnitId),t.unbind(),t.resolve&&t.resolve({adUnitId:t.adUnitId,top:t.bannerParams.top,left:t.bannerParams.left}))}},{key:"onError",value:function(t){i.__LOG__&&console.error("WxCustom - onError",t);var n=e.I;!n._isErrored&&n.handleError(t,Object.assign(Object.assign({},i.BannerError.BannerFail),{adUnitId:n.adUnitId}))}},{key:"onClose",value:function(){e.I.customAd=null,r.default.I.dot("wxCustom_close")}},{key:"handleShowError",value:function(t){i.__LOG__&&console.error("WxCustom - handleShowError",t);var n=e.I,a=t.errCode,r=t.errMsg;!n.isErrored&&n.handleError(t,{code:a,msg:r})}},{key:"handleError",value:function(t,n){var o=e.I;o.unbind(),o._isErrored=!0,o.customAd&&o.customAd.destroy(),o.customAd=null,o.handleQueue(),o.reject&&o.reject(Object.assign(Object.assign({},n),{adUnitId:o.adUnitId})),r.default.I.adStat("custom",this.adUnitId,a.DOT_AD_TYPE.custom,a.DOT_AD_STATUS.fail),i.__LOG__&&console.error("WxCustom - onError: "+o.adUnitId)}},{key:"unbind",value:function(){this.customAd&&(this.customAd.offLoad(this.onLoad),this.customAd.offClose(this.onClose),this.customAd.offError(this.onError))}},{key:"handleQueue",value:function(){var t=e.I;t.queue.length>0?(t.isEnd=!1,t.queue.shift()()):t.isEnd=!1}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=s,cc._RF.pop()},{LogService:"LogService",SDKConst:"SDKConst",SDKEnum:"SDKEnum",SDKUtils:"SDKUtils"}],WxCustom:[function(e,t,n){"use strict";cc._RF.push(t,"ccc9aImKkVIZ7u/1bGjC4Ik","WxCustom"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKUtils"),a=e("SDKConst"),r=e("LogService"),o=e("SDKEnum"),s=function(){function e(){_classCallCheck2(this,e),this.queue=[],this.isEnd=!1,this.adUnitId="",this._isErrored=!1}return _createClass2(e,[{key:"isErrored",get:function(){return this._isErrored}},{key:"create",value:function(t,n){var s=this;if(this.bannerParams=n||{},this.bannerParams.adIntervals=this.bannerParams.adIntervals||60,!this.customAd||!e.I.isEnd)return this.isEnd=!0,new Promise(function(c,u){if(s.resolve=c,s.reject=u,s._isErrored=!1,s.adUnitId=t,i.default.isEmpty(t))return e.I.handleQueue(),s.reject(Object.assign(Object.assign({},a.BannerError.BannerInvalid),{adUnitId:s.adUnitId}));if(s.customAd)s.show(!1);else{var l={top:n.top,left:n.left};if(s.customAd=wx.createCustomAd({adUnitId:t,style:l,adIntervals:s.bannerParams.adIntervals}),r.default.I.adStat("custom",s.adUnitId,o.DOT_AD_TYPE.custom,o.DOT_AD_STATUS.request),!s.customAd)return s.reject(Object.assign(Object.assign({},a.BannerError.BannerNotOpen),{adUnitId:s.adUnitId}));s.customAd.onLoad(s.onLoad),s.customAd.onClose(s.onClose),s.customAd.onError(s.onError)}});e.I.queue.push(e.I.show.bind(e.I))}},{key:"show",value:function(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!e.I.isEnd||!n)return e.I.isEnd=!0,this.customAd?(r.default.I.adStat("custom",this.adUnitId,o.DOT_AD_TYPE.custom,o.DOT_AD_STATUS.show),this.customAd.show().then(function(){e.I.handleQueue()}).catch(function(e){return t.handleShowError(e)}),a.__LOG__&&console.error("WxCustom - show: "+this.adUnitId,this.customAd),!0):(e.I.handleQueue(),!1);e.I.queue.push(e.I.show.bind(e.I))}},{key:"hide",value:function(){var t=e.I;t.isEnd?t.queue.push(t.hide.bind(t)):(t.isEnd=!0,this.customAd&&(this.customAd.hide(),r.default.I.adStat("custom",t.adUnitId,o.DOT_AD_TYPE.custom,o.DOT_AD_STATUS.interrupt),a.__LOG__&&console.error("WxCustom - hide: "+t.adUnitId)),t.handleQueue())}},{key:"toggle",value:function(e){e?this.show():this.hide()}},{key:"destory",value:function(){this.customAd&&(this.customAd.destroy(),this.customAd=null,r.default.I.adStat("custom",this.adUnitId,o.DOT_AD_TYPE.custom,o.DOT_AD_STATUS.interrupt),a.__LOG__&&console.error("WxCustom - destory: "+this.adUnitId))}},{key:"onLoad",value:function(){var t=e.I;t.customAd&&(t.show(!1),a.__LOG__&&console.error("WxCustom - onLoad: "+t.adUnitId),t.unbind(),t.resolve&&t.resolve({adUnitId:t.adUnitId,top:t.bannerParams.top,left:t.bannerParams.left}))}},{key:"onError",value:function(t){a.__LOG__&&console.error("WxCustom - onError",t);var n=e.I;!n._isErrored&&n.handleError(t,Object.assign(Object.assign({},a.BannerError.BannerFail),{adUnitId:n.adUnitId}))}},{key:"onClose",value:function(){e.I.customAd=null,r.default.I.dot("wxCustom_close")}},{key:"handleShowError",value:function(t){a.__LOG__&&console.error("WxCustom - handleShowError",t);var n=e.I,i=t.errCode,r=t.errMsg;!n.isErrored&&n.handleError(t,{code:i,msg:r})}},{key:"handleError",value:function(t,n){var i=e.I;i.unbind(),i._isErrored=!0,i.customAd&&i.customAd.destroy(),i.customAd=null,i.handleQueue(),i.reject&&i.reject(Object.assign(Object.assign({},n),{adUnitId:i.adUnitId})),r.default.I.adStat("custom",this.adUnitId,o.DOT_AD_TYPE.custom,o.DOT_AD_STATUS.fail),a.__LOG__&&console.error("WxCustom - onError: "+i.adUnitId)}},{key:"unbind",value:function(){this.customAd&&(this.customAd.offLoad(this.onLoad),this.customAd.offClose(this.onClose),this.customAd.offError(this.onError))}},{key:"handleQueue",value:function(){var t=e.I;t.queue.length>0?(t.isEnd=!1,t.queue.shift()()):t.isEnd=!1}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=s,cc._RF.pop()},{LogService:"LogService",SDKConst:"SDKConst",SDKEnum:"SDKEnum",SDKUtils:"SDKUtils"}],WxDefined:[function(e,t,n){"use strict";cc._RF.push(t,"304e8lB6kpIpKlZdBC5JbaT","WxDefined"),Object.defineProperty(n,"__esModule",{value:!0}),n.defined=void 0,cc._RF.pop()},{}],WxHelper:[function(e,t,n){"use strict";cc._RF.push(t,"bde3cPTR11ATYZvofx+oHag","WxHelper"),Object.defineProperty(n,"__esModule",{value:!0}),n.WxHelper=void 0,n.WxHelper=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"getSystemInfo",value:function(){"undefined"!=typeof wx&&(this.SystemInfo=wx.getSystemInfoSync())}},{key:"postMessage",value:function(e,t){"undefined"!=typeof wx&&this.checkVerison("1.9.92")&&(cc.log("\u53d1\u9001\u4e8b\u4ef6"),wx.getOpenDataContext().postMessage({eventType:e,data:t}))}},{key:"updateWxRank",value:function(e){if("undefined"!=typeof wx&&this.checkVerison("1.9.92")){var t={score:e};cc.error("score",e),wx.setUserCloudStorage({KVDataList:[{key:"score",value:JSON.stringify(t)}]})}}},{key:"createFeedbackButton",value:function(e){var t=this.computWxPosition(e);return wx.createFeedbackButton({type:"text",text:" ",style:{left:t.left,top:t.top,width:t.width,height:t.height,borderRadius:5}})}},{key:"createUserInfoButton",value:function(e){var t=this.computWxPosition(e);return wx.createUserInfoButton({type:"text",text:" ",style:{left:t.left,top:t.top,width:t.width,height:t.height,borderRadius:5},withCredentials:!0})}},{key:"computWxPosition",value:function(e){var t={left:0,top:0,width:0,height:0},n=e.getBoundingBoxToWorld(),i=cc.view.getDevicePixelRatio(),a=cc.view.getScaleX()/i;return t.left=n.x*a,t.top=this.SystemInfo.screenHeight-(n.y+n.height)*a,t.width=n.width*a,t.height=n.height*a,cc.log(t),t}},{key:"compareVersion",value:function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var i=0;i<n;i++){var a=parseInt(e[i]),r=parseInt(t[i]);if(a>r)return 1;if(a<r)return-1}return 0}},{key:"checkVerison",value:function(e){return"undefined"!=typeof wx&&this.compareVersion(this.SystemInfo.SDKVersion,e)>=0}},{key:"showModal",value:function(e){return new Promise(function(t,n){"undefined"!=typeof wx?wx.showModal(Object.assign(Object.assign({},e),{success:function(e){e.confirm?t(!0):t(!1)},fail:function(){n()}})):cc.log(JSON.stringify(e))})}},{key:"showToast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500;"undefined"!=typeof wx&&wx.showToast({title:e,icon:"none",duration:t})}},{key:"copy",value:function(e){return this.checkVerison("1.1.0")?new Promise(function(t){wx.setClipboardData({data:e,success:function(e){t(e)},fail:function(){t("")}})}):Promise.reject("")}},{key:"vibrateLong",value:function(){return this.checkVerison("1.2.0")?new Promise(function(e){wx.vibrateLong({success:function(){e(1)},fail:function(){e(0)}})}):Promise.reject(null)}},{key:"vibrateShort",value:function(){if("undefined"!=typeof wx)return this.checkVerison("1.2.0")?new Promise(function(e){wx.vibrateShort({success:function(){e({code:0})},fail:function(){e({code:1})}})}):Promise.reject(null)}},{key:"checkUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.checkVerison("1.9.90")){var t=wx.getUpdateManager();t.onCheckForUpdate(function(e){console.log("updateManager",e.hasUpdate)}),t.onUpdateReady(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u8bf7\u91cd\u542f\u5e94\u7528\uff01",showCancel:e,success:function(e){e.confirm&&t.applyUpdate()}})}),t.onUpdateFailed(function(){})}}},{key:"openCustomerServiceConversation",value:function(){var e=this;return new Promise(function(t){e.checkVerison("2.0.3")||t({code:1}),wx.openCustomerServiceConversation({showMessageCard:!0,sendMessageTitle:"\u6211\u8981\u66f4\u591a\u597d\u73a9\uff01",sendMessageImg:"http://dep.miso-lab.com/tetrischangeskin/bin/share/concat.png",success:function(){t({code:0})},fail:function(){t({code:1})}})})}},{key:"openConversation",value:function(){var e=this;return new Promise(function(t){e.checkVerison("2.0.3")||t({code:1}),wx.openCustomerServiceConversation({success:function(){t({code:0})},fail:function(){t({code:1})}})})}},{key:"onShow",value:function(e){"undefined"!=typeof wx&&wx.onShow(e)}},{key:"onHide",value:function(e){"undefined"!=typeof wx&&wx.onHide(e)}},{key:"updateShareMenu",value:function(e){"undefined"!=typeof wx&&wx.updateShareMenu({withShareTicket:e})}},{key:"authorize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scope.userInfo";"undefined"!=typeof wx&&wx.getSetting({success:function(t){t.authSetting[e]||wx.authorize({scope:e,success:function(){}})}})}},{key:"getUserInfo",value:function(e){wx.getUserInfo({success:function(t){e(t)},fail:function(t){e(t)}})}},{key:"createGameClubButton",value:function(e){var t=this.computWxPosition(e);return wx.createGameClubButton({icon:"green",style:{left:t.left,top:t.top,width:t.width,height:t.height}})}}]),e}(),cc._RF.pop()},{}],WxInit:[function(e,t,n){"use strict";cc._RF.push(t,"188e2UMcypGYbLf71bAaevY","WxInit"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("WxApi"),a=e("WxSystem"),r=e("WxLaunch"),o=e("SDKConst"),s=e("DataService"),c=e("SDKUtils"),u=e("SDKEventCenter"),l=e("SDKEventEnum"),d=e("SDKEnum"),h=e("DateUtils"),f=e("LogService"),p=function(){function e(){_classCallCheck2(this,e),this.onlineTime=h.default.nowTime,wx.onShow(this.onShow.bind(this)),wx.onHide(this.onHide.bind(this)),wx.onNetworkStatusChange(this.onNetworkStatusChange.bind(this))}return _createClass2(e,[{key:"init",value:function(){var e=this,t=a.default.I.SystemData.platform,n=r.default.I.LaunchData;console.log("\u542f\u52a8\u4fe1\u606f",n);var c=n.query,u=n.scene,l=n.referrerInfo,d=c.invite_type,h=c.channelId,f=c.channel_id,p=c.td_channelid,v=c.channel,_=c.share_id,y=c.share_key,g=c.user_invite_uid,m=c.weixinadinfo,k=c.account_id,S=c.service_id,w=c.shareMessageToFriendScene,I=c.clue_token,D=c.ad_id,b=c.creative_id,T=c.advertister_id,A=c.request_id,C=c.adgroup_id,P=h||f||v||p;if(m){var x=m.split(".");x&&x.length&&(P=x[0])}D&&(P=D),w&&w>=0&&w<=50&&(y=o.GAMEDATA.shareMessageToFriend.sharekey,_=o.GAMEDATA.shareMessageToFriend.share_id),o.__LOG__&&console.warn("====> PCSDK wxinit query user_invite_uid\uff1a".concat(g,"; fromChannel\uff1a").concat(P,"; channelId\uff1a").concat(P,"; scene\uff1a").concat(u,"; share_id\uff1a").concat(_,"; share_key\uff1a").concat(y,";")),s.default.I.setScene(u).setReferrerInfo(l||{}).setShareId(_).setPlatform(t).setShareKey(y).setChannelId(P).setQueryChannelId(P||o.GAMEDATA.channel_id).setInviteType(d).setQueryUserInviteUid(g||0).setQueryExtData({account_id:k,service_id:S}).setSystemId().setLaunchSource().setClueToken(I).setCreativeId(b).setAdvertisterId(T).setRequestId(A).setLaunchAdInfo({account_id:k,adgroup_id:C,creative_id:b}),i.default.I.getNetworkType().then(function(t){return e.setNetworkType(t)}).catch(function(t){return e.setNetworkType(t)})}},{key:"onShow",value:function(e){console.log("onshow_opts",e);var t=h.default.nowTime,n=e.scene,i=e.shareTicket;if(this.onlineTime=t,s.default.I.setScene(n).setLaunchTime(t).setLaunchSource(),e&&e.query){var a=e.query,r=a.share_key,o=a.share_id,p=a.invite_type,v=a.user_invite_uid;!c.default.isUndefined(o)&&s.default.I.setShareId(o),!c.default.isUndefined(r)&&s.default.I.setShareKey(r),!c.default.isUndefined(p)&&s.default.I.setInviteType(p),!c.default.isUndefined(i)&&s.default.I.setShareTicket(i),!c.default.isUndefined(v)&&s.default.I.setQueryUserInviteUid(v),o&&r&&f.default.I.share(r,o,d.DOT_SHARE_TYPE.click)}u.default.I.emit(l.SDKEventEnum.APP_SHOW,e)}},{key:"onHide",value:function(){u.default.I.emit(l.SDKEventEnum.APP_HIDE),f.default.I.bannerExposure(),this.onlineTime&&(f.default.I.logOut(h.default.nowTime-this.onlineTime),this.onlineTime=0)}},{key:"onNetworkStatusChange",value:function(e){console.warn("\u7f51\u7edc\u53d8\u5316\u4e86\uff1a",e),this.setNetworkType(e)}},{key:"setNetworkType",value:function(e){e&&e.networkType&&s.default.I.setNetworkType(e.networkType)}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=p,cc._RF.pop()},{DataService:"DataService",DateUtils:"DateUtils",LogService:"LogService",SDKConst:"SDKConst",SDKEnum:"SDKEnum",SDKEventCenter:"SDKEventCenter",SDKEventEnum:"SDKEventEnum",SDKUtils:"SDKUtils",WxApi:"WxApi",WxLaunch:"WxLaunch",WxSystem:"WxSystem"}],WxInterstitial:[function(e,t,n){"use strict";cc._RF.push(t,"1e261K/DypKqIG4qvui02sw","WxInterstitial"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SDKEnum"),r=e("LogService"),o=e("WxApi"),s=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"initInterstitialAd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.GAMEDATA.interstitialAdId;this.interstitialAdId=e,this.createInterstitial()}},{key:"showInterstitialAd",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.GAMEDATA.interstitialAdId;return new Promise(function(n){return __awaiter(e,void 0,void 0,_regenerator.default.mark(function e(){var i=this;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.interstitialAdId=t,this.interstitialSuccell?this.interstitialAd.show().then(function(){n&&n({code:0,msg:"\u5c55\u793a\u6210\u529f\uff01"}),r.default.I.adStat("InterstitialAd",i.interstitialAdId,a.DOT_AD_TYPE.interstitial,a.DOT_AD_STATUS.show)}).catch(function(e){r.default.I.adStat("InterstitialAd",i.interstitialAdId,a.DOT_AD_TYPE.interstitial,a.DOT_AD_STATUS.fail),n&&n({code:e.errCode,msg:e.errMsg})}):this.createInterstitial(!0,n);case 1:case"end":return e.stop()}},e,this)}))})}},{key:"createInterstitial",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0;r.default.I.adStat("InterstitialAd",this.interstitialAdId,a.DOT_AD_TYPE.interstitial,a.DOT_AD_STATUS.request),this.interstitialAd=o.default.I.createInterstitialAd(this.interstitialAdId),this.interstitialAd.onLoad(function(){return __awaiter(t,void 0,void 0,_regenerator.default.mark(function t(){var o=this;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.interstitialSuccell=!0,r.default.I.adStat("InterstitialAd",this.interstitialAdId,a.DOT_AD_TYPE.interstitial,a.DOT_AD_STATUS.rt),n&&this.interstitialAd.show().then(function(){i&&i({code:0,msg:"\u5c55\u793a\u6210\u529f\uff01"}),r.default.I.adStat("InterstitialAd",o.interstitialAdId,a.DOT_AD_TYPE.interstitial,a.DOT_AD_STATUS.show)}).catch(function(t){e.interstitialSuccell=!1,r.default.I.adStat("InterstitialAd",o.interstitialAdId,a.DOT_AD_TYPE.interstitial,a.DOT_AD_STATUS.fail),i&&i({code:t.errCode,msg:t.errMsg})});case 1:case"end":return t.stop()}},t,this)}))}),this.interstitialAd.onError(function(n){r.default.I.adStat("InterstitialAd",t.interstitialAdId,a.DOT_AD_TYPE.interstitial,a.DOT_AD_STATUS.fail),e.interstitialSuccell=!1,i&&i({code:n.errCode,msg:n.errMsg})}),this.interstitialAd.onClose(function(){t.createInterstitial(!1)})}}]),e}();n.default=s,s.interstitialAdId=i.GAMEDATA.interstitialAdId,s.interstitialSuccell=!1,cc._RF.pop()},{LogService:"LogService",SDKConst:"SDKConst",SDKEnum:"SDKEnum",WxApi:"WxApi"}],WxLaunch:[function(e,t,n){"use strict";cc._RF.push(t,"640e9AX5vdNjZ+vi7mf1+Er","WxLaunch"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){_classCallCheck2(this,e),this.data=wx.getLaunchOptionsSync()}return _createClass2(e,[{key:"LaunchData",get:function(){return this.data}},{key:"query",get:function(){return this.data.query}},{key:"scene",get:function(){return this.data.scene}},{key:"shareTicket",get:function(){return this.data.shareTicket}},{key:"referrerInfo",get:function(){return this.data.referrerInfo}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=i,cc._RF.pop()},{}],WxLogin:[function(e,t,n){"use strict";cc._RF.push(t,"291f5naJMhGsaccFfbNp/02","WxLogin"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("WxApi"),a=e("DataService"),r=e("SDKConst"),o=e("SDKApi"),s=e("WxSystem"),c=e("DateUtils"),u=e("LogService"),l=e("SDKEnum"),d=e("ShareVideoService"),h=e("OnlineService"),f=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"login",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){var n=this;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,a){return __awaiter(n,void 0,void 0,_regenerator.default.mark(function n(){var r,o=this;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.default.I.login();case 2:r=n.sent,e?i.default.I.getUserinfo().then(function(e){return o.authedlogin(e,r,t,a)}).catch(function(e){return o.weakLogin(e,r,t,a)}):this.weakLogin({errCode:1,msg:"\u9ed8\u8ba4\u672a\u6388\u6743\u767b\u5f55"},r,t,a);case 4:case"end":return n.stop()}},n,this)}))}));case 1:case"end":return t.stop()}},t)}))}},{key:"authedlogin",value:function(e,t,n,i){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function r(){var s,c,u,l,d,h=this;return _regenerator.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.rawData,s=e.iv,c=e.encryptedData,u=e.signature,l=e.userInfo,d=Object.assign(Object.assign({},this.buildParams()),{code:t,signature:u,iv:s,encryptedData:c}),l&&a.default.I.setGender(l.gender),o.SDKApi.Login(d).then(function(e){h.handleLogin(e,n,!0),n(e)}).catch(function(e){return i(e)});case 2:case"end":return r.stop()}},r,this)}))}},{key:"weakLogin",value:function(e,t,n,i){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function s(){var c,u=this;return _regenerator.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e&&e.errCode!==r.ErrorCode.InvalidLogin.code){s.next=2;break}return s.abrupt("return");case 2:a.default.I.ReferrerInfo,c=Object.assign(Object.assign({},this.buildParams()),{code:t}),o.SDKApi.weakLogin(c).then(function(e){u.handleLogin(e,n,!1)}).catch(function(e){return i(e)});case 5:case"end":return s.stop()}},s,this)}))}},{key:"handleLogin",value:function(e,t){if(e&&e.data){var n=e.data,i=n.channel,r=n.uid,o=n.firstlogin,s=n.token,c=n.reftoken,f=n.openid,p=n.expire,v=n.isnew,_=n.gameconfig,y=n.logindays,g=n.amount,m=n.pon,k=n.ad_info;u.default.I.setLogind({channel:i,userId:r,regTime:o,openId:f,isnew:v,token:s,refToken:c,expire:p,logindays:y,amount:g,pon:m,ad_info:k}),h.default.I.setData(_),u.default.I.active(),!this.isFirst&&a.default.I.ShareKey&&a.default.I.ShareId&&(this.isFirst=!0,u.default.I.share(a.default.I.ShareKey,a.default.I.ShareId,l.DOT_SHARE_TYPE.click));try{this.handleExpire(p)}catch(S){console.log("handleExpire_error",S)}d.default.I.forward()}t(e)}},{key:"buildParams",value:function(){return{channel:a.default.I.QueryChannelId+"",brand:s.default.I.brand,model:s.default.I.model,version:s.default.I.version,system:s.default.I.system,platform:s.default.I.platform,sdkversion:s.default.I.SDKVersion,shareuid:+a.default.I.QueryUserInviteUid,scene:a.default.I.Scene+"",sharekey:a.default.I.ShareKey,shareid:a.default.I.ShareId+"",clue_token:a.default.I.Data.clue_token,creative_id:a.default.I.Data.creative_id,advertister_id:a.default.I.Data.advertister_id,request_id:a.default.I.Data.request_id,ad_info:JSON.stringify(a.default.I.Data.launch_ad_info)}}},{key:"handleExpire",value:function(e){var t=e-c.default.now;this.countDown&&clearTimeout(this.countDown),this.countDown=setTimeout(this.refreshToken,1e3*t)}},{key:"refreshToken",value:function(){var e=this;o.SDKApi.reftoken({channel:a.default.I.ChannelId+"",uid:a.default.I.UserId,token:a.default.I.Token,reftoken:a.default.I.refToken}).then(function(t){var n=t.data,i=n.token,r=n.reftoken,o=n.expire;a.default.I.setLoginData({token:i,refToken:r,expire:o});try{e.handleExpire(o)}catch(s){console.log("handleExpire_error",s)}})}}],[{key:"I",get:function(){return this._instance||(this._instance=new e)}}]),e}();n.default=f,cc._RF.pop()},{DataService:"DataService",DateUtils:"DateUtils",LogService:"LogService",OnlineService:"OnlineService",SDKApi:"SDKApi",SDKConst:"SDKConst",SDKEnum:"SDKEnum",ShareVideoService:"ShareVideoService",WxApi:"WxApi",WxSystem:"WxSystem"}],WxPay:[function(e,t,n){"use strict";cc._RF.push(t,"9f785EOneBNdoRHjVChRJmZ","WxPay"),Object.defineProperty(n,"__esModule",{value:!0});var i=e("SDKConst"),a=e("SDKEnum"),r=e("SDKApi"),o=e("DataService"),s=e("WxApi"),c=e("WxSystem"),u=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"pay",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(c,u){var l=i.GAMEDATA.MidasPay,d=l.Mode,h=l.OfferId,f=l.ZoneId,p=l.CurrencyType,v=(l.Platform,o.default.I.EnvEnum===a.EnvCode.Prod?0:1),_=o.default.I.Platform,y={mode:d,env:v,platform:_,offerId:h,currencyType:p,buyQuantity:e.money/10,zoneId:f},g="";for(var m in n)g+="".concat(m,"=").concat(n[m],"&");g=g.substring(0,g.length-1),g=encodeURIComponent(g);var k=Object.assign(Object.assign({},t.buildParams()),{extend:g,midasenv:o.default.I.EnvEnum===a.EnvCode.Prod?0:1,orderid:e.orderid,payid:e.payid,goodid:e.goodid,type:0,money:e.money,platform:_});r.SDKApi.pay(k).then(function(i){i.code?u(i):s.default.I.requestMidasPayment(y).then(function(){return t.handlePaySuccess(Object.assign(Object.assign({},e),{platform:_}),n,c,u)}).catch(function(i){return t.handlePayError(Object.assign(Object.assign({},e),{platform:_}),n,i,u)})})})}},{key:"handlePaySuccess",value:function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3;return __awaiter(this,void 0,void 0,_regenerator.default.mark(function c(){var u,l,d,h;return _regenerator.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(l in u="",t)u+="".concat(l,"=").concat(t[l],"&");u=u.substring(0,u.length-1),u=encodeURIComponent(u),d=Object.assign(Object.assign({},this.buildParams()),{extend:u,midasenv:o.default.I.EnvEnum===a.EnvCode.Prod?0:1,orderid:e.orderid,payid:e.payid,goodid:e.goodid,type:1,money:e.money,platform:e.platform}),h=this,r.SDKApi.pay(d).then(function(a){a.code?(s=Math.min(2*s,6e4),setTimeout(function(){h.handlePaySuccess(e,t,n,i,s)},s)):n(a)});case 6:case"end":return c.stop()}},c,this)}))}},{key:"handlePayError",value:function(e,t,n,i){console.log("\u652f\u4ed8\u5931\u8d25",JSON.stringify(n));var s=2;n.errCode+""=="1"&&(s=3);var c="";for(var u in t)c+="".concat(u,"=").concat(t[u],"&");c=c.substring(0,c.length-1),c=encodeURIComponent(c);var l=Object.assign(Object.assign({},this.buildParams()),{extend:c,midasenv:o.default.I.EnvEnum===a.EnvCode.Prod?0:1,orderid:e.orderid,payid:e.payid,goodid:e.goodid,type:s,money:e.money,platform:e.platform});r.SDKApi.pay(l),i(n)}},{key:"buildParams",value:function(){var e=i.GAMEDATA.game_id,t=o.default.I.ChannelId;return{gameid:e,openid:o.default.I.OpenId,channel:t,brand:c.default.I.brand,model:c.default.I.model,version:c.default.I.version,system:c.default.I.system,sdkversion:c.default.I.SDKVersion,scene:o.default.I.Scene+"",uid:o.default.I.UserId,token:o.default.I.Token,env:1===o.default.I.EnvEnum?"pre":"prod"}}}],[{key:"I",get:function(){return this._instance||(this._instance=new e)}}]),e}();n.default=u,cc._RF.pop()},{DataService:"DataService",SDKApi:"SDKApi",SDKConst:"SDKConst",SDKEnum:"SDKEnum",WxApi:"WxApi",WxSystem:"WxSystem"}],WxStorage:[function(e,t,n){"use strict";cc._RF.push(t,"60130FMeqNOtLgYWD2Tep8F","WxStorage"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,[{key:"getItem",value:function(e){return wx.getStorageSync(e)}},{key:"setItem",value:function(e,t){wx.setStorageSync(e,t)}},{key:"removeItem",value:function(e){wx.removeStorageSync(e)}},{key:"clear",value:function(){wx.clearStorageSync()}},{key:"hasKey",value:function(e){var t=wx.getStorageInfoSync().keys,n=[];return t&&t.length&&(n=t.filter(function(t){return t===e})),0!==n.length}}]),e}(),cc._RF.pop()},{}],WxSystem:[function(e,t,n){"use strict";cc._RF.push(t,"d340e2rw6JMiJexQuFeOdBk","WxSystem"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){_classCallCheck2(this,e),this.data=wx.getSystemInfoSync()}return _createClass2(e,[{key:"SystemData",get:function(){return this.data}},{key:"version",get:function(){return this.data.version}},{key:"system",get:function(){return this.data.system}},{key:"platform",get:function(){return this.data.platform}},{key:"language",get:function(){return this.data.language}},{key:"winWidth",get:function(){return this.data.windowWidth}},{key:"winHeight",get:function(){return this.data.windowHeight}},{key:"screenWidth",get:function(){return this.data.screenWidth}},{key:"screenHeight",get:function(){return this.data.screenHeight}},{key:"SDKVersion",get:function(){return this.data.SDKVersion}},{key:"brand",get:function(){return this.data.brand}},{key:"model",get:function(){return this.data.model}}],[{key:"I",get:function(){return this.instance||(this.instance=new e)}}]),e}();n.default=i,cc._RF.pop()},{}],md5:[function(e,t,n){"use strict";cc._RF.push(t,"62bcfqSbjVMOrufv1thC/52","md5"),Object.defineProperty(n,"__esModule",{value:!0}),n.Md5=void 0;var i=function(){function e(){_classCallCheck2(this,e),this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return _createClass2(e,[{key:"start",value:function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this}},{key:"appendStr",value:function(t){var n,i,a=this._buffer8,r=this._buffer32,o=this._bufferLength;for(i=0;i<t.length;i+=1){if((n=t.charCodeAt(i))<128)a[o++]=n;else if(n<2048)a[o++]=192+(n>>>6),a[o++]=63&n|128;else if(n<55296||n>56319)a[o++]=224+(n>>>12),a[o++]=n>>>6&63|128,a[o++]=63&n|128;else{if((n=1024*(n-55296)+(t.charCodeAt(++i)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");a[o++]=240+(n>>>18),a[o++]=n>>>12&63|128,a[o++]=n>>>6&63|128,a[o++]=63&n|128}o>=64&&(this._dataLength+=64,e._md5cycle(this._state,r),o-=64,r[0]=r[16])}return this._bufferLength=o,this}},{key:"appendAsciiStr",value:function(t){for(var n,i=this._buffer8,a=this._buffer32,r=this._bufferLength,o=0;;){for(n=Math.min(t.length-o,64-r);n--;)i[r++]=t.charCodeAt(o++);if(r<64)break;this._dataLength+=64,e._md5cycle(this._state,a),r=0}return this._bufferLength=r,this}},{key:"appendByteArray",value:function(t){for(var n,i=this._buffer8,a=this._buffer32,r=this._bufferLength,o=0;;){for(n=Math.min(t.length-o,64-r);n--;)i[r++]=t[o++];if(r<64)break;this._dataLength+=64,e._md5cycle(this._state,a),r=0}return this._bufferLength=r,this}},{key:"getState",value:function(){var e=this._state;return{buffer:String.fromCharCode.apply(null,this._buffer8),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}},{key:"setState",value:function(e){var t,n=e.buffer,i=e.state,a=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],t=0;t<n.length;t+=1)this._buffer8[t]=n.charCodeAt(t)}},{key:"end",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this._bufferLength,a=this._buffer8,r=this._buffer32,o=1+(i>>2);if(this._dataLength+=i,a[i]=128,a[i+1]=a[i+2]=a[i+3]=0,r.set(e.buffer32Identity.subarray(o),o),i>55&&(e._md5cycle(this._state,r),r.set(e.buffer32Identity)),(t=8*this._dataLength)<=4294967295)r[14]=t;else{var s=t.toString(16).match(/(.*?)(.{0,8})$/);if(null===s)return;var c=parseInt(s[2],16),u=parseInt(s[1],16)||0;r[14]=c,r[15]=u}return e._md5cycle(this._state,r),n?this._state:e._hex(this._state)}}],[{key:"hashStr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.onePassHasher.start().appendStr(e).end(t)}},{key:"hashAsciiStr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.onePassHasher.start().appendAsciiStr(e).end(t)}},{key:"_hex",value:function(t){var n,i,a,r,o=e.hexChars,s=e.hexOut;for(r=0;r<4;r+=1)for(i=8*r,n=t[r],a=0;a<8;a+=2)s[i+1+a]=o.charAt(15&n),n>>>=4,s[i+0+a]=o.charAt(15&n),n>>>=4;return s.join("")}},{key:"_md5cycle",value:function(e,t){var n=e[0],i=e[1],a=e[2],r=e[3];i=((i+=((a=((a+=((r=((r+=((n=((n+=(i&a|~i&r)+t[0]-680876936|0)<<7|n>>>25)+i|0)&i|~n&a)+t[1]-389564586|0)<<12|r>>>20)+n|0)&n|~r&i)+t[2]+606105819|0)<<17|a>>>15)+r|0)&r|~a&n)+t[3]-1044525330|0)<<22|i>>>10)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i&a|~i&r)+t[4]-176418897|0)<<7|n>>>25)+i|0)&i|~n&a)+t[5]+1200080426|0)<<12|r>>>20)+n|0)&n|~r&i)+t[6]-1473231341|0)<<17|a>>>15)+r|0)&r|~a&n)+t[7]-45705983|0)<<22|i>>>10)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i&a|~i&r)+t[8]+1770035416|0)<<7|n>>>25)+i|0)&i|~n&a)+t[9]-1958414417|0)<<12|r>>>20)+n|0)&n|~r&i)+t[10]-42063|0)<<17|a>>>15)+r|0)&r|~a&n)+t[11]-1990404162|0)<<22|i>>>10)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i&a|~i&r)+t[12]+1804603682|0)<<7|n>>>25)+i|0)&i|~n&a)+t[13]-40341101|0)<<12|r>>>20)+n|0)&n|~r&i)+t[14]-1502002290|0)<<17|a>>>15)+r|0)&r|~a&n)+t[15]+1236535329|0)<<22|i>>>10)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i&r|a&~r)+t[1]-165796510|0)<<5|n>>>27)+i|0)&a|i&~a)+t[6]-1069501632|0)<<9|r>>>23)+n|0)&i|n&~i)+t[11]+643717713|0)<<14|a>>>18)+r|0)&n|r&~n)+t[0]-373897302|0)<<20|i>>>12)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i&r|a&~r)+t[5]-701558691|0)<<5|n>>>27)+i|0)&a|i&~a)+t[10]+38016083|0)<<9|r>>>23)+n|0)&i|n&~i)+t[15]-660478335|0)<<14|a>>>18)+r|0)&n|r&~n)+t[4]-405537848|0)<<20|i>>>12)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i&r|a&~r)+t[9]+568446438|0)<<5|n>>>27)+i|0)&a|i&~a)+t[14]-1019803690|0)<<9|r>>>23)+n|0)&i|n&~i)+t[3]-187363961|0)<<14|a>>>18)+r|0)&n|r&~n)+t[8]+1163531501|0)<<20|i>>>12)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i&r|a&~r)+t[13]-1444681467|0)<<5|n>>>27)+i|0)&a|i&~a)+t[2]-51403784|0)<<9|r>>>23)+n|0)&i|n&~i)+t[7]+1735328473|0)<<14|a>>>18)+r|0)&n|r&~n)+t[12]-1926607734|0)<<20|i>>>12)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i^a^r)+t[5]-378558|0)<<4|n>>>28)+i|0)^i^a)+t[8]-2022574463|0)<<11|r>>>21)+n|0)^n^i)+t[11]+1839030562|0)<<16|a>>>16)+r|0)^r^n)+t[14]-35309556|0)<<23|i>>>9)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i^a^r)+t[1]-1530992060|0)<<4|n>>>28)+i|0)^i^a)+t[4]+1272893353|0)<<11|r>>>21)+n|0)^n^i)+t[7]-155497632|0)<<16|a>>>16)+r|0)^r^n)+t[10]-1094730640|0)<<23|i>>>9)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i^a^r)+t[13]+681279174|0)<<4|n>>>28)+i|0)^i^a)+t[0]-358537222|0)<<11|r>>>21)+n|0)^n^i)+t[3]-722521979|0)<<16|a>>>16)+r|0)^r^n)+t[6]+76029189|0)<<23|i>>>9)+a|0,i=((i+=((a=((a+=((r=((r+=((n=((n+=(i^a^r)+t[9]-640364487|0)<<4|n>>>28)+i|0)^i^a)+t[12]-421815835|0)<<11|r>>>21)+n|0)^n^i)+t[15]+530742520|0)<<16|a>>>16)+r|0)^r^n)+t[2]-995338651|0)<<23|i>>>9)+a|0,i=((i+=((r=((r+=(i^((n=((n+=(a^(i|~r))+t[0]-198630844|0)<<6|n>>>26)+i|0)|~a))+t[7]+1126891415|0)<<10|r>>>22)+n|0)^((a=((a+=(n^(r|~i))+t[14]-1416354905|0)<<15|a>>>17)+r|0)|~n))+t[5]-57434055|0)<<21|i>>>11)+a|0,i=((i+=((r=((r+=(i^((n=((n+=(a^(i|~r))+t[12]+1700485571|0)<<6|n>>>26)+i|0)|~a))+t[3]-1894986606|0)<<10|r>>>22)+n|0)^((a=((a+=(n^(r|~i))+t[10]-1051523|0)<<15|a>>>17)+r|0)|~n))+t[1]-2054922799|0)<<21|i>>>11)+a|0,i=((i+=((r=((r+=(i^((n=((n+=(a^(i|~r))+t[8]+1873313359|0)<<6|n>>>26)+i|0)|~a))+t[15]-30611744|0)<<10|r>>>22)+n|0)^((a=((a+=(n^(r|~i))+t[6]-1560198380|0)<<15|a>>>17)+r|0)|~n))+t[13]+1309151649|0)<<21|i>>>11)+a|0,i=((i+=((r=((r+=(i^((n=((n+=(a^(i|~r))+t[4]-145523070|0)<<6|n>>>26)+i|0)|~a))+t[11]-1120210379|0)<<10|r>>>22)+n|0)^((a=((a+=(n^(r|~i))+t[2]+718787259|0)<<15|a>>>17)+r|0)|~n))+t[9]-343485551|0)<<21|i>>>11)+a|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=a+e[2]|0,e[3]=r+e[3]|0}}]),e}();n.Md5=i,i.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),i.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),i.hexChars="0123456789abcdef",i.hexOut=[],i.onePassHasher=new i,"5d41402abc4b2a76b9719d911017c592"!==i.hashStr("hello")&&console.error("Md5 self test failed."),cc._RF.pop()},{}],shareTools:[function(e,t,n){"use strict";cc._RF.push(t,"9e454GehXxIBqWGRn1dgA/F","shareTools"),Object.defineProperty(n,"__esModule",{value:!0}),n.ShareKey=n.ShareTools=void 0;var i,a=e("WXSDK"),r=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"share",value:function(e,t,n){var i=this;"undefined"==typeof wx||this.isTest?t&&t.success&&t.success():(this.onShowAd=!0,a.default.share.share(e.toString(),t,n).then(function(e){return __awaiter(i,void 0,void 0,_regenerator.default.mark(function n(){return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.onShowAd=!1,t&&t.success&&t.success(e);case 1:case"end":return n.stop()}},n,this)}))}).catch(function(e){return __awaiter(i,void 0,void 0,_regenerator.default.mark(function n(){return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:this.onShowAd=!1,t&&t.fail?t&&t.fail&&t.fail(e):wx.showToast({title:e.msg,icon:"none",duration:1500});case 1:case"end":return n.stop()}},n,this)}))}))}},{key:"multitonShare",value:function(e,t,n){this.share(e,t,Object.assign({multiton:!0},n))}},{key:"pureShare",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.share(e,{},Object.assign({closeSimulate:!0},t))}},{key:"setForwardKey",value:function(e){a.default.share.setForwardKey(e)}},{key:"getShareType",value:function(e){try{return a.default.share.getType(e)}catch(t){return console.log("1"),2}}}]),e}();n.ShareTools=r,r.onShowAd=!1,r.isTest=!1,(i=n.ShareKey||(n.ShareKey={})).home="home",i.gridVideo="gridVideo",i.prop_xipai="prop_xipai",i.prop_pack="prop_pack",i.prop_clear="prop_clear",i.add_pots="add_pots",i.setting="setting",i.fuhuo="fuhuo",cc._RF.pop()},{WXSDK:"WXSDK"}],ts:[function(e,t){"use strict";cc._RF.push(t,"269dch0qBRJtp4dOIk1FWgM","ts"),cc._RF.pop()},{}],utils:[function(e,t,n){"use strict";cc._RF.push(t,"0de1d12K9VNVKHEn3Leq1NB","utils"),Object.defineProperty(n,"__esModule",{value:!0}),n.utils=void 0;var i=function(){function e(){_classCallCheck2(this,e)}return _createClass2(e,null,[{key:"isWX",get:function(){return"undefined"!=typeof wx}},{key:"tryParseJSON",value:function(e,t){var n=t;try{n=JSON.parse(e)||t}catch(i){}return n}},{key:"getLocalStorage",value:function(e,t){var n=cc.sys.localStorage.getItem(e)||"";return this.tryParseJSON(n,t)}},{key:"setLocalStorage",value:function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"isEmpty",value:function(e){return"{}"===JSON.stringify(e)}},{key:"random",value:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},{key:"randOneList",value:function(e){return e[this.random(0,e.length-1)]}},{key:"randomList",value:function(e){return e.sort(function(){return Math.random()-.5})}},{key:"randomOneByWeight",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var t,n=0,i=new Array,a=0;a<e.length;a++)t=void 0!==e[a].weight?e[a].weight:0,i[a]=t,n=this.mathGcd(n,t);for(var r=new Array,o=0,s=0,c=0;c<e.length;c++){s=i[c]/n;for(var u=0;u<s;u++)r.push(c);o+=s}return e[r[Math.floor(Math.random()*o)]]}},{key:"mathGcd",value:function(e,t){var n=Math.min(e,t),i=Math.max(e,t),a=1;if(0===e||0===t)return i;for(var r=n;r>=1;r--)if(n%r==0&&i%r==0){a=r;break}return a}},{key:"sum",value:function(e){return 0==e.length?0:e.reduce(function(e,t){return e+t},0)}},{key:"wait",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise(function(t){return cc.Canvas.instance.scheduleOnce(t,e/1e3)})}},{key:"until",value:function(e){return new Promise(function(t){cc.Canvas.instance.schedule(function(){e()&&t()},.01)})}},{key:"executeHandler",value:function(e){if(e&&e.target){for(var t=e.target.getComponent(e.component),n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(t&&t[e.handler])return t[e.handler].apply(t,i)}}},{key:"loadPrefab",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){var i=cc.loader.getRes(e,cc.Prefab);if(i){var a=cc.instantiate(i);t(a)}else cc.loader.loadRes(e,cc.Prefab,function(i,a){if(i)return cc.warn("loadPrefab error:"+e),void n(i);var r=cc.instantiate(a);t(r)})}));case 1:case"end":return t.stop()}},t)}))}},{key:"loadPrefab2",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){var i=this;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n){return __awaiter(i,void 0,void 0,_regenerator.default.mark(function i(){var a,r,o;return _regenerator.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(a=this.getRes(e,t))){i.next=6;break}r=cc.instantiate(a),n(r),i.next=12;break;case 6:if(a){i.next=12;break}return i.next=9,this.loadRes(e,t);case 9:a=i.sent,o=cc.instantiate(a),n(o);case 12:case"end":return i.stop()}},i,this)}))}));case 1:case"end":return n.stop()}},n)}))}},{key:"toTimeStr",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e;n&&(t=Math.floor(i/3600)+"",i%=3600);var a=Math.floor(i/60)+"",r=Math.floor(i%60)+"";return a=1===a.length?"0"+a:a,r=1===r.length?"0"+r:r,n?(t=1===t.length?"0"+t:t)+":"+a+":"+r:a+":"+r}},{key:"tips",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){var i,a;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e||(e="\u7f51\u7edc\u9519\u8bef\uff01"),!(i=cc.director.getScene()).getChildByName("tip")){n.next=4;break}return n.abrupt("return");case 4:return n.next=6,this.loadPrefab("tips");case 6:(a=n.sent).getComponentInChildren(cc.Label).string=e,i.addChild(a,1e3),a.opacity=0,a.runAction(cc.sequence(cc.fadeIn(.2),cc.delayTime(t),cc.fadeOut(.2),cc.callFunc(function(){a.destroy()})));case 8:case"end":return n.stop()}},n,this)}))}},{key:"showLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){var n,i;return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=cc.director.getScene(),t.next=3,this.loadPrefab("mask");case 3:return i=t.sent,this.mask=i,n.addChild(i,999),t.next=8,this.wait(e);case 8:i.destroy();case 9:case"end":return t.stop()}},t,this)}))}},{key:"hideLoading",value:function(){this.mask&&this.mask.destroy()}},{key:"nowDayBegin",value:function(){return new Date((new Date).toLocaleDateString()).getTime()}},{key:"nextDay",value:function(){return new Date((new Date).toLocaleDateString()).getTime()+864e5}},{key:"getDateNow12",value:function(){return new Date((new Date).toLocaleDateString()).getTime()+432e5}},{key:"getHMS",value:function(e){e/=1e3;var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60);return t>0?t+":"+this.add(n)+":"+this.add(i):this.add(n)+":"+this.add(i)}},{key:"getFormatBySecond2",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date(e),i=n.getFullYear(),a=n.getMonth()+1,r=n.getDate(),o=n.getHours(),s=n.getMinutes(),c=n.getSeconds();return t?i+"-"+this.add(a)+"-"+this.add(r):i+"-"+a+"-"+r+" "+o+":"+s+":"+c}},{key:"add",value:function(e){return e<10?"0"+e:e}},{key:"loadJson",value:function(e){return new Promise(function(t){cc.loader.loadRes(e,function(e,n){t(e?{code:1,msg:e.message}:{code:0,data:n.json})})})}},{key:"hexToColor",value:function(e){return cc.Color.BLACK.fromHEX(e)}},{key:"playAnim",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise(function(i){var a;if(cc.isValid(e,!0)?a=e.getComponent(cc.Animation):i(null),a){var r=a.play(t);a.once("end",function(){i(r)}),a.once(cc.Animation.EventType.FINISHED,function(){1==n?e.active=!1:2==n&&e.destroy(),i(r)})}else i(null)})}},{key:"playAnimReverse",value:function(e,t,n){return new Promise(function(i){var a=e.getComponent(cc.Animation);if(a){var r=a.play(t,n),o=r.wrapMode;r.wrapMode=cc.WrapMode.Reverse,a.once(cc.Animation.EventType.STOP,function(){r.wrapMode=o,i(r)})}else i(null)})}},{key:"webCopyString",value:function(e){var t=e+"",n=document.createElement("textarea");n.value=t,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";var i=getSelection(),a=!1;i.rangeCount>0&&(a=i.getRangeAt(0)),document.body.appendChild(n),n.select(),n.selectionStart=0,n.selectionEnd=t.length;var r=!1;try{r=document.execCommand("copy")}catch(o){}return document.body.removeChild(n),a&&(i.removeAllRanges(),i.addRange(a)),r}},{key:"getAngle",value:function(e,t,n,i){var a=Math.abs(e-n),r=Math.abs(t-i),o=r/Math.sqrt(Math.pow(a,2)+Math.pow(r,2)),s=Math.acos(o),c=Math.floor(180/(Math.PI/s));return n>e&&i>t&&(c=180-c),n==e&&i>t&&(c=180),n>e&&i==t&&(c=90),n<e&&i>t&&(c=180+c),n<e&&i==t&&(c=270),n<e&&i<t&&(c=360-c),c}},{key:"unique",value:function(e){return Array.from(new Set(e))}},{key:"getDate",value:function(e){var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),i=Math.floor((e-3600*n)/60),a=Math.floor((e-3600*n)%60),r="";return e>0?0==t?0==n?(r="",0==i?0==a?"":a<10?"0"+a+"\u79d2":a+"\u79d2":i+"\u5206\u949f"+(0==a?"":a<10?"0"+a+"\u79d2":a+"\u79d2")):(r=n+"\u5c0f\u65f6",0==i?r+(0==a?"":a<10?"0"+a+"\u79d2":a+"\u79d2"):r+(i<10?"0"+i+"\u5206\u949f":i+"\u5206\u949f")):t+"\u5929"+(0==n?"":n<10?"0"+n+"\u5c0f\u65f6":n+"\u5c0f\u65f6"):""}},{key:"loadAtlasSprite",value:function(e,t,n){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function i(){var a,r,o;return _regenerator.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a=this.atlass[e+t]){i.next=12;break}if(r=!1,o=cc.assetManager.getBundle(e),i.t0=o,i.t0){i.next=8;break}return i.next=7,this.loadBunlde(e);case 7:o=i.sent;case 8:return o.load(t,function(e,t){e||(a=t,r=!0)}),i.next=11,this.until(function(){return r});case 11:this.atlass[e+t]=a;case 12:return i.abrupt("return",a.getSpriteFrame(n)||Promise.reject());case 13:case"end":return i.stop()}},i,this)}))}},{key:"loadSprite",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){var i;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.getRes(e,t),n.t0=i,n.t0){n.next=6;break}return n.next=5,this.loadRes(e,t);case 5:i=n.sent;case 6:return n.abrupt("return",new cc.SpriteFrame(i));case 7:case"end":return n.stop()}},n,this)}))}},{key:"getRes",value:function(e,t){var n;return null===(n=cc.assetManager.getBundle(e))||void 0===n?void 0:n.get(t)}},{key:"loadRes",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.loadBundleRes(e,t));case 1:case"end":return n.stop()}},n,this)}))}},{key:"loadBoundSprite",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n){cc.assetManager.loadBundle(e,function(e,i){i.load(t,function(e,t){n(new cc.SpriteFrame(t))})})}));case 1:case"end":return n.stop()}},n)}))}},{key:"loadSubpackage",value:function(t){var n=this;return new Promise(function(i){cc.assetManager.loadBundle(t,function(a,r){return __awaiter(n,void 0,void 0,_regenerator.default.mark(function n(){var o=this;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=4;break}return n.next=3,e.wait(100);case 3:return n.abrupt("return",this.loadSubpackage(t));case 4:r.load(t,function(n){return __awaiter(o,void 0,void 0,_regenerator.default.mark(function a(){return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!n){a.next=4;break}return a.next=3,e.wait(100);case 3:return a.abrupt("return",this.loadSubpackage(t));case 4:i(1);case 5:case"end":return a.stop()}},a,this)}))});case 5:case"end":return n.stop()}},n,this)}))})})}},{key:"loadBundleRes",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){var i=this;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n,a){return __awaiter(i,void 0,void 0,_regenerator.default.mark(function i(){var r;return _regenerator.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r=cc.assetManager.getBundle(e),i.t0=r,i.t0){i.next=6;break}return i.next=5,this.loadBunlde(e);case 5:r=i.sent;case 6:r.load(t,function(e,t){e?a(e):n(t)});case 7:case"end":return i.stop()}},i,this)}))}));case 1:case"end":return n.stop()}},n)}))}},{key:"loadBundleDir",value:function(e,t,n){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function i(){var a=this;return _regenerator.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise(function(i,r){return __awaiter(a,void 0,void 0,_regenerator.default.mark(function a(){var o;return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(o=cc.assetManager.getBundle(e),a.t0=o,a.t0){a.next=6;break}return a.next=5,this.loadBunlde(e);case 5:o=a.sent;case 6:o.loadDir(t,n,function(e,t){e?r(e):i(t)});case 7:case"end":return a.stop()}},a,this)}))}));case 1:case"end":return i.stop()}},i)}))}},{key:"loadBunlde",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){cc.assetManager.loadBundle(e,function(e,i){e?n(e):t(i)})}));case 1:case"end":return t.stop()}},t)}))}},{key:"preloadAny",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){cc.assetManager.preloadAny(e,function(e,i){e?n(e):t(i)})}));case 1:case"end":return t.stop()}},t)}))}},{key:"loadRemote",value:function(e){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function t(){return _regenerator.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){cc.assetManager.loadRemote(e,function(e,i){e?n(e):t(i)})}));case 1:case"end":return t.stop()}},t)}))}},{key:"loadSound",value:function(e,t){return __awaiter(this,void 0,void 0,_regenerator.default.mark(function n(){var i;return _regenerator.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.sound[e+t],n.t0=i,n.t0){n.next=7;break}return n.next=5,this.loadBundleRes(e,t);case 5:i=n.sent,this.atlass[e+t]=i;case 7:return n.abrupt("return",i||Promise.reject());case 8:case"end":return n.stop()}},n,this)}))}},{key:"randFromList",value:function(e,t){return this.randSortList(e).slice(0,t)}},{key:"removeFromList",value:function(e,t){var n=e.indexOf(t);e.splice(n,1)}},{key:"randSortList",value:function(e){return e.sort(function(){return Math.random()-.5})}},{key:"getTrueScale",value:function(e){for(var t=e.scale;e.parent;)t*=(e=e.parent).scale;return t}},{key:"randN",value:function(e,t,n){for(var i=[],a=e;a<t;a++)i.push(a);return this.randSortList(i).slice(0,n)}},{key:"loadCndFlowerSprite",value:function(e){var t="https://wxsdk-cdn.miso-lab.com/flower_tile/flower/"+(e=e%45==0?45:e%45)+".png";return new Promise(function(e,n){cc.loader.load({url:t,type:"png"},function(t,i){t?n(t):e(new cc.SpriteFrame(i))})})}}]),e}();n.utils=i,i.atlass={},i.sound={},cc._RF.pop()},{}]},{},["AD","Action","AdService","Analytics","Audio","AudioManager","Base64Utils","BaseIStorage","Collection","ComShareVideoIcon","ComToggle","ConfigHelper","Const","CustomAd","CustomAd2","CustomAd3","DataService","DateUtils","DouyinInterstitial","DouyinPay","DrawManager","Enum","EventManager","FlowerItem","FlowerPanel","Flowerpot","Flowerpots","GGPanel","GameData","GameDataBase","GameScene","GameService","Grid","Guide","IPhoneXScreen","List","ListItem","Loading","LoadingTools","LogService","ObjectInstance","OnlineService","Panel","PotItem","ProgessItem","PropPanel","QQPay","RandomUtils","RankManager","ResManager","RetPanel","SDKApi","SDKBaseData","SDKConst","SDKDefault","SDKEnum","SDKEventCenter","SDKEventEnum","SDKHttp","SDKShare","SDKTools","SDKUtils","SDKVideo","SdkData","SettingPanel","Sha1Utils","ShareData","ShareVideoService","SignUtils","SimulateShare","Storage","StorageUtils","Tile","TimeShow","TimingClose","UIManager","Version","ViewAction","WXSDK","WxApi","WxBanner","WxCustom","WxCustom2","WxCustom3","WxDefined","WxHelper","WxInit","WxInterstitial","WxLaunch","WxLogin","WxPay","WxStorage","WxSystem","md5","shareTools","utils","ts"]);